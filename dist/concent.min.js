!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["exports","react","react-dom"],t):t(e.concent={},e.React,e.ReactDOM)}(this,function(e,I,r){"use strict";I=I&&I.hasOwnProperty("default")?I.default:I,r=r&&r.hasOwnProperty("default")?r.default:r;var t,n,o,W={$$default:[]},ye="$$global",z="$$default",q="$$cc",H="$$concent_void_module_624313307",a="$$CONCENT_ROUTER",A="$$CcClass",_e="$$CcHook",U="$$CcFrag",f="$$CcOb",T="$$CcCust",h="$$Cc",B="$$Dispatcher",c="__cc_dispatcher_container_designed_by_zzk_qq_is_624313307__",ve=Symbol("__for_sync_param_ccsync__"),O=10,N=11,D=13,M="dispatch",me="setState",he="setModuleState",Ce="forceUpdate",w="invoke",K="sync",k="module",Ke="ref",ge="computed",Se="watch",Ee={CC_MODULE_NAME_DUPLICATE:1002,CC_MODULE_NOT_FOUND:1012,CC_DISPATCH_STRING_INVALID:1013,CC_DISPATCH_PARAM_INVALID:1014,CC_MODULE_NOT_CONNECTED:1015,CC_CLASS_KEY_DUPLICATE:1100,CC_CLASS_INSTANCE_KEY_DUPLICATE:1200,CC_CLASS_INSTANCE_MORE_THAN_ONE:1205,CC_STORED_KEYS_NEED_CCKEY:1207,CC_REDUCER_NOT_A_FUNCTION:1503},i=((t={})[Ee.CC_MODULE_NAME_DUPLICATE]="module name duplicate!",t[Ee.CC_MODULE_NOT_FOUND]="module not found!",t[Ee.CC_DISPATCH_STRING_INVALID]="when type param is string, it must be one of these format: (fnName)„ÄÅ(moduleName)/(fnName)",t[Ee.CC_DISPATCH_PARAM_INVALID]="dispatch param type is invalid, it must be string or object",t[Ee.CC_MODULE_NOT_CONNECTED]="module not been connected by ref",t[Ee.CC_CLASS_INSTANCE_KEY_DUPLICATE]="props.ccKey duplicate",t[Ee.CC_CLASS_INSTANCE_MORE_THAN_ONE]="ccClass is declared as singleton, trying new another one instance is not allowed! ",t[Ee.CC_STORED_KEYS_NEED_CCKEY]="you must explicitly specify a ccKey for ccInstance when set storedKeys!",t[Ee.CC_CLASS_KEY_DUPLICATE]="ccClassKey duplicate!",t[Ee.CC_REDUCER_NOT_A_FUNCTION]="reducer must be a function!",t),u=Object.freeze({MODULE_GLOBAL:ye,MODULE_DEFAULT:z,MODULE_CC:q,MODULE_VOID:H,MODULE_CC_ROUTER:a,CC_CLASS:A,CC_HOOK:_e,CC_FRAGMENT:U,CC_OB:f,CC_CUSTOMIZE:T,CC_PREFIX:h,CC_DISPATCHER:B,CC_DISPATCHER_BOX:c,CCSYNC_KEY:ve,SIG_FN_START:O,SIG_FN_END:N,SIG_FN_QUIT:12,SIG_FN_ERR:D,SIG_MODULE_CONFIGURED:14,SIG_STATE_CHANGED:15,RENDER_NO_OP:1,RENDER_BY_KEY:2,RENDER_BY_STATE:3,FOR_ONE_INS_FIRSTLY:1,FOR_ALL_INS_OF_A_MOD:2,DISPATCH:M,SET_STATE:me,SET_MODULE_STATE:he,FORCE_UPDATE:Ce,INVOKE:w,SYNC:K,CATE_MODULE:k,CATE_REF:Ke,FN_CU:ge,FN_WATCH:Se,ERR:Ee,ERR_MESSAGE:i}),s=((n={})[ye]={},n[z]={},n[q]={},n),d=((o={})[ye]={},o[z]={},o[q]={},o),l={},p={},j={_computedValueOri:d,_computedValue:s,_computedRaw:p,_computedDep:l,getRootComputedValue:function(){return s},getRootComputedDep:function(){return l},getRootComputedRaw:function(){return p}},y={},_={},C={_watchRaw:_,_watchDep:y,getRootWatchDep:function(){return y},getRootWatchRaw:function(){return _}},v={isStrict:!1,isDebug:!1,objectValueCompare:!1,computedCompare:!0,watchCompare:!0,watchImmediate:!1,bindCtxToMethod:!1},m={},g={};function S(t,n,r){try{t[n][r]=1}catch(e){var o={};o[r]=1,t[n]=o}}function L(e,t){return e+"/"+t}function E(e,t){S(m,e,t)}function $(e,t,n){!function(e,t){try{delete m[e][t]}catch(e){}}(L(e,t),n)}var b=Symbol("cuk"),x="1",$e="2",R="function",we="is not a plain json object!",F="should be an string array or *!",P=console.error;function V(e){return null!=e&&0<pe(e).length}function G(e){return!V(e)}function be(e,t){if(void 0===t&&(t=!1),!e)return!1;var n="object"==typeof e;if(n){var r=Array.isArray(e);return t?r:n&&!r}return!1}function Y(e,t){var n="";n="string"==typeof e?e:i[e]||"",t&&(n+=t),n||(n="undefined message for code:"+e);var r=Error(n);return r.code=e,r}function X(e,t,n,r,o,a,c){var i;return(i={})[b]=1,i.needCompute=n,i.fn=r,i.newState=o,i.oldState=a,i.fnCtx=c,i.isLazy=e,i.result=t,i}function J(e,t){return e+"$"+t}function Z(e){return e?" --verbose-info: "+e:""}function Q(e){return void 0===e&&(e="green"),"color:"+e+";border:1px solid "+e}function ee(e){return"%c"+e}var te=function(e){return"------------ CC "+e+" ------------"};function ne(e){P(te("WARNING")),e instanceof Error?(P(e.message),P(e.stack)):P(e)}function re(e){console.log(te("TIP")),console.log("%c"+e,"color:green;border:1px solid green;")}function oe(e){if(P(te("WARNING")),P(e),v.isStrict)throw e}function ae(e,t,n){void 0===n&&(n={});var r=e[t];return r||(r=e[t]=n),r}function ce(e,t){return ae(e,t,[])}function ie(e,t){e.includes(t)||e.push(t)}function ue(e,t,n){ie(ce(e,t),n)}function se(t,n){Object.keys(n).forEach(function(e){t[e]=n[e]})}function de(e,t,n){var r=e[t];r||(r=e[t]={}),se(r,n)}function fe(e){void 0===e&&(e=52);var t=Math.random();return parseInt(t*e)}function le(n,r,o,a){if(void 0===r&&(r=[]),void 0===a&&(a=!1),Array.isArray(n)){var t=[];r.forEach(function(e){n.includes(e)&&t.push(e)}),n.length=0,t.forEach(function(e){return n.push(e)})}else Object.keys(n).forEach(function(e){if(r.includes(e));else{var t=n[e];a&&t?pe(t).forEach(function(e){return delete t[e]}):o?n[e]=o:delete n[e]}})}function pe(e){return Object.keys(e)}function xe(e){var t=null;return e&&(e.currentTarget&&e.type?t=e:e.nativeEvent&&e.target&&(e.currentTarget=e.target,t=e)),t}function Ue(t,n,e){function r(e){e?e[t]=n:window[t]=n}window?r(e):setTimeout(function(){r(e)},3e3)}function Oe(e,t){for(var n in e)if(!(n in t))return!0;for(var r in t)if(e[r]!==t[r])return!0;return!1}function Ne(o,a,c){var i={},u=!1;if(a){var s=v.objectValueCompare;pe(a).forEach(function(e){var t=o[e],n=a[e],r=!0;"object"!=typeof n?r=t!==n:s&&(r=t!==n),r&&(c&&(c.prevStateContainer[e]=t,c.incStateVer(e),o[e]=n),i[e]=n,u=!0)})}return u?i:null}function De(e,t){var n=[];return e.forEach(function(e){t.includes(e)||n.push(e)}),n}function Ie(e){return void 0===e&&(e={}),"string"==typeof e?{module:e}:Object.assign({module:z},e)}var Ae="";function Te(){return Ae}function Me(){var t=null;return{commit:function(e){t||(t={}),Object.assign(t,e)},clear:function(){return t=null},getFnCommittedState:function(){return t}}}function Re(){var e=!1;return!window||("previewFrame"===window.name||window.__SANDBOX_DATA__||window.BrowserFS)&&(e=!0),e}function We(e){return{payload:null,renderKey:"",delay:-1,module:e,fnName:""}}function ke(e){void 0===e&&(e={});var t="function"==typeof e?e():e;if(!be(t))throw Error("state "+we);return t}function je(e,t){var n=t.split(".");return function e(t,n,r,o){var a=n[o];return r===o?t[a]:e(t[a],n,r,++o)}(e,n,n.length-1,0)}function Le(e){return"-"===e?"*":e}function Fe(e){return Array.isArray(e)||"-"===e||"*"===e}function Pe(e,t,n){void 0===n&&(n=!0);var r=t||{},o={fn:e},a=Fe(r)?{depKeys:r}:r;return n&&function(e){if(e&&!Fe(e))throw Error("depKeys must an array , '*' or '-'")}(a.depKeys),Object.assign(o,a)}var Ve={module:{computed:{},watch:{}},ref:{computed:{},watch:{},effect:{}}};function ze(e,t,n){var r=t[e];return{retKey:e,fn:r.fn,depKeys:r.depKeys,isLazy:n,sort:r.sort}}var qe=function(e,t){return e.sort-t.sort};function He(e,t,n,r,o,a,c,i){var u=r[o],s=[];if(!u)return{pickedFns:s,setted:[],changed:[]};var d=u.retKey_fn_,f=u.retKey_lazy_,l=u.stateKey_retKeys_,p=u.fnCount;if(e){var y=pe(d),_=pe(c),v=_;return"computed"===n?{pickedFns:y.map(function(e){return ze(e,d,f[e])}).sort(qe),setted:_,changed:v}:(y.forEach(function(e){var t=d[e];t.immediate&&s.push({retKey:e,fn:t.fn,depKeys:t.depKeys,sort:t.sort})}),s.sort(qe),{pickedFns:s,setted:_,changed:v})}var m=function(n,r){var o=[],a=[];return pe(r).forEach(function(e){var t=r[e];void 0!==t&&(a.push(e),t!==n[e]&&o.push(e))}),{changed:o,setted:a}}(a,c),h=m.setted,C=m.changed;if(0===h.length)return{pickedFns:s,setted:[],changed:[]};var K=h.join(",")+"|"+C.join(",")+"|"+o,g=Ve[t][n],S=i?ae(g,i):g,E=S[K];return E?{pickedFns:E.map(function(e){return ze(e,d,f[e])}),setted:h,changed:C}:(function(s,o,d,f,a,l,c){if(0===o.length)return;var e=a["*"];if(e){var i=0<d.length;e.forEach(function(e){var t=f[e],n=t.fn,r=t.compare,o=t.depKeys,a=t.sort,c={retKey:e,fn:n,depKeys:o,isLazy:l[e],sort:a};r?i&&s.push(c):s.push(c)})}s.length<c&&function(){var u={},e=o.length,t=function(e){var i=o[e],t=a[i];return t?(t.forEach(function(e){if(!u[e]){var t=f[e],n=t.fn,r=t.compare,o=t.depKeys,a=t.sort,c=!0;r&&!d.includes(i)&&(c=!1),c&&(u[e]=!0,s.push({retKey:e,fn:n,depKeys:o,isLazy:l[e],sort:a}))}}),s.length===c?"break":void 0):"continue"};e:for(var n=0;n<e;n++){var r=t(n);switch(r){case"continue":continue;case"break":break e}}}();s.sort(qe)}(s,h,C,d,l,f,p),S[K]=s.map(function(e){return e.retKey}),{pickedFns:s,setted:h,changed:C})}function Be(e,t,n){var r=t[n];return void 0!==r&&(e[n]=r,!0)}function Ge(t,n,e,r){void 0===n&&(n=[]),void 0===e&&(e=!1),void 0===r&&(r=!1);var o={},a=[];if(!be(t))return{partialState:e?null:o,isStateEmpty:!0,ignoredStateKeys:a};var c=!0,i=pe(t);return i.length<n.length?i.forEach(function(e){n.includes(e)?Be(o,t,e)&&(c=!1):r&&a.push(e)}):(n.forEach(function(e){Be(o,t,e)&&(c=!1)}),r&&(a=De(i,n))),c&&e&&(o=null),{partialState:o,isStateEmpty:c,ignoredStateKeys:a}}function Ye(e,n){return new Proxy(e,{get:function(e,t){return n.includes(t)||n.push(t),e[t]},set:function(){return!0}})}function Xe(e,t,n,r){var o=e.ctx;if(!0===o.__$$inBM||o.__$$renderStatus===x){var a=o.ccUniqueKey;if(r){var c=o.module;if(!W[c].includes(n))return;var i=L(c,n);if(!0===o.__$$inBM)return void(o.__$$staticWaKeys[i]=1);if("-"!==o.watchedKeys)return;var u=o.__$$curWaKeys,s=o.__$$compareWaKeys,d=o.__$$nextCompareWaKeys;E(i,a),s[n]=u[n]=1,d[n]||(d[n]=2,o.__$$nextCompareWaKeyCount++)}else{var f=L(t,n);if(!0===o.__$$inBM)return void(o.__$$staticWaKeys[f]=1);if("-"!==o.connect[t])return;var l=o.__$$curConnWaKeys,p=o.__$$compareConnWaKeys,y=o.__$$nextCompareConnWaKeys,_=o.__$$nextCompareConnWaKeyCount;E(f,a),p[t][n]=l[t][n]=1;var v=y[t];v[n]||(v[n]=2,_[t]++)}}}var Je=Object.prototype.hasOwnProperty.call,Ze=j._computedValueOri,Qe=j._computedValue,et=j._computedDep;function tt(e,t,n,r,o){(e.retKey_stateKeys_[r]||[]).forEach(function(e){Xe(t,n,e,o)})}function nt(r,o,a,c){void 0===a&&(a=!0),void 0===c&&(c=!1);var i=c?r.ctx.refComputedOri:Ze[o],u=c?r.ctx.refComputedValue:Qe[o];return i?new Proxy(i,{get:function(e,t){if(Je(i,t))if(c){var n=r.ctx.computedDep;Object.keys(n).forEach(function(e){tt(n[e],r,e,t,a)})}else tt(et[o],r,o,t,a);return u[t]},set:function(e,t,n){return e[t]=n,!0}}):{}}var rt,ot=function(e){return ne(e+" call commit or commitCu as it is lazy")},at={},ct={};function it(e,t,n){return e==k?ae(at,t):ae(ct,n)}function ut(e,t,n,r,o,a,c){if(void 0===c&&(c=!0),0!==a.length){var i,u;if(t===Ke){var s=e.computedDep,d=n===ge?s:e.watchDep;u=ae(s,r),i=ae(d,r)}else{var f=j._computedDep,l=n===ge?f:C._watchDep;u=ae(f,r),i=ae(l,r)}var p=ae(i,"stateKey_retKeys_"),y=ae(i,"retKey_stateKeys_"),_=function(e){var n=ce(y,o);e.forEach(function(e){var t=ce(p,e);Array.isArray(t)&&!t.includes(o)&&t.push(o),n.includes(e)||n.push(e)})};c?_(a):a.forEach(function(e){var t=ae(u,"retKey_stateKeys_");_(t[e]||[])})}}function st(e,t,n){return t===Ke?e.computedRetKeyFns:(j._computedDep[n]||{}).retKey_fn_||{}}function dt(l,E,$,w,p,e,b,y,x,U,O,N,D){void 0===l&&(l={});for(var I=l.ctx,A=I?I.ccUniqueKey:"",_=0,T=e,M=!0,R=!1,t=function(){var v=1===++_&&U,e=p(T,v),t=e.pickedFns,m=e.setted,h=e.changed;if(!t.length)return"break";var n,r,o=Me(),C=o.commit,a=o.getFnCommittedState,c=Me(),K=c.commit,g=c.getFnCommittedState,S=c.clear;if(t.forEach(function(e){var n=e.retKey,t=e.fn,r=e.isLazy,o=N+" "+O+" retKey["+n+"] can't",a={retKey:n,callInfo:x,isFirstCall:U,commit:C,commitCu:K,setted:m,changed:h,cuVal:D,stateModule:E,refModule:$,oldState:w,committedState:T,refCtx:I},c=v&&"-"===e.depKeys,i=[],u=[];if(c&&(a.cuVal=function(n,r,o,e,t,a){var c,i;return i=k===r?(c=Ze[e],Qe[e]):(c=t.refComputedOri,t.refComputedValue),new Proxy(c,{get:function(e,t){return Je(c,t)?a.push(t):ne(r+" "+o+" retKey["+n+"] get cuVal invalid retKey["+t+"]"),i[t]},set:function(){return!0}})}(n,N,O,E,I,i)),O===ge)if(r&&(a.commit=function(){return ot(o)},a.commitCu=a.commit),c){var s=Ye(b,u),d=t(s,s,a);D[n]=X(!1,d),ut(I,N,ge,E,n,u),ut(I,N,ge,E,n,i,!1),function(e,t,n,r,o,a){var c=it(e,o,a),i=st(n,o,a),u=ce(c,e);t.forEach(function(e){i[e].isStatic?u.push(e):ce(c,e).forEach(function(e){return ie(u,e)})})}(n,i,I,0,N,E)}else if(r)D[n]=X(r,null,!0,t,b,w,a);else{var f=t(b,w,a);D[n]=X(!1,f)}else{var l=b,p=w;c&&(p=l=Ye(b,u)),!1===t(l,p,a)&&(M=!1),c&&(ut(I,N,Se,E,n,u),ut(I,N,Se,E,n,i,!1))}c&&N===Ke&&u.forEach(function(e){return I.__$$staticWaKeys[L(E,e)]=1});var y=g();if(y){var _=st(I,N,E);pe(y).forEach(function(e){var t=_[e];t?t.isStatic?function(e,t,n,r){return ce(it(t,n,r),e)}(e,N,E,A).includes(e)?ne("commitCu:"+o+" change ["+e+"], ["+n+"] referred ["+e+"]"):D[e]=X(!1,y[e]):ne("commitCu:"+o+" change ["+e+"], it must have zero dep keys"):ne("commitCu:"+o+" commit ["+e+"], it is not defined")}),S()}}),T=a()){var i=Ge(T,"ref"===N?I.privStateKeys:W[E],!0),u=i.partialState,s=i.ignoredStateKeys;if(s.length){var d="they are not "+(N===Ke?"private":"module")+", fn is "+N+" "+O;ne("these state keys["+s.join(",")+"] are invalid, "+d)}if(u)if(O===Se){var f=function(e,t){return t===Ke?e.computedDep:j._computedDep}(I,N);dt(l,E,$,w,function(e,t){return He(t,N,ge,f,E,w,e,A)},u,b,y,x,!1,ge,N,D)}else void 0===r&&(r=!1),T=n=u,r&&0===pe(n).length?T=null:(Object.assign(b,T),Object.assign(y,T),R=!0)}2<_&&(ne("fnCtx.commit may goes endless loop, please check your code"),T=null)};T;){if("break"===t())break}return{shouldCurrentRefUpdate:M,hasDelta:R}}for(var ft=j._computedValue,lt=pe,pt=Ne,yt={},_t=function(){return yt[B]},vt=function(n,e,t){var r=void 0===t?{}:t,o=r.ref,a=void 0===o?null:o,c=r.callInfo,i=void 0===c?{}:c,u=r.noSave,s=void 0!==u&&u,d=ht(n),f=ft[n],l=j.getRootComputedDep(),p=C.getRootWatchDep(),y=a||_t(),_=y.module,v=Object.assign({},d,e),m=Object.assign({},e),h=m;return dt(y,n,_,d,function(e,t){return He(t,k,"computed",l,n,d,e)},h,v,m,i,!1,"computed",k,f),dt(y,n,_,d,function(e,t){return He(t,k,"watch",p,n,d,e)},h,v,m,i,!1,"watch",k,f),s||mt(n,m),m},mt=function(t,e,n){void 0===n&&(n=!1);var r=e;n&&(r=Ge(e,W[t],!0).partialState);var o=ht(t),a=Ct(t);return pt(o,r,{prevStateContainer:a,incStateVer:function(e){return Kt(t,e)}})},ht=function(e){return St[e]},Ct=function(e){return Et[e]},Kt=function(e,t){$t[e][t]++},gt=function(){var e;return(e={})[q]={},e[H]={},e[ye]={},e[z]={},e},St=gt(),Et=gt(),$t={},wt={getDispatcher:_t,isHotReloadMode:function(){return!!wt.isHot||window&&(window.webpackHotUpdate||Re())},runtimeVar:v,isHot:!1,reComputed:!0,isStartup:!1,moduleSingleClass:{},moduleName_stateFn_:{},moduleName_ccClassKeys_:{},moduleName_stateKeys_:W,moduleName_isConfigured_:{},ccClassKey_ccClassContext_:{},globalStateKeys:[],store:{appendState:function(e,t){var n=ce(W,e);lt(t).forEach(function(e){n.includes(e)||n.push(e)}),wt.store.setState(e,t)},_state:St,_prevState:Et,_stateVer:$t,getState:function(e){return e?ht(e):St},getPrevState:function(e){return e?Ct(e):Et},getStateVer:function(e){return e?$t[e]:$t},setState:function(e,t,n){return vt(e,t,n)},setGlobalState:function(e){return vt(ye,e)},saveSharedState:mt,getGlobalState:function(){return St[ye]}},reducer:{_reducer:(rt={},rt[ye]={},rt[q]={},rt),_caller:{},_fnName_fullFnNames_:{},_module_fnNames_:{}},computed:j,watch:C,refStore:{_state:{},setState:function(e,t){var n=wt.refStore._state,r=Object.assign({},n[e],t);n[e]=r}},init:{_init:{}},ccUKey_ref_:yt,event_handlers_:{},ccUKey_handlerKeys_:{},handlerKey_handler_:{},waKey_uKeyMap_:m,waKey_staticUKeyMap_:g,refs:yt,info:{packageLoadTime:Date.now(),firstStartupTime:"",latestStartupTime:"",version:"2.4.7",author:"fantasticsoul",emails:["624313307@qq.com","zhongzhengkai@gmail.com"],tag:"yuna"},fragmentNameCount:0,featureStr_classKey_:{},userClassKey_featureStr_:{},errorHandler:null,middlewares:[],plugins:[],pluginNameMap:{}},bt=localStorage.length,xt=wt.refStore._state,Ut=0;Ut<bt;Ut++){var Ot=localStorage.key(Ut);if(Ot.startsWith("CCSS_"))try{xt[Ot.substr(5)]=JSON.parse(localStorage.getItem(Ot))}catch(e){console.error(e)}}var Nt=[],Dt=function(e){return e.toLowerCase()===q},It=function(e){return/^[\$\#\&a-zA-Z0-9_-]+$/.test(e)},At=Z,Tt=Y;function Mt(e){if(!It(e))throw Error("module["+e+"] writing is invalid!");if(Dt(e))throw Error("'$$cc' is a built-in module name for concent")}function Rt(e,t,n){void 0===t&&(t=!0),void 0===n&&(n="");var r=n||"module["+e+"]",o=wt.store._state;if(Mt(e),e!==ye)if(t){if(V(o[e]))throw Tt(Ee.CC_MODULE_NAME_DUPLICATE,At(r))}else if(!o[e])throw Tt(Ee.CC_MODULE_NOT_FOUND,At(r))}function Wt(t,e){var n=Array.isArray(e);if(!n&&"*"!==e)throw Error("storedKeys type err, "+F);n&&e.forEach(function(e){if(t.includes(e))throw Error("the item["+e+"] of storedKeys is not a module state key!")})}var kt={},jt=function(e,t,n){if(e.code!==Ee.CC_MODULE_NAME_DUPLICATE||!wt.isHotReloadMode())throw e;var r=function(e){e||(e="");for(var t=e.split("\n"),n=t.length,o="",a=0;a<n;a++)if(t[a].includes(".checkModuleNameAndState")){!function(){var e=t[a+3].split(":"),n=e.length-1,r=[];e.forEach(function(e,t){t!==n&&r.push(e)}),o=r.join(":")}();break}return o}(e.stack),o=n+"|--link--|"+t,a=kt[o];if(a){if(r!==a)throw e}else kt[o]=r},Lt={};function Ft(e){Lt[e]={}}function Pt(t,e,n){void 0===n&&(n=!0),Ft(t);var r=t===H?{}:e;try{!function(e,t,n){if(Rt(e,n),!be(t))throw Error("module["+e+"]'s state "+we)}(t,r,n)}catch(e){jt(e,t,"state")}var o=wt.store,a=o.getState(),c=o.getStateVer(),i=o.getPrevState();de(a,t,r),de(i,t,r),c[t]=pe(r).reduce(function(e,t){return e[t]=1,e},{});var u=wt.computed;ae(u._computedDep,t,{retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0}),ae(u._computedValue,t),ae(u._computedValueOri,t);var s=Object.keys(r);if(wt.moduleName_stateKeys_[t]=s,t===ye){var d=wt.globalStateKeys;s.forEach(function(e){d.includes(e)||d.push(e)})}}function Vt(e,t){void 0===t&&(t=!1);var n=wt.ccUKey_ref_,r=wt.moduleName_ccClassKeys_,o=wt.ccClassKey_ccClassContext_,a=[];if(e){if(!wt.store._state[e])throw Error("module["+e+"] is not declared in store");var c=r[e];if(c&&0!==c.length){var i=c[0],u=o[i];if(!u)throw Error("no ccClassContext found for ccClassKey "+i+"!");a=u.ccKeys}if(e===z&&(a=a.filter(function(e){return!e.startsWith(U)})),0===a.length){if(!1!==t){throw Error("[[pickOneRef]]: no ref found for module["+e+"]!,if this message doesn't matter, you can ignore it")}a=[B]}}else a=[B];var s=n[a[0]];if(!s)throw Error("cc found no ref!");return s}var zt=J,qt=ne,Ht=function(){return Promise.resolve()};function Bt(e,t,n,r,o){void 0===n&&(n="");var a=void 0===o?{}:o,c=a.ccClassKey,i=a.ccKey,u=a.throwError,s=a.refModule,d=void 0===s?"":s;if(void 0===e&&void 0===t)throw Error("params type error");var f,l="",p="";try{if(c&&i){var y=zt(c,i),_=wt.refs[y];if(!_)return qt("no ref found for ccUniqueKey:"+y+"!"),Ht();f=_.ctx.dispatch}else{if("string"==typeof e)if(e.includes("/")){var v=e.split("/");l=v[0],p=v[1]}else p=e;var m;if(!(m=l&&"*"!==l?Vt(l):d?Vt(d):Vt()))return qt("no ref found"),Ht();f=m.ctx.dispatch}if("*"!==l)return f(e,t,n,r);var h=wt.reducer._fnName_fullFnNames_[p];if(!h)return;var C=[];return h.forEach(function(e){C.push(f(e,t,n,r))}),Promise.all(C)}catch(e){if(u)throw e;return qt(e.message),Ht()}}function Gt(e,t,n,r,o){return Bt(e,t,n,r,o)}function Yt(a,e){void 0===e&&(e={});var t="module["+a+"] reducer";if(!be(e))throw Error(t+" "+we);Rt(a,!1,t+" is invalid");var n=wt.reducer,r=n._reducer,o=n._caller,c=n._fnName_fullFnNames_,i=n._module_fnNames_,u=Object.assign({},e);r[a]=u;var s=ae(o,a),d=ce(i,a);u.setState||(u.setState=function(e){return e}),pe(u).forEach(function(e){d.includes(e)||d.push(e);var r=a+"/"+e,t=ce(c,e);t.includes(r)||t.push(r),s[e]=function(e,t,n){return Gt(r,e,t,n)};var o=u[e];if("function"!=typeof o)throw Error("reducer key["+e+"] 's value is not a function");var n=o;o.__fnName&&(u[e]=n=function(e,t,n){return o(e,t,n)}),n.__fnName=e,n.__stateModule=a,n.__ctName=o.__ctName||o.constructor.name})}var Xt=0,Jt=["a","A","b","B","c","C","d","D","e","E","f","F","g","G","h","H","i","I","j","J","k","K","l","L","m","M","n","N","o","O","p","P","q","Q","r","R","s","S","t","T","u","U","v","V","w","W","x","X","y","Y","z","Z"];function Zt(e){return Xt++,(e||function(e){void 0===e&&(e=6);for(var t="",n=0;n<e;n++)t+=Jt[fe()];return t}())+"_"+Xt}var Qt=wt.moduleName_stateKeys_,en=wt.runtimeVar,tn=1;function nn(e,t,n,r,o){var a=t.refCtx,c=t.type;if(e!==Ke||a.__$$inBM){if(n){var i,u,s,d=typeof n;if("string"==d)be(r)?((u={})[n]=r,i=u):typeof r===R&&((s={})[n]=Pe(r,o),i=s);else if(be(n))i=n;else if(d===R&&!be(i=n(a)))throw Error("type of "+c+" callback result must be an object");i?function(U,O,N){var e=en.computedCompare,t=en.watchCompare,D=en.watchImmediate,I=O.type===ge?e:t,A=O.module;pe(N).forEach(function(c){var e=N[c],t=typeof e,n=e;if(t===R&&(n={fn:e}),be(n)){var r=n,o=r.fn,a=r.immediate,i=void 0===a?D:a,u=r.compare,s=void 0===u?I:u,d=r.lazy,f=r.retKeyDep,l=void 0===f||f,p=n.depKeys||"-",y=n.sort||tn++,_=Zt("mark");if("*"===p||"-"===p){var v="-"===p&&l,m=cn(O,A,c,v),h=m.pureKey,C=m.module;rn(U,O,_,h),an(U,O,C,h,o,p,i,s,d,y)}else if(0===p.length){var K=cn(O,A,c),g=K.pureKey,S=K.module;rn(U,O,_,g),an(U,O,S,g,o,p,i,s,d,y)}else{var E=cn(O,A,c),$=E.pureKey,w=E.moduleOfKey,b=w;rn(U,O,_,$);var x={};p.forEach(function(e){var t=cn(O,A,e),n=t.isStateKey,r=t.pureKey,o=t.module;if(b&&o!==b)throw Error("including slash both in retKey["+c+"] and depKey["+e+"] founded, but their module is different");var a=ce(x,o);if(!n)throw Error("depKey["+e+"] invalid, module["+o+"] doesn't include its stateKey["+r+"]");on(O,o,r),a.push(r)}),pe(x).forEach(function(e){an(U,O,e,$,o,x[e],i,s,d,y)})}}else ne("retKey["+c+"] item type error")})}(e,t,i):ne(e+" "+c+" param type error")}}else ne(e+" "+c+" must be been called in setup block")}function rn(e,t,n,r){if(e===Ke){var o=t.refCtx,a=o.retKey_fnUid_,c=t.type,i=c+"_"+r;if(a[i])throw Error("ccUKey["+o.ccUniqueKey+"], retKey["+r+"] duplicate in ref "+c);a[i]=n}}function on(e,t,n){var r=e.refCtx;r&&(r.__$$staticWaKeys[L(t,n)]=1)}function an(e,t,n,r,o,a,c,i,u,s){var d=ae(t.dep,n,{retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0}),f=d.retKey_fn_,l=d.stateKey_retKeys_,p=d.retKey_lazy_,y=d.retKey_stateKeys_,_=Array.isArray(a)&&0===a.length,v=s;_?v<0||(v=-1):s<0&&(v=0);var m={fn:o,immediate:c,compare:i,depKeys:a,sort:v,isStatic:_};f[r]?e!==Ke&&(f[r]=m,p[r]=u):(f[r]=m,p[r]=u,d.fnCount++),e===Ke&&(t.retKeyFns[r]=f[r]);var h=t.refCtx;if(h&&("computed"===t.type?h.hasComputedFn=!0:h.hasWatchFn=!0),"-"!==a){var C="*"===a?["*"]:a;"*"===a&&(y[r]=Qt[n]),C.forEach(function(e){ue(l,e,r)})}}function cn(e,t,n,r){void 0===r&&(r=!1);var o,a=t,c=n,i="";if(n.includes("/")){var u=n.split("/"),s=u[0];s&&(a=i=s),c=u[1]}var d=Qt[a];if(a===e.module)o=e.stateKeys;else{if(!(o=d))throw Y(Ee.CC_MODULE_NOT_FOUND,Z("module["+a+"]"));if(!e.connect[a])throw Y(Ee.CC_MODULE_NOT_CONNECTED,Z("module["+a+"], retKey["+c+"]"))}var f=o.includes(c);return r&&f&&function(e,t,n,r){var o=ae(e.dep,t,{retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0}),a=o.retKey_stateKeys_;ue(o.stateKey_retKeys_,n,n),ue(a,n,n),r&&on(e,t,n)}(e,a,c,d.includes(c)),{isStateKey:f,pureKey:c,module:a,moduleOfKey:i}}function un(e,o){var t={};return pe(e).forEach(function(r){o[r]=X(),Object.defineProperty(t,r,{get:function(){var e=o[r]||{},t=e.isLazy;if(!t)return e.result;if(t&&e.needCompute){var n=(0,e.fn)(e.newState,e.oldState,e.fnCtx);e.result=n,e.needCompute=!1}return e.result},set:function(e){var t=o[r];e[b]?e.isLazy?(t.isLazy=!0,t.needCompute=!0,t.newState=e.newState,t.oldState=e.oldState,t.fn=e.fn,t.fnCtx=e.fnCtx):(t.isLazy=!1,t.result=e.result):ne("computed value can not been changed manually")}})}),t}var sn=be;function dn(n,e){if(e){var t="module["+n+"] computed";if(!sn(e))throw Error(t+" "+we);Rt(n,!1,t+" is invalid");var r=wt.computed,o=wt.store.getState(),a=r.getRootComputedValue(),c=r.getRootComputedDep();r.getRootComputedRaw()[n]=e;var i=o[n];nn(k,{type:ge,module:n,stateKeys:pe(i),dep:c},e);var u=wt.getDispatcher(),s=Object.assign({},i);a[n]=un(e,r._computedValueOri[n]);var d=a[n];dt(u,n,u&&u.ctx.module,i,function(e,t){return He(t,k,"computed",c,n,i,e)},i,i,s,We(n),!0,"computed",k,d)}}var fn=be,ln=ae,pn=pe;function yn(n,e,t){if(void 0===t&&(t=!1),e){var r="module["+n+"] watch";if(!fn(e))throw Error(r+" "+we);Rt(n,!1,r+" is invalid");var o=wt.watch.getRootWatchDep(),a=wt.watch.getRootWatchRaw(),c=wt.computed.getRootComputedValue();if(t){var i=a[n];i?Object.assign(i,e):a[n]=e}else a[n]=e;var u=(0,wt.store.getState)(n);nn(k,{module:n,stateKeys:pn(u),dep:o},e);var s=wt.getDispatcher(),d=Object.assign({},u),f=ln(c,n);dt(s,n,s&&s.ctx.module,u,function(e,t){return He(t,k,"watch",o,n,u,e)},u,u,d,We(n),!0,"watch",k,f)}}var _n=[O,N,12,D,14,15],vn={};function mn(t,n){vn[t].forEach(function(e){e({sig:t,payload:n})})}function hn(e,t){function n(e,t){var n=vn[e];n?n.push(t):console.warn("invalid sig["+e+"]")}Array.isArray(e)?e.forEach(function(e){n(e,t)}):n(e,t)}_n.forEach(function(e){return vn[e]=[]});var Cn=function(e){if(!wt.errorHandler)throw e;wt.errorHandler(e)},Kn=0,gn={},Sn={},En={},$n={};function wn(){return++Kn}function bn(e,t,n,r){if(n){var o=r[e];o||(o=r[e]={});var a=o[t];a?Object.assign(a,n):o[t]=n}}function xn(e,t,n){bn(e,t,n,gn)}function Un(e,t,n){return xn(e,t,n),function(e){var t=function(e){return gn[e]}(e),n=[];return pe(t).forEach(function(e){n.push({module:e,state:t[e]})}),n}(e)}function On(e){delete gn[e]}var Nn={},Dn=function(e,t,n){void 0===n&&(n=1e3);var r=Nn[t];r&&clearTimeout(r),Nn[t]=setTimeout(function(){delete Nn[t],e()},n)};function In(e,n,r,t,o,a){var c=e.ctx;if(!c.hasWatchFn)return{shouldCurrentRefUpdate:!0};var i=Object.assign({},t),u=c.watchDep,s=c.module,d=c.ccUniqueKey,f=c.refComputed;n!==s&&(f=c.connectedComputed[n]);var l=Object.assign({},r,t);return dt(e,n,s,r,function(e,t){return He(t,Ke,Se,u,n,r,e,d)},t,l,i,o,a,Se,Ke,f)}function An(e,n,r,t,o,a,c){void 0===a&&(a=!1),void 0===c&&(c=!1);var i=e.ctx,u=Object.assign({},t);if(!i.hasComputedFn)return u;var s=i.computedDep,d=i.module,f=i.ccUniqueKey,l=i.refComputed;n!==d&&(l=i.connectedComputed[n]);var p=Object.assign({},r,t);return dt(e,n,d,r,function(e,t){return He(t,Ke,"computed",s,n,r,e,f)},t,p,u,o,a,"computed",Ke,l),c&&Object.assign(t,u),u}var Tn=pe,Mn=wt.ccUKey_ref_,Rn=wt.waKey_uKeyMap_,Wn=wt.waKey_staticUKeyMap_;function kn(o,e,c,i){var t=Tn(e),n=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=[]),e+"/"+t.sort().join(",")+"/"+n+"/"+("*"===r?"*":r.sort().join(","))}(o,t,c,i),r=function(e,t){return Lt[e][t]}(o,n);if(r)return{sharedStateKeys:t,result:r};var a={},u=[],s=[];t.forEach(function(e){var t=o+"/"+e;Object.assign(a,Rn[t],Wn[t])});function d(e,t){e?u.push(t):s.push(t)}function f(e,t){var n=e.ctx,r=n.ccClassKey,o=n.ccUniqueKey;if(c){var a=n.renderKey===c;"*"===i?a&&d(t,o):i.includes(r)?a&&d(t,o):d(t,o)}else d(t,o)}var l=Tn(a),p=!1;l.forEach(function(e){var t=Mn[e];if(t){var n=t.ctx,r=!!n.connect[o];n.module===o&&f(t,!0),r&&f(t,!1)}else p=!0});var y={belong:u,connect:s};return p||function(e,t,n){Lt[e][t]=n}(o,n,y),{sharedStateKeys:t,result:y}}var jn=be,Ln=ne,Fn=V,Pn=function(e,t){return e+"/"+Object.keys(t).sort().join("|")},Vn=pe,zn=1,qn=2,Hn=Ce,Bn=me,Gn=15,Yn=1,Xn=2,Jn=3,Zn=wt.store,Qn=Zn.setState,er=Zn.getPrevState,tr=Zn.saveSharedState,nr=wt.middlewares,rr=wt.ccClassKey_ccClassContext_,or=wt.refStore,ar=wt.moduleName_stateKeys_;function cr(e,t,a){var n=void 0===t?{}:t,c=n.module,r=n.skipMiddleware,i=void 0!==r&&r,u=n.payload,o=n.reactCallback,s=n.type,d=n.calledBy,f=void 0===d?Bn:d,l=n.fnName,p=void 0===l?"":l,y=n.renderKey,_=void 0===y?"":y,v=n.delay,m=void 0===v?-1:v;if(void 0!==e)if(jn(e)){var h=a.ctx,C=h.module,K=h.ccUniqueKey,g=h.ccKey,S=function(e,t){return e===t?zn:qn}(c,C),E={payload:u,renderKey:_,ccKey:g,module:c,fnName:p},$=function(e,t,n){var r=Ge(t,ar[e],!0).partialState;if(r)return Qn(e,r,n);return r}(c,e,{ref:a,callInfo:E,noSave:!0});Object.assign(e,$),ir(a,E,_,f,e,S,o,!0,function(t,n,r){var o={calledBy:f,type:s,payload:u,renderKey:_,delay:m,ccKey:g,ccUniqueKey:K,committedState:n,refModule:C,module:c,fnName:p,sharedState:$||{},modState:function(e,t){o.committedState[e]=t,o.sharedState[e]=t}};!function(e,n,r){if(!0!==e){var o=nr.length;if(0<o){var a=0;!function e(){if(a===o)r();else{var t=nr[a];a++,"function"==typeof t?t(n,e):(Ln("found one middleware is not a function"),e())}}()}else r()}else r()}(i,o,function(){var e=tr(c,o.sharedState,!0);r&&r(),t===Yn&&!e||mn(Gn,{calledBy:f,type:s,committedState:n,sharedState:e,module:c,ccUniqueKey:K,renderKey:_}),e&&function(e,t,n,r,o,a,c){var i=function(){!function(c,e,i,t,u,n){if(!i)return;var s=wt.ccUKey_ref_,r=e.ctx,o=r.ccUniqueKey,a=t===zn,d=kn(u,i,n,rr[r.ccClassKey].renderKeyClasses),f=d.sharedStateKeys,l=d.result,p=l.connect;l.belong.forEach(function(e){var t=s[e];if(t){var n=t.ctx.ccUniqueKey;a&&n===o||ir(t,c,null,"broadcastState",i,zn)}});var y=er(u);p.forEach(function(e){var t=s[e];if(t&&!0!==t.__$$isUnmounted){var n=t.ctx,r=An(t,u,y,i,c),o=In(t,u,y,r,c),a=o.shouldCurrentRefUpdate;a&&(n.__$$settedList.push({module:u,keys:f}),n.__$$ccForceUpdate())}})}(e,t,n,r,o,a)};if(0<c){var u=Pn(t.ctx.ccUniqueKey,n);Dn(i,u,c)}else i()}(E,a,e,S,c,_,m)})})}else Ln("your committed state "+we)}function ir(e,t,n,r,o,a,c,i,u){void 0===i&&(i=!1);var s=e.state,d=e.ctx;if(!0===e.__$$isUnmounted||a!==zn||r!==Hn&&!Fn(o))return c&&c(s),u&&u(Yn,o);var f=d.module,l=d.storedKeys,p=d.ccUniqueKey,y=Jn;if(n&&(y=Xn,d.renderKey!==n))return u&&u(Yn,o);if(0<l.length){var _=Ge(o,l),v=_.partialState;if(!_.isStateEmpty){if(!0===d.persistStoredKeys){var m=Ge(s,l),h=Object.assign({},m.partialState,v);localStorage.setItem("CCSS_"+p,JSON.stringify(h))}or.setState(p,v)}}function C(){var e=i?Ne(d.state,K):K;e&&(d.__$$settedList.push({module:f,keys:Vn(e)}),d.__$$ccSetState(e,c,g))}var K=An(e,f,s,o,t),g=In(e,f,s,K,t,!1).shouldCurrentRefUpdate;u?u(y,K,C):C()}function ur(e,t,n,r,o){void 0===r&&(r=-1);try{Vt(e).ctx.changeState(t,{ccKey:"[[top api:setState]]",module:e,renderKey:n,delay:r,skipMiddleware:o})}catch(e){oe(e)}}var sr=ne,dr=be,fr=pe,lr=wt.store,pr=lr.getState,yr=lr.setState,_r=wt.reducer._reducer,vr=wt.computed._computedValue,mr=Y,hr=Z;function Cr(e,t){void 0===t&&(t=!0);try{return Rt(e,!1,"module["+e+"] is not configured in store"),!0}catch(e){return function(e,t){if(void 0===t&&(t=!0),t)throw e;Sr(e)}(e,t),!1}}function Kr(o,a){return function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e?a(e):o.apply(void 0,n)}}function gr(e,t,n,r){var o;return!0===e?(function(e){En[e]=!0}(o=wn()),r[o]=1):r[o=t||wn()]||(r[o]=1),{_chainId:o,_oriChainId:n||o}}function Sr(e,t){e&&(t?t(e):(sr(e),wt.errorHandler&&wt.errorHandler(e)))}function Er(e,t,n){return function(r,o,a,c){return new Promise(function(e,t){var n=Object.assign(a,{__innerCb:Kr(e,t)});r(o,n,c)}).catch(Cn)}(Ur,e,t,n)}function $r(e,t,n){return Er(e,{callerRef:t.callerRef,context:!0,module:t.module,calledBy:t.calledBy,fnName:e.name,delay:t.delay,renderKey:t.renderKey,chainId:t.chainId,oriChainId:t.oriChainId,chainId_depth_:t.chainId_depth_,isSilent:t.isSilent},n)}function wr(a,c){return function(e,t,n){var r=a.ctx;if(c){var o=Object.assign({},r.state,e);c.state=o}n?(r.renderCount+=1,r.reactSetState(e,t)):(Object.assign(a.state,e),r.state=a.state)}}function br(n){return function(e){var t=n.ctx;t.renderCount+=1,t.reactForceUpdate(e)}}function xr(h,e){var t=void 0===e?{}:e,C=t.chainId,K=t.oriChainId,g=t.isLazy,n=t.delay,S=void 0===n?-1:n,r=t.isSilent,E=void 0!==r&&r,o=t.chainId_depth_,$=void 0===o?{}:o;return function(e,t,n,r){var o=g,a=E,c="",i=null!=r?r:S;if(dr(n)){var u=n.lazy,s=n.silent,d=n.renderKey,f=n.delay;void 0!==u&&(o=u),void 0!==s&&(a=s),void 0!==d&&(c=d),void 0!==f&&(i=f)}else c=n;var l,p,y=gr(o,C,K,$),_=typeof e,v={callerRef:h,calledBy:w,module:h.ctx.module,isSilent:a,chainId:y._chainId,oriChainId:y._oriChainId,chainId_depth_:$,delay:i,renderKey:c},m=Error("param type error, correct usage: invoke(userFn:function, ...args:any[]) or invoke(option:[module:string, fn:function], ...args:any[])");if("function"==_)return e.__fnName&&(e.name=e.__fnName),$r(e,v,t);if("object"!=_)throw m;if(p=Array.isArray(e)?(l=e[1],e[0]):(l=e.fn,e.module),"function"!=typeof l)throw m;return p&&(v.module=p),$r(l,v,t)}}function Ur(l,e,p){var y=e.callerRef,_=y.ctx.module,t=e.module,v=void 0===t?_:t,n=e.context,m=void 0!==n&&n,h=e.__innerCb,C=e.type,K=e.calledBy,g=e.fnName,r=e.delay,S=void 0===r?-1:r,E=e.renderKey,$=e.chainId,w=e.oriChainId,b=e.chainId_depth_,x=e.isSilent;!function(e,t,n,r){var o=n;Cr(e,!1)?(e!==t&&n&&(sr(function(e,t){return"param module["+e+"] must equal current ref's module["+t+"] when pass param reactCallback, or it will never been triggered! "}(e,t)),o=null),r(null,o)):r(Error("inputModule:"+e+" invalid"),null)}(v,_,e.cb,function(e,r){if(e)return Sr(e,h);var o,t=pr(v),n={};if(o=$===w&&1===b[$],m){b[$]=b[$]+1;var a=Or(y,!1,x,v,E,S,$,w,b),c=Or(y,!1,!0,v,E,S,$,w,b),i=Or(y,!0,x,v,E,S,$,w,b),u=xr(y,{delay:S,chainId:$,oriChainId:w,chainId_depth_:b}),s=xr(y,{isLazy:!0,delay:S,oriChainId:w,chainId_depth_:b}),d=xr(y,{isLazy:!1,delay:S,isSilent:!0,oriChainId:w,chainId_depth_:b}),f=function(e){return $n[e]}($)||{};n={module:v,callerModule:_,committedStateMap:f,committedState:f[v]||{},invoke:u,lazyInvoke:s,silentInvoke:d,invokeLazy:s,invokeSilent:d,dispatch:a,lazyDispatch:i,silentDispatch:c,dispatchLazy:i,dispatchSilent:c,rootState:pr(),globalState:pr(ye),moduleState:t,moduleComputed:vr[v]||{},setState:function(e){return a("setState",e,{silent:x,renderKey:E,delay:S})},refCtx:y.ctx}}!1===x&&mn(O,{isSourceCall:o,calledBy:K,module:v,chainId:$,fn:l}),new Promise(function(e){return e(l(p,t,n))}).then(function(e){b[$]=b[$]-1;var t=1===b[$];!function(e,t,n){bn(e,t,n,$n)}($,v,e);var n=[];!1===x&&(mn(N,{isSourceCall:o,calledBy:K,module:v,chainId:$,fn:l}),!function(e){return!0===En[e]}($)?n=[{module:v,state:e}]:t?function(e){return!0===Sn[e]}($)||(n=Un($,v,e),On($)):xn($,v,e)),n.forEach(function(e){e.state&&cr(e.state,{renderKey:E,module:e.module,reactCallback:r,type:C,calledBy:K,fnName:g,delay:S,payload:p},y)}),o&&(On($),function(e){delete $n[e]}($)),h&&h(null,e)}).catch(function(e){mn(D,{isSourceCall:o,calledBy:K,module:v,chainId:$,fn:l}),Sr(e,h)})})}function Or(b,x,U,O,N,D,I,A,T){return void 0===N&&(N=""),void 0===D&&(D=-1),void 0===T&&(T={}),function(e,n,t,r){void 0===e&&(e={});var o=x,a=U,c="",i=r||D;if(dr(t)){c=N;var u=t.lazy,s=t.silent,d=t.renderKey,f=t.delay;void 0!==u&&(o=u),void 0!==s&&(a=s),void 0!==d&&(c=d),void 0!==f&&(i=f)}else c=t||N;function l(){return xr(b,{chainId:v,oriChainId:m,isLazy:o,chainId_depth_:T})(e,n,c,i)}var p,y,_=gr(o,I,A,T),v=_._chainId,m=_._oriChainId,h=typeof e,C=O;if(h&&"object"==h){if(Array.isArray(h))return l();var K=e.module;K&&(C=K),p=e.type,y=e.cb}else{if("string"!=h&&"function"!=h)return Promise.reject(mr(Ee.CC_DISPATCH_PARAM_INVALID));var g=e;if("function"==h){var S=e.__fnName;if(!S)return l();g=S,1==T[m]&&(C=e.__stateModule)}var E=g.split("").filter(function(e){return"/"===e}).length;if(0===E)p=g;else{if(1!==E)return Promise.reject(mr(Ee.CC_DISPATCH_STRING_INVALID,hr(g)));var $=g.split("/"),w=$[0];w&&(C=w),p=$[1]}}return"*"===C?Bt("*/"+p,n,{silent:a,lazy:o,renderKey:c},i,{refModule:b.ctx.module}):new Promise(function(e,t){!function(e){var t=void 0===e?{}:e,n=t.callerRef,r=t.module,o=t.renderKey,a=t.isSilent,c=t.type,i=t.payload,u=t.cb,s=t.__innerCb,d=t.delay,f=void 0===d?-1:d,l=t.chainId,p=t.oriChainId,y=t.chainId_depth_,_=_r[r];if(!_)return s(Error("no reducerMap found for module:["+r+"]"));var v=_[c];if(!v)return s(Error("no reducer fn found for ["+r+"/"+c+"], is these fn you want:"+Object.keys(_)));Ur(v,{callerRef:n,module:r,type:c,cb:u,context:!0,__innerCb:s,calledBy:M,delay:f,renderKey:o,isSilent:a,chainId:l,oriChainId:p,chainId_depth_:y},i)}({callerRef:b,module:C,type:p,payload:n,cb:y,__innerCb:Kr(e,t),delay:i,renderKey:c,isSilent:a,chainId:v,oriChainId:m,chainId_depth_:T})}).catch(Cn)}}function Nr(a){return function(t){try{ur(a,t)}catch(e){var n=pr(a);if(!n)return sr("invalid module "+a);var r=Ge(t,fr(n),!1,!0),o=r.ignoredStateKeys;r.isStateEmpty||yr(a,r.partialState),0<o.length&&sr("invalid keys:"+o.join(",")+", their value is undefined or they are not declared in module"+a),re("no ccInstance found for module["+a+"] currently, cc will just store it, lately ccInstance will pick this state to render")}}}var Dr=function(o){return function(e,t){var n=o.ctx,r=Object.assign({},o.state,e);n.type===_e?(o.state=n.state=r,n.__boundSetState(r),t&&t(r)):(n.state=r,o.__$$isMounted?o.state=r:Object.assign(o.state,e),n.__boundSetState(r,t))}},Ir=function(r){return function(e){var t=r.ctx;if(t.type===_e){var n=Object.assign({},r.state);t.__boundSetState(n),e&&e(n)}else t.__boundForceUpdate(e)}},Ar=be,Tr=ke;function Mr(t,e){if(wt.isStartup){if(!Ar(e))throw Error("param config "+we);if(t===ye)throw Error("configuring global module is not allowed");var n=e.state,r=e.reducer,o=e.computed,a=e.watch,c=e.init,i=e.isClassSingle,u=Tr(n);if("function"==typeof n&&(wt.moduleName_stateFn_[t]=n),r&&!Ar(r))throw Error("config.reducer "+we);if(Pt(t,u,!0),Yt(t,r),o&&dn(t,o),a&&yn(t,a),wt.moduleSingleClass[t]=!0===i,c){if("function"!=typeof c)throw Error("init value must be a function!");Promise.resolve().then(c).then(function(e){Nr(t)(e)})}wt.moduleName_isConfigured_[t]=!0,mn(14,t)}else Nt.push({module:t,config:e})}function Rr(r,o){var a={};return pe(r).forEach(function(e){function t(){return n.apply(void 0,arguments)}var n=r[e];t.__fnName=e,t.__stateModule=o,a[e]=t}),a}function Wr(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function kr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var jr=pe,Lr=be,Fr=wt.store._state,Pr=Object.prototype.hasOwnProperty.call;var Vr=G,zr=Y,qr=wt.featureStr_classKey_,Hr=wt.userClassKey_featureStr_,Br=wt.ccClassKey_ccClassContext_,Gr=0;var Yr=wt.moduleName_stateKeys_,Xr=wt.moduleName_ccClassKeys_,Jr=wt.moduleSingleClass,Zr=wt.ccClassKey_ccClassContext_,Qr=wt.computed._computedValue,eo=function(e,t){var n=!1,r=!1;if(!Array.isArray(e))return{duplicate:n,notArray:!0,keyElementNotString:r};if(!Array.isArray(t))return{duplicate:n,notArray:!0,keyElementNotString:r};var o=e.length,a=t.length;e:for(var c=0;c<o;c++){var i=e[c];if("string"!=typeof i){r=!0;break e}for(var u=0;u<a;u++){var s=t[u];if("string"!=typeof s){r=!0;break e}if(s===i){n=!0;break e}}}return{duplicate:n,notArray:!1,keyElementNotString:r}},to=Z;function no(e,t,n,r,o,a,c,i,u){void 0===e&&(e=z),void 0===a&&(a=[]),!0===i&&function(){if(!0!==wt.isStartup)throw Error("you must startup cc by call startup method before register ReactClass to cc!")}();var s="cc"===u;Rt(e,!1,"module["+e+"] is not configured in store"),Wt(Yr[e],a);var d=c,f=Array.isArray(c);!f&&"string"!=typeof c||(d={},(f?c:c.split(",")).forEach(function(e){return d[e]="-"}));e===ye||d[ye]||(d[ye]="-");var l,p=function(e,t,n){if(t===B)return[];if(!n)return[];if("*"===n)return Yr[e];var r=eo(n,[]);if(r.notArray||r.keyElementNotString)throw Error("watchedKeys "+F+" "+to("ccClassKey:"+t));return n}(e,t,o),y=function(o,e,t,a){if(!Lr(o))throw Error("CcFragment or CcClass's prop connect type error, it "+we);function c(e){return i+" module["+e+"]'s value must be * or array of string"}var i="CcFragment or CcClass's prop connect is invalid,",n=jr(o);n.sort();var u=[],s={};if(n.forEach(function(t){var n=Fr[t],r=a+"_"+t+"/";if(void 0===n)throw Error(i+" module["+t+"] not found in cc store ");var e=o[t];if("string"==typeof e){if("*"!==e&&"-"!==e)throw Error(c(t));u.push(r+"*"),jr(n).forEach(function(e){return s[t+"/"+e]=e})}else{if(!Array.isArray(e))throw Error(c(t));e.forEach(function(e){if(!Pr(n,e))throw Error(i+" module["+t+"]'s key["+e+"] not declared in cc store ");r+=e+",",s[t+"/"+e]=e}),u.push(r)}}),u.push("|"),"*"===e)u.push(a+"_$"+t+"/*");else{e.sort();var r=t+"/"+e.join(",");u.push(r)}return{featureStr:u.join("@"),connectedModuleKeyMapping:s,connectedModuleNames:n}}(d,p),_=y.connectedModuleKeyMapping,v=y.connectedModuleNames,m=function(e,t,n,r,o,a,c){if(void 0===c&&(c=""),!c){if(t===z&&Vr(n)&&0===r.length)return o+"0";var i=o+":"+a,u=qr[i];return u||(qr[i]=u=""+o+ ++Gr)}if(c.startsWith(h))throw Error("user can not specify a classKey["+c+"] starts with $$Cc");if(!e&&c.toLowerCase()==B.toLowerCase())throw Error(B+" is cc built-in ccClassKey name.");if(Br[c]){if(Hr[c]!==a)throw zr(Ee.CC_CLASS_KEY_DUPLICATE,"ccClassKey:["+c+"] duplicate")}else Hr[c]=a;return c}(s,e,d,p,r,y.featureStr,t);if(n){if(!Array.isArray(n)&&"*"!==n)throw Error("renderKeyClasses type err, it is must be an array or string *");l=n}else l=[m];return function(e,t,n,r,o,a,c){var i=Zr[e];i||(i=function(e,t,n,r,o){return{module:e,ccClassKey:t,renderKeyClasses:n,originalWatchedKeys:o,watchedKeys:r,ccKeys:[],connectedState:{},connectedModuleKeyMapping:null,connectedModule:{}}}(n,e,t,o,r),Zr[e]=i);var u={},s={};if(a){var d=wt.store._state,f=i.connectedState;c.forEach(function(e){f[e]=d[e],s[e]=Qr[e],u[e]=1}),i.connectedModuleKeyMapping=a,i.connectedModule=u,i.connectedComputed=s}}(m,l,e,o,p,_,v),function(e,t){var n=ce(Xr,e);if(!0===Jr[e]&&1<=n.length)throw Error("module["+e+"] is declared as single, only on ccClassKey can been registered to it, and now a ccClassKey["+n[0]+"] has been registered!");n.includes(t)||n.push(t)}(e,m),{_module:e,_connect:d,_watchedKeys:p,_ccClassKey:m}}var ro=wt.event_handlers_,oo=wt.handlerKey_handler_,ao=wt.ccUKey_handlerKeys_,co=wt.ccUKey_ref_,io=function(e,t,n){return e+"$"+t+"$"+n},uo=ce,so=ne;function fo(e,t,n,r,o){void 0===o&&(o=null);var a=ro[e];if(a){var c=a;return r?c=a.filter(function(e){return e.ccUniqueKey===r}):n?c=a.filter(function(e){return e.ccClassKey===n}):t&&(c=a.filter(function(e){return e.module===t})),void 0!==o&&(c=c.filter(function(e){return e.identity===o})),c}return[]}function lo(e){var o={},r=[];e.forEach(function(e){var t=e.ccUniqueKey,n=e.event;delete oo[e.handlerKey],o[t]=1,r.includes(n)||r.push(n)}),r.forEach(function(e){var r=ro[e];r&&(r.forEach(function(e,t){var n=e.ccUniqueKey;1===o[n]&&(r[t]=null,delete ao[n])}),ro[e]=r.filter(function(e){return null!==e}))})}function po(e,t,n,r,o,a){var c=uo(ro,r);if("function"!=typeof a)return so("event "+r+"'s handler is not a function!");var i=io(n,r,o),u=uo(ao,n),s=c.findIndex(function(e){return e.handlerKey===i}),d={event:r,module:e,ccClassKey:t,ccUniqueKey:n,identity:o,handlerKey:i,fn:a};-1<s?c[s]=d:(c.push(d),u.push(i)),oo[i]=d}function yo(e){for(var t=arguments.length,a=Array(1<t?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];var r,o,c,i,u=null,s=null;"string"==typeof e?r=e:(r=e.name,u=e.identity,o=e.module,c=e.ccClassKey,i=e.ccUniqueKey,s=e.canPerform),fo(r,o,c,i,u).forEach(function(e){var t=e.handlerKey,n=co[e.ccUniqueKey];if(n&&t){if(n.__$$isUnmounted)return;var r=oo[t];if(r){if(s&&!s(n))return;var o=r.fn;n.__$$isMounted?o.apply(void 0,a):n.ctx.__$$onEvents.push({fn:o,args:a})}}})}function _o(e,t){lo(fo(e,t.module,t.ccClassKey,t.ccUniqueKey,t.identity))}function vo(e){var t=ao[e];if(t){var n=[];t.forEach(function(e){return n.push(oo[e])}),lo(n)}}function mo(e){if(e&&"object"==typeof e){var t;if(Array.isArray(e))t={name:e[0],identity:e[1]};else t=Object.assign({},e);return t}return{name:e}}var ho=Object.freeze({bindEventHandlerToCcContext:po,findEventHandlersToPerform:yo,findEventHandlersToOff:_o,offEventHandlersByCcUniqueKey:vo,getEventItem:mo});function Co(n,e,r,o){return new Proxy(e,{get:function(e,t){return Xe(n,r,t,o),e[t]},set:function(e,t,n){return e[t]=n,!0}})}var Ko=ne,go=J;function So(e){return e?e.props||e:{}}var Eo=wt.store.getState;var $o=function(e,t,n){var r=n.module,o=n.state,a=!1,c="",i="",u="",s=null,d=-1,f=!1,l=e[ve],p=e.type,y=!1;if(void 0!==l){var _,v,m;if(d=e.delay,i=e.rkey,a="int"===p,f="bool"===p,(c=l).includes("/")){var h=c.split("/");_=h[1],v=c,m=h[0]}else v=r+"/"+(_=c),m=r;var C=Eo(m);u="bool"===p?!je(m!==r?C:o,_):function(e){var t=xe(e);return t?t.currentTarget.value:e}(t);var K=e.val;if(void 0===K);else if("function"==typeof K){var g=K(u,_,{module:m,moduleState:C,fullKeyPath:v,state:o,refCtx:n});if(null!=g)if("as"===p)u=g;else{var S=typeof g;"boolean"==S?y=!g:"object"==S?(y=!0,s=g):ne("syncKey["+l+"] cb result type error.")}else"as"===p&&(y=!0)}else u=K}else{var E=xe(t);if(!E)return null;var $=E.currentTarget;u=$.value;var w=$.dataset;if(a="int"===p||void 0!==w.ccint,!(c=w.ccsync))return null;i=w.ccrkey;var b=w.ccdelay;if(b)try{d=parseInt(b)}catch(e){}}return{currentTarget:{value:u,extraState:s,noAutoExtract:y,dataset:{ccsync:c,ccint:a,ccdelay:d,ccrkey:i}},isToggleBool:f}};var wo=function(e,t,n,r,o){var a=t;!0!==n||Number.isNaN(a=parseInt(t))&&(ne(t+" can not convert to int but you set ccint as true!ÔºÅ"),a=t);var c=null,i=[];if(e.includes("/")){var u=e.split("/"),s=u[1];c=u[0],i=s.includes(".")?s.split("."):[s]}else i=e.includes(".")?e.split("."):[e];if(1===i.length){var d,f,l=i[0];return!0!==o?{module:c,state:(d={},d[l]=a,d)}:{module:c,state:(f={},f[l]=!r[l],f)}}var p,y=i[0],_=i.slice(1),v=r[y];return function e(t,n,r,o,a,c){void 0===c&&(c=!1);var i=n[o];if(r===o)if(!0===c){var u=t[i];"boolean"!=typeof u?ne("key["+i+"]'s value type is not boolean"):t[i]=!u}else t[i]=a;else e(t[i],n,r,++o,a,c)}(v,_,_.length-1,0,a,o),{module:c,state:(p={},p[y]=v,p)}},bo=wt.store.getState;function xo(e,t,n){var r=t.ctx,o=r.module,a=$o(e,n,r);if(a){var c=a.currentTarget,i=c.dataset,u=c.value,s=c.extraState,d=c.noAutoExtract;n&&n.stopPropagation&&n.stopPropagation();var f=i.ccsync,l=i.ccint,p=i.ccdelay,y=i.ccrkey;if(f.startsWith("/")&&(i.ccsync=""+o+f),f.includes("/")){var _=f.split("/")[0];Rt(_,!1);var v=r.ccKey,m=r.ccUniqueKey;if(d)return void(s&&cr(s,{calledBy:K,ccKey:v,ccUniqueKey:m,module:_,renderKey:y,delay:p},t));var h=_!==o?bo(_):t.state;cr(wo(f,u,l,h,a.isToggleBool).state,{calledBy:K,ccKey:v,ccUniqueKey:m,module:_,renderKey:y,delay:p},t)}else{if(d)return void(s&&t.setState(s,null,y,p));var C=wo(f,u,l,t.state,a.isToggleBool);t.setState(C.state,null,y,p)}}}var Uo=wt.reducer,Oo=Uo._module_fnNames_,No=Uo._caller,Do=wt.refStore,Io=wt.ccClassKey_ccClassContext_,Ao=wt.moduleName_stateKeys_,To=wt.store.getState,Mo=wt.moduleName_ccClassKeys_,Ro=pe,Wo=Y,ko=Z,jo=ce,Lo=ae,Fo=ne,Po=G,Vo=0;var zo=function(){},qo=function(e){return"type of defineEffect "+e+" param must be"},Ho=function(e){return"-"===e.watchedKeys?Ro(e.__$$renderStatus===x?e.__$$compareWaKeys:e.__$$curWaKeys):e.watchedKeys},Bo=function(t,e){function n(e){return Ro(t.__$$renderStatus===x?t.__$$compareConnWaKeys[e]:t.__$$curConnWaKeys[e])}function r(e){if(c)return n(e);var t=o[e];return"*"===t?Ao[e]:"-"===t?n(e):t}var o=t.connect,a=t.connectedModules,c=Array.isArray(o);if(e)return r(e);var i={};return a.forEach(function(e){return i[e]=r(e)}),i};function Go(t,n,e){("*"===e?Ao[n]:e).forEach(function(e){return function(e,t,n){S(m,L(e,t),n)}(n,e,t)})}function Yo(c,e,t){void 0===t&&(t=5);var n=e.isSingle,o=e.ccClassKey,r=e.ccKey,a=void 0===r?"":r,i=e.module,u=e.type,s=e.insType,d=e.state,f=e.storedKeys,l=void 0===f?[]:f,p=e.persistStoredKeys,y=void 0!==p&&p,_=e.watchedKeys,v=e.connect,m=void 0===v?{}:v,h=e.tag,C=void 0===h?"":h,K=e.ccOption,g=void 0===K?{}:K,S=i,E=c.ctx,$=Po(E),w=Ao[S],b=c.setState,x=c.forceUpdate;!$&&E.ccUniqueKey?(b=E.__boundSetState,x=E.__boundForceUpdate):u!==_e&&(b=c.setState.bind(c),x=c.forceUpdate.bind(c));var U={};U.persistStoredKeys=void 0===g.persistStoredKeys?y:g.persistStoredKeys,U.tag=g.tag||C;var O=function(e,t,n,r){var o;if(e)n&&Ko("now the ccClass is singleton, you needn't supply ccKey to instance props, cc will ignore the ccKey["+n+"]"),o=t;else if(n)o=go(t,n);else{var a=Zt(r);o=go(t,a)}return o}(n,o,a,U.tag);if(U.renderKey=g.renderKey||O,U.storedKeys=function(e,t,n,r){var o=n||r;return o?"*"===o?Object.keys(e).filter(function(e){return!t.includes(e)}):(Wt(t,o),o):[]}(d,w,g.storedKeys,l),a&&!o)throw Error("missing ccClassKey while init a cc ins with ccKey["+a+"]");if(0<U.storedKeys.length&&!a)throw Wo(Ee.CC_STORED_KEYS_NEED_CCKEY,ko("ccClassKey["+o+"]"));var N=To(i),D=Do._state[O]||{},I=Object.assign({},d,D,N),A=Ro(c.state=I),T=Io[o].connectedState,M=Ro(m),R={},W={};M.forEach(function(e){return W[e]=nt(c,e,!1)});var k,j=nt(c,i),L=nt(c,ye),F=Co(c,To(ye),ye,!1),P=De(Ro(d),w);k=S===ye?F:Co(c,N,i,!0);var V=jo(Mo,i);V.includes(o)||V.push(o);function z(e,t){cr(e,t,c)}function q(e,t,n,r,o,a){z(t,{calledBy:n,module:e,renderKey:o,delay:a,reactCallback:r})}function H(e,t,n,r,o){q(e,t,he,n,r,o)}function B(e,t,n,r,o){"string"==typeof e?H(e,t,n,r,o):q(S,e,me,t,n,r)}function G(e,t,n){q(S,c.state,Ce,e,t,n)}var Y=[],X=[],J={effectItems:Y,eid_effectReturnCb_:{},effectPropsItems:X,eid_effectPropsReturnCb_:{}},Z={},Q=So(c.props),ee={type:u,insType:s,isSingle:n,module:i,ccClassKey:o,ccKey:a,ccUniqueKey:O,renderCount:1,initTime:Date.now(),watchedKeys:_,privStateKeys:P,connect:m,connectedModules:M,__$$onEvents:[],__$$hasModuleState:0<w.length,__$$renderStatus:$e,__$$curWaKeys:{},__$$compareWaKeys:{},__$$compareWaKeyCount:0,__$$nextCompareWaKeys:{},__$$nextCompareWaKeyCount:0,__$$curConnWaKeys:{},__$$compareConnWaKeys:{},__$$compareConnWaKeyCount:{},__$$nextCompareConnWaKeys:{},__$$nextCompareConnWaKeyCount:{},__$$staticWaKeys:{},__$$staticWaKeyList:[],persistStoredKeys:U.persistStoredKeys,storedKeys:U.storedKeys,renderKey:U.renderKey,tag:U.tag,prevProps:Q,props:Q,mapped:{},prevState:I,state:I,moduleState:k,mstate:N,globalState:F,connectedState:R,extra:{},staticExtra:{},refComputed:{},refComputedValue:{},refComputedOri:{},moduleComputed:j,globalComputed:L,connectedComputed:W,moduleReducer:{},connectedReducer:{},reducer:{},stateKeys:A,computedDep:{},computedRetKeyFns:{},watchDep:{},watchRetKeyFns:{},execute:null,effectMeta:J,retKey_fnUid_:{},reactSetState:zo,__boundSetState:b,reactForceUpdate:zo,__boundForceUpdate:x,setState:B,setModuleState:H,forceUpdate:G,changeState:z,refs:Z,useRef:function(t){return function(e){return Z[t]={current:e}}},__$$ccSetState:wr(c),__$$ccForceUpdate:br(c),__$$settedList:[],__$$prevMoStateVer:{}};c.setState=B,c.forceUpdate=G,ee.initState=function(e){return c.__$$isMounted?Fo("ctx.initState can only been called before first render period!"):be(d)?(c.state=Object.assign({},d,e,D,k),void(ee.prevState=ee.state=c.state)):Fo("state "+we)};var te=Or(c,!1,!1,S);if(ee.dispatch=te,1<t&&(ee.lazyDispatch=Or(c,!0,!1,S),ee.silentDispatch=Or(c,!1,!0,S),ee.dispatchLazy=ee.lazyDispatch,ee.dispatchSilent=ee.silentDispatch,ee.invoke=xr(c),ee.lazyInvoke=xr(c,{isLazy:!0}),ee.silentInvoke=xr(c,{isLazy:!1,isSilent:!0}),ee.invokeLazy=ee.lazyInvoke,ee.invokeSilent=ee.silentInvoke,ee.setGlobalState=function(e,t,n,r){q(ye,e,me,t,n,r)}),2<t){var ne=function(e,t,n,r,o){var a;if("string"==typeof e)return xo.bind(null,((a={})[ve]=e,a.type=o,a.val=t,a.delay=r,a.rkey=n,a),c);xo({type:"val"},c,e)};ee.sync=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),ne(e,t,n,r,"val")},ee.syncBool=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),ne(e,t,n,r,"bool")},ee.syncInt=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),ne(e,t,n,r,"int")},ee.syncAs=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),ne(e,t,n,r,"as")},ee.set=function(e,t,n,r){var o;void 0===n&&(n=""),void 0===r&&(r=-1),xo(((o={})[ve]=e,o.type="val",o.val=t,o.delay=r,o.rkey=n,o),c)},ee.setBool=function(e,t,n){var r;void 0===t&&(t=""),void 0===n&&(n=-1),xo(((r={})[ve]=e,r.type="bool",r.delay=n,r.rkey=t,r),c)}}if(3<t&&(ee.emit=function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];yo.apply(ho,[mo(e)].concat(n))},ee.off=function(e,t){var n=void 0===t?{}:t,r=n.module,o=n.ccClassKey,a=n.ccUniqueKey,c=void 0===a?O:a,i=mo(e);_o(i.name,{module:r,ccClassKey:o,ccUniqueKey:c,identity:i.identity})},ee.on=function(e,t){var n=mo(e),r=n.identity;po(S,o,O,n.name,void 0===r?null:r,t)}),4<t){ee.execute=function(e){return ee.execute=e},ee.watch=function(r){return function(e,t,n){nn(Ke,{type:Se,refCtx:r,stateKeys:r.stateKeys,retKeyFns:r.watchRetKeyFns,module:r.module,connect:r.connect,dep:r.watchDep},e,t,n)}}(ee),ee.computed=function(r){return function(e,t,n){nn(Ke,{type:ge,refCtx:r,stateKeys:r.stateKeys,retKeyFns:r.computedRetKeyFns,module:r.module,connect:r.connect,dep:r.computedDep},e,t,n)}}(ee);var re=function(u,s){return function(e,t,n,r){if(void 0===n&&(n=!0),void 0===r&&(r=!0),"function"!=typeof e)throw Error(qo("first")+" function");var o=t,a=s?n:r;if(null!=t&&!Array.isArray(t))throw Error(qo("second")+" one of them(array, null, undefined)");var c=null;!s&&o&&(c=[],o.forEach(function(e){var t;if(e.includes("/")){var n=(t=e).split("/");if(!ee.connect[n[0]])throw Wo(Ee.CC_MODULE_NOT_CONNECTED,ko("depKey["+e+"]"))}else t=S+"/"+e;c.push(t),ee.__$$staticWaKeys[t]=1}));var i={fn:e,isProp:s,depKeys:o,modDepKeys:c,eId:Symbol("__autoGen_"+ ++Vo+"__"),compare:n,immediate:a};u.push(i)}};ee.effect=re(Y,!1),ee.effectProps=re(X,!0)}var oe=ee.moduleReducer,ae=ee.connectedReducer,ce=ee.__$$curConnWaKeys,ie=ee.__$$compareConnWaKeys,ue=ee.__$$compareConnWaKeyCount,se=ee.__$$nextCompareConnWaKeys,de=ee.__$$nextCompareConnWaKeyCount,fe=M.slice();fe.includes(i)?Fo("["+O+"]'s module["+i+"] is in belongTo and connect both, it will cause redundant render."):fe.push(i);var le=!1;if(fe.forEach(function(o){var e;e=o===i?oe:Lo(ae,o);var t=m[o];if(t){var n=T[o];"-"===t?(le=!0,ce[o]={},ie[o]={},ue[o]=0,se[o]={},de[o]=0,n=o===ye?ee.globalState:Co(c,n,o)):Go(O,o,t),R[o]=n}(Oo[o]||[]).forEach(function(r){e[r]=function(e,t,n){return te(o+"/"+r,e,t,n)}})}),ee.reducer=No,ee.mr=ee.moduleReducer,ee.cr=ee.connectedReducer,ee.r=ee.reducer,"-"===_?le=!0:Go(O,i,_),ee.__$$autoWatch=le,ee.getWatchedKeys=function(){return Ho(c.ctx||ee)},ee.getConnectWatchedKeys=function(e){return Bo(c.ctx||ee,e)},$)c.ctx=ee;else{var pe=c.ctx;Object.assign(c.ctx,ee,{__$$curWaKeys:pe.__$$curWaKeys,__$$compareWaKeys:pe.__$$compareWaKeys,__$$compareWaKeyCount:pe.__$$compareWaKeyCount,__$$nextCompareWaKeys:pe.__$$nextCompareWaKeys,__$$nextCompareWaKeyCount:pe.__$$nextCompareWaKeyCount,__$$curConnWaKeys:pe.__$$curConnWaKeys,__$$compareConnWaKeys:pe.__$$compareConnWaKeys,__$$compareConnWaKeyCount:pe.__$$compareConnWaKeyCount,__$$nextCompareConnWaKeys:pe.__$$nextCompareConnWaKeys,__$$nextCompareConnWaKeyCount:pe.__$$nextCompareConnWaKeyCount})}}var Xo=wt.store.getState;var Jo=pe,Zo=wt.runtimeVar;function Qo(n,e,t){var r=n.ctx;if(n.__$$isUnmounted=!1,r.__$$inBM=!(n.__$$isMounted=!1),e){if("function"!=typeof e)throw Error("type of setup must be function");var o=e(r)||{};if(!be(o))throw Error("type of setup return result must be an plain json object");(!0===t||!0===Zo.bindCtxToMethod&&!1!==t)&&Jo(o).forEach(function(e){var t=o[e];"function"==typeof t&&(o[e]=t.bind(n,r))}),r.settings=o}r.refComputedValue=un(r.computedRetKeyFns,r.refComputedOri),r.refComputed=nt(n,null,!0,!0),function(o){function e(r){r(o,c,i,i,u,!0,!0),a.forEach(function(e){var t=Xo(e),n=We(e);r(o,e,t,t,n,!0,!0)})}var t=o.ctx,n=t.hasComputedFn,r=t.hasWatchFn,a=t.connectedModules,c=t.module,i=t.state,u=We(c);n&&e(An),r&&e(In)}(n),r.__$$inBM=!1}var ea=wt.moduleName_stateKeys_,ta=wt.store,na=ta.getPrevState,ra=ta.getState,oa=ta.getStateVer,aa=function(e,t){return ne("effect: key["+e+"] is invalid, its "+t+" has not been declared in' store!")};function ca(e,t){function n(a,c,i){return function(e){var t=e.fn,n=e.eId;if(!i||!1!==e.immediate){var r=a[n];r&&r(u);var o=t(u,c);a[n]=o}}}var u=e.ctx,r=u.effectMeta,o=r.effectItems,a=r.eid_effectReturnCb_,c=r.effectPropsItems,i=r.eid_effectPropsReturnCb_,m=u.__$$prevMoStateVer,h=u.__$$settedList,C=u.module;if(t)o.forEach(n(a,!0,!0)),c.forEach(n(i,!0,!0));else{var K=u.prevState,g=e.state,S=[];o.forEach(function(e){var t=e.modDepKeys,n=e.compare,r=e.fn,o=e.eId;if(t){var a=t.length;if(0===a)return;for(var c=function(e){return e.reduce(function(t,e){var n=e.module;return e.keys.forEach(function(e){return t[n+"/"+e]=1}),t},{})}(h),i=!1,u=0;u<a;u++){var s=t[u];if(n){var d=void 0,f=void 0,l=s.split("/"),p=l[0],y=l[1];if(p!==C){var _=na(p),v=oa(p);if(m[y]===v[y])continue;if(m[y]=v[y],!_){aa(s,"module["+p+"]");continue}if(!ea[p].includes(y)){aa(s,"unmoduledKey["+y+"]");continue}d=ra(p),f=_}else d=g,f=K;if(f[y]!==d[y]){i=!0;break}}else if(c[s]){i=!0;break}}i&&S.push({fn:r,eId:o})}else S.push({fn:r,eId:o})}),S.forEach(n(a,!1,!1));var s=u.prevProps,d=u.props,f=[];c.forEach(function(e){var t=e.depKeys,n=e.fn,r=e.eId;if(t){var o=t.length;if(0===o)return;for(var a=!1,c=0;c<o;c++){var i=t[c];if(s[i]!==d[i]){a=!0;break}}a&&f.push({fn:n,eId:r})}else f.push({fn:n,eId:r})}),f.forEach(n(i,!1,!1)),h.length=0}}var ia=ne,ua=Y,sa=Z,da=ee,fa=Q,la=wt.runtimeVar,pa=wt.ccClassKey_ccClassContext_,ya=wt.ccUKey_ref_,_a={};function va(e,t,n,r){function o(){ya[e]=t,n.push(e)}!function(e){void 0===_a[e]?_a[e]=1:_a[e]+=1}(e),r?setTimeout(o,r):o()}function ma(e,t,n,r,o){var a=pa[n],c=a.ccKeys;la.isDebug&&console.log(da("register ccKey "+o+" to CC_CONTEXT"),fa());var i=wt.isHotReloadMode();if(c.includes(o)){var u=function(){throw ua(Ee.CC_CLASS_INSTANCE_KEY_DUPLICATE,sa("ccClass:"+n+",ccKey:"+o))};if(i){var s=function(e){return void 0===_a[e]?0:_a[e]}(o);if(t&&0<s)throw ua(Ee.CC_CLASS_INSTANCE_MORE_THAN_ONE,sa("ccClass:"+n));1<s&&u(),ia("\n        found ccKey["+r+"] duplicated in hot reload mode, please make sure your ccKey is unique manually,\n        "+sa("ccClassKey:"+n+" ccKey:"+r+" ccUniqueKey:"+o)+"\n      "),va(o,e,c,600)}else u()}else va(o,e,c);return a}function ha(t,e,n,r){var o=!1,a=pe(t);a.forEach(function(e){2===t[e]&&(o=!0,$(n,e,r))}),e<a.length&&(o=!0),o&&Ft(n)}function Ca(e){var t=e.ctx;if(t.__$$renderStatus=$e,t.__$$autoWatch){var n=t.connectedModules,r=t.connect,o=t.ccUniqueKey,a=t.__$$compareConnWaKeys,c=t.__$$compareConnWaKeyCount;ha(t.__$$compareWaKeys,t.__$$compareWaKeyCount,t.module,o),n.forEach(function(e){"-"===r[e]&&ha(a[e],c[e],e,o)})}}function Ka(e){Ca(e),e.__$$isMounted=!0,e.__$$isUnmounted=!1;var t=e.ctx,n=t.ccUniqueKey,r=t.__$$onEvents,o=t.__$$staticWaKeys;ma(e,t.isSingle,t.ccClassKey,t.ccKey,n);var a=pe(o);(e.ctx.__$$staticWaKeyList=a).forEach(function(e){return function(e,t){S(g,e,t)}(e,n)}),0<r.length&&(r.forEach(function(e){return e.fn.apply(void 0,e.args)}),r.length=0),ca(e,!0)}function ga(e){Ca(e),ca(e),e.ctx.prevState=e.state}var Sa=wt.ccUKey_ref_,Ea=wt.ccUKey_handlerKeys_,$a=wt.runtimeVar,wa=wt.ccClassKey_ccClassContext_,ba=wt.handlerKey_handler_;function xa(e,t){$a.isDebug&&console.log(ee(t+" unset ref"),Q("purple")),delete Sa[t];var n=wa[e].ccKeys,r=n.indexOf(t);r<0||n.splice(r,1),function(e){void 0===_a[e]?_a[e]=0:_a[e]-=1}(t);var o=Ea[t];o&&o.forEach(function(e){delete ba[e]})}var Ua=pe;function Oa(n,r){function e(e){var t=n[e];"function"==typeof t&&t(r)}Object.getOwnPropertySymbols(n).forEach(e),Ua(n).forEach(e)}function Na(e){e.__$$isUnmounted=!0;var t=e.ctx,n=t.ccUniqueKey,r=t.ccClassKey,o=t.module,a=t.__$$staticWaKeyList;if(e.__$$isMounted){var c=t.effectMeta,i=c.eid_effectPropsReturnCb_;Oa(c.eid_effectReturnCb_,t),Oa(i,t),vo(n)}t.getWatchedKeys().forEach(function(e){return $(o,e,n)});var u=t.getConnectWatchedKeys();pe(u).map(function(t){u[t].forEach(function(e){return $(t,e,n)})}),a.forEach(function(e){return function(e,t){try{delete g[e][t]}catch(e){}}(e,n)}),xa(r,n)}function Da(e){var t=e.ctx;if(t.__$$renderStatus=x,t.__$$autoWatch){t.__$$hasModuleState&&(Object.assign(e.state,t.mstate),e.state=Co(e,e.state,t.module,!0),t.state=e.state,t.__$$curWaKeys={},t.__$$compareWaKeys=t.__$$nextCompareWaKeys,t.__$$compareWaKeyCount=t.__$$nextCompareWaKeyCount,t.__$$nextCompareWaKeys={},t.__$$nextCompareWaKeyCount=0);var n=t.connect;t.connectedModules.forEach(function(e){"-"===n[e]&&(t.__$$curConnWaKeys[e]={},t.__$$compareConnWaKeys[e]=t.__$$nextCompareConnWaKeys[e],t.__$$compareConnWaKeyCount[e]=t.__$$nextCompareConnWaKeyCount[e],t.__$$nextCompareConnWaKeys[e]={},t.__$$nextCompareConnWaKeyCount[e]=0)})}}var Ia=function(e){return"CC("+e+")"},Aa=Le,Ta=Oe,Ma=ke,Ra=wt.runtimeVar,Wa=Q,ka=ee,ja=function(e){return Error("can not defined setup both in register options and class body --verbose:"+e)};function La(e,t){var n=void 0===e?{}:e,r=n.module,o=void 0===r?z:r,a=n.state,u=void 0===a?{}:a,c=n.watchedKeys,s=void 0===c?"-":c,i=n.storedKeys,d=void 0===i?[]:i,f=n.setup,l=void 0===f?null:f,p=n.persistStoredKeys,y=n.connect,_=void 0===y?{}:y,v=n.tag,m=n.lite,h=n.isPropsProxy,C=void 0!==h&&h,K=n.isSingle,g=void 0!==K&&K,S=n.renderKeyClasses,E=n.__checkStartUp,$=void 0===E||E,w=n.compareProps,b=void 0===w||w,x=n.__calledBy;void 0===t&&(t="");try{var U=no(o,t,S,A,Aa(s),d,_,$,x),O=U._module,N=U._ccClassKey,D=U._connect;return function(n){if(n.prototype&&n.prototype.$$attach)throw Error("register a cc class is prohibited!");var e=!1===C?n:I.Component,i=e.$$setup,t=function(c){function e(e,t){var n;try{n=c.call(this,e,t)||this;var r=Ma(u),o=Object.assign(n.state||{},r);n.$$attach=n.$$attach.bind(kr(n));var a=Object.assign({},e,{isSingle:g,module:O,tag:v,state:o,type:A,insType:T,watchedKeys:s,ccClassKey:N,connect:D,storedKeys:d,persistStoredKeys:p});if(Yo(kr(n),a,m),n.ctx.reactSetState=Dr(kr(n)),n.ctx.reactForceUpdate=Ir(kr(n)),l&&(n.$$setup||i))throw ja("ccUniqueKey "+n.ctx.ccUniqueKey);C||(n.$$setup&&(n.$$setup=n.$$setup.bind(kr(n))),Qo(kr(n),l||n.$$setup||i,!1))}catch(e){Cn(e)}return n}Wr(e,c);var t=e.prototype;return t.shouldComponentUpdate=function(e,t){var n=this.ctx.childRef;if(n&&n.shouldComponentUpdate)return n.shouldComponentUpdate(e,t);if(c.prototype.shouldComponentUpdate)return c.prototype.shouldComponentUpdate.call(this,e,t);var r=!!b&&Ta(this.props,e);return this.state!==t||r},t.$$attach=function(e){var t=this.ctx;if(((t.childRef=e).ctx=t).reactSetState=e.setState.bind(e),t.reactForceUpdate=e.forceUpdate.bind(e),e.setState=t.setState,e.forceUpdate=t.forceUpdate,t.__$$ccSetState=wr(e,this),t.__$$ccForceUpdate=br(e),e.state||(e.state={}),Object.assign(e.state,this.state),Da(e),e.$$setup&&(e.$$setup=e.$$setup.bind(e)),l&&(e.$$setup||i))throw ja("ccUniqueKey "+t.ccUniqueKey);Qo(e,l||e.$$setup||i,!1)},t.componentDidMount=function(){c.prototype.componentDidMount&&c.prototype.componentDidMount.call(this),Ka(this)},t.componentDidUpdate=function(e,t,n){c.prototype.componentDidUpdate&&c.prototype.componentDidUpdate.call(this,e,t,n),ga(this)},t.componentWillUnmount=function(){c.prototype.componentWillUnmount&&c.prototype.componentWillUnmount.call(this),Na(this)},t.render=function(){return this.ctx.prevProps=this.ctx.props,this.ctx.props=this.props,Ra.isDebug&&console.log(ka("@@@ render "+Ia(N)),Wa()),!1===C?(Da(this),c.prototype.render.call(this)):I.createElement(n,{ctx:this.ctx,$$attach:this.$$attach})},e}(e);return t.displayName=N===B?"CcDispatcher":Ia(N),t}}catch(e){Cn(e)}}function Fa(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return Wr(t,e),t.prototype.render=function(){return this.props.children||I.createElement("span",{style:{display:"none"}})},t}(I.Component);if(wt.refs[B]){if(!wt.isHotReloadMode())throw Error("CcDispatcher can only be initialize one time");re("hot reload mode, CC_DISPATCHER existed")}var n=e||t;return La({isSingle:!0,__checkStartUp:!1,__calledBy:"cc"},B)(n)}var Pa=be,Va=pe;function za(e,t){if(!Pa(e))throw Error(t+" "+we)}function qa(e){if(0<e.length){var o=wt.plugins;o.length=0,_n.forEach(function(e){return vn[e].length=0});var a={};e.forEach(function(e){if(o.push(e),!e.install)throw Error("a plugin must export install handler!");var t=e.install(hn),n=Error("plugin.install must return result:{name:string, options?:object}");if(!t)throw n;var r=t.name;if(!r)throw n;if(a[r])throw Error("pluginName["+r+"] duplicate");a[r]=1}),wt.pluginNameMap=a}}var Ha=function(e){var t=document.querySelector("#"+c);if(!t){(t=document.createElement("div")).id=c;var n=t.style;n.position="fixed",n.left=0,n.top=0,n.display="none",n.zIndex=-888666,document.body.appendChild(t)}r.render(I.createElement(e),t)},Ba=!1;function Ga(e,r){void 0===e&&(e=!1),at={},ct={},le(wt.event_handlers_),le(wt.ccUKey_handlerKeys_);var o=wt.ccClassKey_ccClassContext_,t=wt.ccUKey_ref_;if(Object.keys(o).forEach(function(e){var t=o[e],n=[];0<r.length&&t.ccKeys.forEach(function(e){r.includes(e)&&n.push(e)}),le(t.ccKeys,n)}),le(wt.handlerKey_handler_),le(t,[B].concat(r)),e){var n=wt.computed,a=wt.watch,c=n._computedValue,i=a._watchDep;pe(wt.store._state).forEach(function(e){e!==q&&(c[e]&&(wt.computed._computedDep[e]={retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0},dn(e,n._computedRaw[e])),i[e]&&(i[e]={retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0},yn(e,a._watchRaw[e])))})}}function Ya(){var r=wt.ccUKey_ref_,o=[],a=[];return pe(r).forEach(function(e){var t=r[e];if(t&&!0===t.__$$isMounted&&0==t.__$$isUnmounted){var n=t.ctx.insType;n===U?(o.push(e),a.push(e)):n===f&&a.push(e)}}),{ccFragKeys:o,ccNonCusKeys:a}}function Xa(){le(wt.globalStateKeys);var e=pe(wt.moduleName_isConfigured_).concat([z,q,ye,a]);le(wt.reducer._reducer,e),le(wt.store._state,e,{},!0),le(wt.computed._computedDep,e),le(wt.computed._computedValue,e),le(wt.watch._watchDep,e),le(wt.middlewares),le(wt.waKey_uKeyMap_),Ve={module:{computed:{},watch:{}},ref:{computed:{},watch:{},effect:{}}};var t=Ya(),n=t.ccFragKeys;return Ga(!1,t.ccNonCusKeys),n}function Ja(e){void 0===e&&(e=!1),wt.info.latestStartupTime=Date.now();var t=[];if(wt.isStartup){if(wt.isHotReloadMode()){if(e)return console.warn("attention: make sure [[clearContextIfHot]] been called before app rendered!"),Ba=!0,t=Xa();if(Ba)return Ba=!1,t;!function(){if(!wt.refs[B]){var e=Fa();Ha(e)}}();var n=Ya();return Ga(wt.reComputed,n.ccNonCusKeys),n.ccFragKeys}return console.warn("clear failed because of not running under hot reload mode!"),t}return Ba=!0,t}var Za=Ie,Qa=ke;function ec(e){var t=e.props,n=Za(t.register),r=n.module,o=n.renderKeyClasses,a=n.tag,c=n.lite,i=n.compareProps,u=void 0===i||i,s=n.setup,d=n.bindCtxToMethod,f=n.watchedKeys,l=void 0===f?"-":f,p=n.connect,y=void 0===p?{}:p,_=n.isSingle,v=n.storedKeys,m=void 0===v?[]:v,h=Qa(n.state),C=t.ccClassKey,K=t.ccKey,g=t.ccOption,S=void 0===g?{}:g,E=l,$=C,w=y,b=T;if(!0!==t.__$$regDumb){b=U;var x=no(r,C,o,A,Le(l),m,y,!0);E=l,$=x._ccClassKey,w=x._connect}Yo(e,{isSingle:_,ccKey:K,connect:w,state:h,module:r,type:A,insType:b,storedKeys:m,watchedKeys:E,tag:a,ccClassKey:$,ccOption:S},c),e.ctx.reactSetState=Dr(e),e.ctx.reactForceUpdate=Ir(e),e.__$$compareProps=u,Qo(e,s,d)}var tc=re,nc=Ue,rc="";function oc(e,t){var n=void 0===e?{}:e,r=n.store,o=void 0===r?{}:r,a=n.reducer,c=void 0===a?{}:a,i=n.init,u=void 0===i?null:i,s=n.computed,d=void 0===s?{}:s,f=n.watch,l=void 0===f?{}:f,p=n.moduleSingleClass,y=void 0===p?{}:p,_=void 0===t?{}:t,v=_.plugins,m=void 0===v?[]:v,h=_.middlewares,C=void 0===h?[]:h,K=_.isStrict,g=void 0!==K&&K,S=_.isDebug,E=void 0!==S&&S,$=_.errorHandler,w=void 0===$?null:$,b=_.isHot,x=_.bindCtxToMethod,U=void 0!==x&&x,O=_.objectValueCompare,N=void 0!==O&&O,D=_.computedCompare,I=void 0===D||D,A=_.watchCompare,T=void 0===A||A,M=_.watchImmediate,R=void 0!==M&&M,W=_.reComputed,k=void 0===W||W;try{throw Error()}catch(e){var j=function(e){function t(e,t){for(var n=0;n<o;n++)if(r[n].includes(e)){a=r[n+t];break}}var n=wt.info,r=e.stack.split("\n"),o=r.length,a="";function c(){return Ja(wt.isHot=!0)}t("startup",2),a||t("runConcent",0);var i=Date.now(),u=[],s=!0;if(rc)if(rc!==a){var d="invalid run api call!(it can only be called once, changing 'call run' line location in HMR will cause this error also, \n    try refresh browser to reload your app to avoid this tip)";if(i-n.latestStartupTime<1e3)throw Error(d);Re()?(u=c(),rc=a):(oe(d),s=!1)}else u=c();else rc=a,n.firstStartupTime=i,n.latestStartupTime=i;return{canStartup:s,ccFragKeys:u}}(e),L=j.ccFragKeys;if(!j.canStartup)return;try{console.log("%c window.name:"+window.name,"color:green;border:1px solid green"),tc("cc version "+wt.info.version),void 0!==b&&(wt.isHot=b),wt.reComputed=k,wt.errorHandler=w;var F=wt.runtimeVar;if(F.isStrict=g,F.isDebug=E,F.objectValueCompare=N,F.computedCompare=I,F.watchCompare=T,F.watchImmediate=R,F.bindCtxToMethod=U,!wt.refs[B]){var P=Fa();Ha(P)}!function(e){if(!Pa(e))throw Error("StartupOption.moduleSingleClass "+we);se(wt.moduleSingleClass,e)}(y),function(e){za(e,"state"),delete e[H],delete e[q],void 0===e[ye]&&(e[ye]={}),void 0===e[z]&&(e[z]={});for(var t=Va(e),n=t.length,r=0;r<n;r++){var o=t[r];Pt(o,e[o])}}(o),function(t){za(t,"reducer"),void 0===t[z]&&(t[z]={}),void 0===t[ye]&&(t[ye]={}),Va(t).forEach(function(e){return Yt(e,t[e])})}(c),function(t){za(t,"computed"),Va(t).forEach(function(e){return dn(e,t[e])})}(d),function(t){za(t,"watch"),Object.keys(t).forEach(function(e){return yn(e,t[e])})}(l),function(n){if(n){if(!Pa(n))throw Error("init "+we);Va(n).forEach(function(t){Rt(t,!1);var e=n[t];e&&Promise.resolve().then(e).then(function(e){Nr(t)(e)})}),wt.init._init=n}}(u),function(e){if(0<e.length){var t=wt.middlewares;t.length=0,e.forEach(function(e){return t.push(e)})}}(C);var V=function(e){nc("CC_CONTEXT",wt,e),nc("ccc",wt,e),nc("cccc",wt.computed._computedValue,e),nc("sss",wt.store._state,e)};window.mcc?setTimeout(function(){V(window.mcc[Te()])},1200):V(),wt.isStartup=!0,qa(m),L.forEach(function(e){var t=wt.ccUKey_ref_[e];Na(t),ec(t),Ka(t)})}catch(e){if(!w)throw e;w(e)}}}function ac(e){throw Error("[[run]]: param error, "+e+" "+we)}var cc=be,ic=pe,uc=G,sc=ke;function dc(e,t){var n=Ie(e);return delete n.__checkStartUp,delete n.__calledBy,La(n,t)}var fc=Oe,lc=I.createElement("span",{style:{display:"none"}}),pc=function(r){function e(e,t){var n;return ec(kr(n=r.call(this,e,t)||this)),n}Wr(e,r);var t=e.prototype;return t.componentDidMount=function(){Ka(this)},t.shouldComponentUpdate=function(e,t){var n=!!this.__$$compareProps&&fc(So(e),So(this.props));return this.state!==t||n},t.componentDidUpdate=function(){ga(this)},t.componentWillUnmount=function(){r.prototype.componentWillUnmount&&r.prototype.componentWillUnmount.call(this),Na(this)},t.render=function(){var e=this.props;this.ctx.prevProps=this.ctx.props,this.ctx.props=So(e);var t=e.render,n=t||e.children;if("function"==typeof n){Da(this);var r=e.register,o=void 0===r?{}:r,a=this.ctx;return!0!==e.__$$regDumb&&o.mapProps?(a.mapped=o.mapProps(a)||{},n(a.mapped)||lc):n(a)||lc}if(I.isValidElement(n))throw Error("CcFragment's children can not b a react dom ");return n},e}(I.Component);function yc(e,t){var n=Ie(e),r=n.renderKeyClasses,o=n.module,a=n.watchedKeys,c=void 0===a?"-":a,i=n.storedKeys,u=n.render,s=n.connect,d=void 0===s?{}:s,f=Le(c),l=no(o,t,r,U,f,i,d,!0),p=l._ccClassKey,y=l._connect;function _(t){return function(e){return n.props=e,function(t,e){var n=e.mapProps,r=e.props,o=void 0===r?{}:r,a={__$$regDumb:!0,props:o,ccOption:o.ccOption,ccClassKey:e.ccClassKey,render:function(e){return n?(e.mapped=n(e),I.createElement(t,e.mapped)):I.createElement(t,e)},ccKey:o.ccKey,register:e};return I.createElement(pc,a)}(t,n)}}return n.module=l._module,n.watchedKeys=c,n.ccClassKey=p,n.connect=y,u?_(u):function(e){return _(e)}}var _c=wt.ccUKey_ref_,vc=1;function mc(e,t,n){this.setState=t,this.forceUpdate=t,this.state=e,this.isFirstRendered=!0,this.props=n}function hc(e,t,n,r,o,a,c,i,u,s,d){var f=r||ke(o),l=a.bindCtxToMethod,p=a.watchedKeys,y=void 0===p?"-":p,_=a.storedKeys,v=void 0===_?[]:_,m=a.connect,h=void 0===m?{}:m,C=a.setup,K=a.lite;vc+=1;var g=no(a.module,d,a.renderKeyClasses,_e,Le(y),v,h,!0),S=g._module,E=g._ccClassKey,$=g._connect,w=e||new mc(c,i,u),b=Object.assign({},a,{module:S,watchedKeys:y,state:f,type:_e,insType:t,ccClassKey:E,connect:$,ccOption:u.ccOption});w.props=u,Yo(w,b,K),w.ctx.reactSetState=Dr(w),w.ctx.reactForceUpdate=Ir(w);var x=w.ctx;return x.props=u,x.extra=s,Qo(w,C,l),n.prevCcUKey=n.ccUKey,n.ccUKey=w.ctx.ccUniqueKey,x.useRef=function(e){var t=I.useRef(null);return x.refs[e]=t},w}function Cc(e){return e?Array.isArray(e)?e.join(","):"object"==typeof e?JSON.stringify(e):e:""}var Kc="react version is LTE 16.8",gc=function(e,t){return e.module!==t.module||Cc(e.connect)!==Cc(t.connect)};function Sc(e,t,n){var r=I.useRef({prevCcUKey:null,ccUKey:null,regOpt:e}).current,o=Ie(e),a=o.state,c=void 0===a?{}:a,i=o.props,u=void 0===i?{}:i,s=o.mapProps,d=o.layoutEffect,f=void 0!==d&&d,l=o.extra,p=void 0===l?{}:l,y=I.useState;if(!y)throw Error(Kc);function _(e){return hc(e,n,r,C,c,o,g,S,u,p,t)}var v,m=vc,h=y(m)[0]===m,C=h?ke(c):0,K=y(C),g=K[0],S=K[1];if(h||gc(r.regOpt,e))r.regOpt=e,v=_();else if(v=_c[r.ccUKey]){var E=v.ctx;E.prevProps=E.props,v.props=E.props=u,E.extra=p}else v=_();var $=v.ctx,w=f?I.useLayoutEffect:I.useEffect;if(w(function(){return function(){var e=_c[r.prevCcUKey||r.ccUKey];e&&(r.prevCcUKey=null,Na(e))}},[v]),w(function(){!function(e,t){e.__boundSetState=t,e.__boundForceUpdate=t}($,S),v.isFirstRendered?(v.isFirstRendered=!1,Ka(v)):ga(v)}),Da(v),s){var b=s($);if(!be(b))throw Error("mapProps ret "+we);$.mapped=b}return $}function Ec(e,t){return Sc(e,t,T)}function $c(){throw Error("api doc: cc.setState(module:string, state:object, renderKey:string, delayMs?:number, skipMiddleware?:boolean, throwError?:boolean)")}function wc(e){return wt.store.getState(e)}var bc=wt.store.getGlobalState,xc=wt.computed._computedValue;var Uc=wt.ccUKey_ref_,Oc=wt.ccClassKey_ccClassContext_;function Nc(){var n=[],r=wt.ccUKey_ref_;return pe(r).forEach(function(e){var t=r[e];t&&!t.__$$isUnmounted&&n.push(t)}),n}function Dc(){return"Ob view"}function Ic(e,t,n){var r=void 0===n?{}:n,o=r.state,a=r.reducer,c=r.computed,i=r.watch,u=r.init;if(!wt.isStartup)throw Error("cc is not startup yet");Mt(e),Rt(t,!1);var s=wt.moduleName_stateFn_[t];if(!s)throw Error("target module["+t+"] state must be a function when use cloneModule");var d=s();Object.assign(d,ke(o));var f=Rr(wt.reducer._reducer[t]||{},e);a&&Object.assign(f,Rr(a,e));var l=wt.computed._computedRaw[t]||{};c&&Object.assign(l,c);var p=wt.watch._watchRaw[t]||{};i&&Object.assign(p,i);var y=wt.init._init[t];u&&(y=u);var _={state:d,reducer:f,computed:l,watch:p};y&&(_.init=y),Mr(e,_)}function Ac(t,e){function r(e,t){var n=t.state,r=t.reducer,o=void 0===r?{}:r,a=t.watch,c=t.computed,i=t.init,u=t.isClassSingle;if(s.store[e])throw Error("run api error: module"+e+" duplicate");s.store[e]=sc(n),"function"==typeof n&&(wt.moduleName_stateFn_[e]=n),s.reducer[e]=o,a&&(s.watch[e]=a),c&&(s.computed[e]=c),i&&(s.init[e]=i),s.moduleSingleClass[e]=!0===u}void 0===t&&(t={}),void 0===e&&(e={}),cc(t)||ac("store"),cc(e)||ac("options");var s={store:{},reducer:{},watch:{},computed:{},init:{},moduleSingleClass:{}};ic(t).forEach(function(e){return r(e,t[e])}),Nt.forEach(function(e){var t=e.module,n=e.config;re("configure pending module["+t+"]"),r(t,n)}),Nt.length=0,uc(s.init)&&(s.init=null),oc(s,e)}function Tc(e,t){return dc({connect:e},t)}function Mc(e,t){return yc({connect:e},t)}function Rc(e,o){var a=Ie(e);function t(n){var e=a.memo,t=void 0===e||e;function r(){return function(e){a.props=e;var t=Ec(a,o);return I.createElement(n,a.mapProps?t.mapped:t)}}return delete a.memo,t&&I.memo?I.memo(r()):r()}"function"==typeof a.state&&(a.state=a.state());var n=a.render;return n?t(n):function(e){return t(e)}}function Wc(e,t,n,r,o){void 0===o&&(o=!1);try{Vt().ctx.setGlobalState(e,t,n,r)}catch(e){if(o)throw e;ne(e.message)}}function kc(e,t,n,r,o,a){void 0===r&&(r=-1),void 0===a&&(a=!1),void 0===e&&void 0===t&&$c(),"string"!=typeof e&&$c(),ur(e,t,n,r,o)}function jc(e,t,n,r){Vt().ctx.set(e,t,n,r)}function Lc(e,t){if(!e.includes("/"))throw Error("keyPath must start with module");var n=e.split("/"),r=wc(n[0]);return wo(e,t,!1,r,!1).state}function Fc(e){return Jc[e].connectedState||{}}function Pc(e){return e?xc[e]:xc}function Vc(e){if(void 0===e)throw Error("api doc: cc.emit(event:string|{name:string, identity?:string, ctx?:boolean}, ...args)");try{for(var t,n=Vt(),r=arguments.length,o=Array(1<r?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];(t=n.ctx).emit.apply(t,[e].concat(o))}catch(e){ne(e)}}function zc(e,t){try{Vt().ctx.off(e,t)}catch(e){if(t.throwError)throw e;ne(e.message)}}function qc(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(function(e){var n=[],t=Oc[e];return t&&t.ccKeys.forEach(function(e){var t=Uc[e];t&&n.push(t)}),n})(e).forEach(function(e){var t;e.__$$isUnmounted||e.ctx.execute&&(t=e.ctx).execute.apply(t,n)})}function Hc(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];Nc().forEach(function(e){var t;e.ctx.execute&&(t=e.ctx).execute.apply(t,n)})}function Bc(e,t){return Pe(e,t)}function Gc(e,t){var n=Pe(e,t);return n.lazy=!0,n}function Yc(e){return{fn:function(){return e},depKeys:[]}}function Xc(e,t){return Pe(e,t)}var Jc=wt.ccClassKey_ccClassContext_,Zc=wt.store.appendState,Qc=wt.reducer._caller,ei=I.memo(function(e){var t=e.module,n=e.connect,r=e.classKey,o=e.render,a=e.children;if(t&&n)throw Error("module, connect can not been supplied both");if(!t&&!n)throw Error("module or connect should been supplied");var c=o||a||Dc,i=t?{module:t}:{connect:n};i.lite=1;var u,s,d=function(e,t){return Sc(e,t,f)}(i,r);return s=t?(u=d.moduleState,d.moduleComputed):(u=d.connectedState,d.connectedComputed),c([u,s,{mr:d.mr,cr:d.cr,r:d.r}])}),ti=dc,ni=yc,ri=Mr,oi=wc,ai=bc,ci=Gt,ii=wt,ui=Fa,si=Nc,di=Qc,fi=Ja,li=pc,pi=ei,yi=u,_i=Zc,vi=Ec,mi={cloneModule:Ic,emit:Vc,off:zc,connect:Tc,connectDumb:Mc,register:ti,registerDumb:ni,registerHookComp:Rc,configure:ri,dispatch:ci,run:Ac,setGlobalState:Wc,setState:kc,set:jc,setValue:Lc,getGlobalState:ai,getState:oi,getComputed:Pc,getConnectedState:Fc,ccContext:ii,createDispatcher:ui,execute:qc,executeAll:Hc,getRefs:si,reducer:di,clearContextIfHot:fi,CcFragment:li,Ob:pi,cst:yi,appendState:_i,useConcent:vi,bindCcToMcc:hi,defComputed:Bc,defLazyComputed:Gc,defComputedVal:Yc,defWatch:Xc};function hi(e){if(!Ki)throw Error("current env is not multi concent ins mode");if(Ki[e])throw Error("ccNamespace["+e+"] already existed in window.mcc");!function(e){Ae=e}(e),Ue(e,mi,Ki)}function Ci(){var e=Ae?window.mcc[Ae]:window.cc;if(e&&e.ccContext&&e.ccContext.info){var t=e.ccContext.info.version,n=ii.info.version;if(t!==n)throw Error("a existed version concent "+t+" is different with current about to import concent "+n+", \n        it may caused by some of your concent-eco-module with older version concent, please reinstall them (concent-*** module)")}}var Ki=window.mcc;Ki?setTimeout(function(){if(!Te())throw Error("detect window.mcc, but user forget call bindCcToMcc in bundle entry");Ci()},1e3):(Ci(),Ue("cc",mi)),e.cloneModule=Ic,e.run=Ac,e.connect=Tc,e.connectDumb=Mc,e.register=ti,e.registerDumb=ni,e.registerHookComp=Rc,e.configure=ri,e.setGlobalState=Wc,e.setState=kc,e.set=jc,e.setValue=Lc,e.getState=oi,e.getGlobalState=ai,e.getConnectedState=Fc,e.getComputed=Pc,e.emit=Vc,e.off=zc,e.dispatch=ci,e.ccContext=ii,e.createDispatcher=ui,e.execute=qc,e.executeAll=Hc,e.getRefs=si,e.reducer=di,e.clearContextIfHot=fi,e.CcFragment=li,e.Ob=pi,e.cst=yi,e.appendState=_i,e.useConcent=vi,e.defComputed=Bc,e.defLazyComputed=Gc,e.defComputedVal=Yc,e.defWatch=Xc,e.bindCcToMcc=hi,e.default=mi,Object.defineProperty(e,"__esModule",{value:!0})});
