!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t(e.concent={},e.React)}(this,function(e,I){"use strict";I=I&&I.hasOwnProperty("default")?I.default:I;var t,n,r,R={$$default:[]},ye="$$global",q="$$default",H="$$cc",B="$$concent_void_module_624313307",o="$$CONCENT_ROUTER",A="$$CcClass",_e="$$CcHook",U="$$CcFrag",f="$$CcOb",M="$$CcCust",h="$$Cc",T="$$Dispatcher",ve=Symbol("__for_sync_param_ccsync__"),O=10,N=11,D=13,W="dispatch",me="setState",he="setModuleState",Ce="forceUpdate",w="invoke",K="sync",k="module",Ke="ref",ge="computed",Se="watch",$e={CC_MODULE_NAME_DUPLICATE:1002,CC_MODULE_NOT_FOUND:1012,CC_DISPATCH_STRING_INVALID:1013,CC_DISPATCH_PARAM_INVALID:1014,CC_MODULE_NOT_CONNECTED:1015,CC_CLASS_KEY_DUPLICATE:1100,CC_CLASS_INSTANCE_KEY_DUPLICATE:1200,CC_CLASS_INSTANCE_MORE_THAN_ONE:1205,CC_STORED_KEYS_NEED_CCKEY:1207,CC_REDUCER_NOT_A_FUNCTION:1503},a=((t={})[$e.CC_MODULE_NAME_DUPLICATE]="module name duplicate!",t[$e.CC_MODULE_NOT_FOUND]="module not found!",t[$e.CC_DISPATCH_STRING_INVALID]="when type param is string, it must be one of these format: (fnName)„ÄÅ(moduleName)/(fnName)",t[$e.CC_DISPATCH_PARAM_INVALID]="dispatch param type is invalid, it must be string or object",t[$e.CC_MODULE_NOT_CONNECTED]="module not been connected by ref",t[$e.CC_CLASS_INSTANCE_KEY_DUPLICATE]="props.ccKey duplicate",t[$e.CC_CLASS_INSTANCE_MORE_THAN_ONE]="ccClass is declared as singleton, trying new another one instance is not allowed! ",t[$e.CC_STORED_KEYS_NEED_CCKEY]="you must explicitly specify a ccKey for ccInstance when set storedKeys!",t[$e.CC_CLASS_KEY_DUPLICATE]="ccClassKey duplicate!",t[$e.CC_REDUCER_NOT_A_FUNCTION]="reducer must be a function!",t),c=Object.freeze({MODULE_GLOBAL:ye,MODULE_DEFAULT:q,MODULE_CC:H,MODULE_VOID:B,MODULE_CC_ROUTER:o,CC_CLASS:A,CC_HOOK:_e,CC_FRAGMENT:U,CC_OB:f,CC_CUSTOMIZE:M,CC_PREFIX:h,CC_DISPATCHER:T,CC_DISPATCHER_BOX:"__cc_dispatcher_container_designed_by_zzk_qq_is_624313307__",CCSYNC_KEY:ve,SIG_FN_START:O,SIG_FN_END:N,SIG_FN_QUIT:12,SIG_FN_ERR:D,SIG_MODULE_CONFIGURED:14,SIG_STATE_CHANGED:15,RENDER_NO_OP:1,RENDER_BY_KEY:2,RENDER_BY_STATE:3,FOR_ONE_INS_FIRSTLY:1,FOR_ALL_INS_OF_A_MOD:2,DISPATCH:W,SET_STATE:me,SET_MODULE_STATE:he,FORCE_UPDATE:Ce,INVOKE:w,SYNC:K,CATE_MODULE:k,CATE_REF:Ke,FN_CU:ge,FN_WATCH:Se,ERR:$e,ERR_MESSAGE:a}),i=((n={})[ye]={},n[q]={},n[H]={},n),u=((r={})[ye]={},r[q]={},r[H]={},r),s={},d={},j={_computedValueOri:u,_computedValue:i,_computedRaw:d,_computedDep:s,getRootComputedValue:function(){return i},getRootComputedDep:function(){return s},getRootComputedRaw:function(){return d}},l={},p={},C={_watchRaw:p,_watchDep:l,getRootWatchDep:function(){return l},getRootWatchRaw:function(){return p}},y={isStrict:!1,isDebug:!1,objectValueCompare:!1,computedCompare:!0,watchCompare:!0,watchImmediate:!1,bindCtxToMethod:!1},_={},v={};function m(t,n,r){try{t[n][r]=1}catch(e){var o={};o[r]=1,t[n]=o}}function L(e,t){return e+"/"+t}function g(e,t){m(_,e,t)}function S(e,t,n){!function(e,t){try{delete _[e][t]}catch(e){}}(L(e,t),n)}var $=Symbol("cuk"),E="1",Ee="2",F="function",we="is not a plain json object!",b="should be an string array or *!",x=console.error;function P(e){return null!=e&&0<de(e).length}function V(e){return!P(e)}function be(e,t){if(void 0===t&&(t=!1),!e)return!1;var n="object"==typeof e;if(n){var r=Array.isArray(e);return t?r:n&&!r}return!1}function z(e,t){var n="";n="string"==typeof e?e:a[e]||"",t&&(n+=t),n||(n="undefined message for code:"+e);var r=Error(n);return r.code=e,r}function G(e,t,n,r,o,a,c){var i;return(i={})[$]=1,i.needCompute=n,i.fn=r,i.newState=o,i.oldState=a,i.fnCtx=c,i.isLazy=e,i.result=t,i}function Y(e,t){return e+"$"+t}function X(e){return e?" --verbose-info: "+e:""}function J(e){return void 0===e&&(e="green"),"color:"+e+";border:1px solid "+e}function Z(e){return"%c"+e}var Q=function(e){return"------------ CC "+e+" ------------"};function xe(e){x(Q("WARNING")),e instanceof Error?(x(e.message),x(e.stack)):x(e)}function ee(e){console.log(Q("TIP")),console.log("%c"+e,"color:green;border:1px solid green;")}function te(e){if(x(Q("WARNING")),x(e),y.isStrict)throw e}function ne(e,t,n){void 0===n&&(n={});var r=e[t];return r||(r=e[t]=n),r}function re(e,t){return ne(e,t,[])}function oe(e,t){e.includes(t)||e.push(t)}function ae(e,t,n){oe(re(e,t),n)}function ce(t,n){Object.keys(n).forEach(function(e){t[e]=n[e]})}function ie(e,t,n){var r=e[t];r||(r=e[t]={}),ce(r,n)}function ue(e){void 0===e&&(e=52);var t=Math.random();return parseInt(t*e)}function se(n,r,o,a){if(void 0===r&&(r=[]),void 0===a&&(a=!1),Array.isArray(n)){var t=[];r.forEach(function(e){n.includes(e)&&t.push(e)}),n.length=0,t.forEach(function(e){return n.push(e)})}else Object.keys(n).forEach(function(e){if(r.includes(e));else{var t=n[e];a&&t?de(t).forEach(function(e){return delete t[e]}):o?n[e]=o:delete n[e]}})}function de(e){return Object.keys(e)}function fe(e){var t=null;return e&&(e.currentTarget&&e.type?t=e:e.nativeEvent&&e.target&&(e.currentTarget=e.target,t=e)),t}function le(t,n,e){function r(e){e?e[t]=n:window[t]=n}window?r(e):setTimeout(function(){r(e)},3e3)}function pe(e,t){for(var n in e)if(!(n in t))return!0;for(var r in t)if(e[r]!==t[r])return!0;return!1}function Ue(o,a,c){var i={},u=!1;if(a){var s=y.objectValueCompare;de(a).forEach(function(e){var t=o[e],n=a[e],r=!0;"object"!=typeof n?r=t!==n:s&&(r=t!==n),r&&(c&&(c.prevStateContainer[e]=t,c.incStateVer(e),o[e]=n),i[e]=n,u=!0)})}return u?i:null}function Oe(e,t){var n=[];return e.forEach(function(e){t.includes(e)||n.push(e)}),n}function Ne(e){return void 0===e&&(e={}),"string"==typeof e?{module:e}:Object.assign({module:q},e)}var De="";function Ie(){return De}function Ae(){var t=null;return{commit:function(e){t||(t={}),Object.assign(t,e)},clear:function(){return t=null},getFnCommittedState:function(){return t}}}function Me(){var e=!1;return!window||("previewFrame"===window.name||window.__SANDBOX_DATA__||window.BrowserFS)&&(e=!0),e}function Te(e){return{payload:null,renderKey:"",delay:-1,module:e,fnName:""}}function Re(e){void 0===e&&(e={});var t="function"==typeof e?e():e;if(!be(t))throw Error("state "+we);return t}function We(e,t){var n=t.split(".");return function e(t,n,r,o){var a=n[o];return r===o?t[a]:e(t[a],n,r,++o)}(e,n,n.length-1,0)}function ke(e){return"-"===e?"*":e}function je(e){return Array.isArray(e)||"-"===e||"*"===e}function Le(e,t,n){void 0===n&&(n=!0);var r=t||{},o={fn:e},a=je(r)?{depKeys:r}:r;return n&&function(e){if(e&&!je(e))throw Error("depKeys must an array , '*' or '-'")}(a.depKeys),Object.assign(o,a)}var Fe={module:{computed:{},watch:{}},ref:{computed:{},watch:{},effect:{}}};function Pe(e,t,n){var r=t[e];return{retKey:e,fn:r.fn,depKeys:r.depKeys,isLazy:n,sort:r.sort}}var Ve=function(e,t){return e.sort-t.sort};function ze(e,t,n,r,o,a,c,i){var u=r[o],s=[];if(!u)return{pickedFns:s,setted:[],changed:[]};var d=u.retKey_fn_,f=u.retKey_lazy_,l=u.stateKey_retKeys_,p=u.fnCount;if(e){var y=de(d),_=de(c),v=_;return"computed"===n?{pickedFns:y.map(function(e){return Pe(e,d,f[e])}).sort(Ve),setted:_,changed:v}:(y.forEach(function(e){var t=d[e];t.immediate&&s.push({retKey:e,fn:t.fn,depKeys:t.depKeys,sort:t.sort})}),s.sort(Ve),{pickedFns:s,setted:_,changed:v})}var m=function(n,r){var o=[],a=[];return de(r).forEach(function(e){var t=r[e];void 0!==t&&(a.push(e),t!==n[e]&&o.push(e))}),{changed:o,setted:a}}(a,c),h=m.setted,C=m.changed;if(0===h.length)return{pickedFns:s,setted:[],changed:[]};var K=h.join(",")+"|"+C.join(",")+"|"+o,g=Fe[t][n],S=i?ne(g,i):g,$=S[K];return $?{pickedFns:$.map(function(e){return Pe(e,d,f[e])}),setted:h,changed:C}:(function(s,o,d,f,a,l,c){if(0===o.length)return;var e=a["*"];if(e){var i=0<d.length;e.forEach(function(e){var t=f[e],n=t.fn,r=t.compare,o=t.depKeys,a=t.sort,c={retKey:e,fn:n,depKeys:o,isLazy:l[e],sort:a};r?i&&s.push(c):s.push(c)})}s.length<c&&function(){var u={},e=o.length,t=function(e){var i=o[e],t=a[i];return t?(t.forEach(function(e){if(!u[e]){var t=f[e],n=t.fn,r=t.compare,o=t.depKeys,a=t.sort,c=!0;r&&!d.includes(i)&&(c=!1),c&&(u[e]=!0,s.push({retKey:e,fn:n,depKeys:o,isLazy:l[e],sort:a}))}}),s.length===c?"break":void 0):"continue"};e:for(var n=0;n<e;n++){var r=t(n);switch(r){case"continue":continue;case"break":break e}}}();s.sort(Ve)}(s,h,C,d,l,f,p),S[K]=s.map(function(e){return e.retKey}),{pickedFns:s,setted:h,changed:C})}function qe(e,t,n){var r=t[n];return void 0!==r&&(e[n]=r,!0)}function He(t,n,e,r){void 0===n&&(n=[]),void 0===e&&(e=!1),void 0===r&&(r=!1);var o={},a=[];if(!be(t))return{partialState:e?null:o,isStateEmpty:!0,ignoredStateKeys:a};var c=!0,i=de(t);return i.length<n.length?i.forEach(function(e){n.includes(e)?qe(o,t,e)&&(c=!1):r&&a.push(e)}):(n.forEach(function(e){qe(o,t,e)&&(c=!1)}),r&&(a=Oe(i,n))),c&&e&&(o=null),{partialState:o,isStateEmpty:c,ignoredStateKeys:a}}function Be(e,n){return new Proxy(e,{get:function(e,t){return n.includes(t)||n.push(t),e[t]},set:function(){return!0}})}function Ge(e,t,n,r){var o=e.ctx;if(!0===o.__$$inBM||o.__$$renderStatus===E){var a=o.ccUniqueKey;if(r){var c=o.module;if(!R[c].includes(n))return;var i=L(c,n);if(!0===o.__$$inBM)return void(o.__$$staticWaKeys[i]=1);if("-"!==o.watchedKeys)return;var u=o.__$$curWaKeys,s=o.__$$compareWaKeys,d=o.__$$nextCompareWaKeys;g(i,a),s[n]=u[n]=1,d[n]||(d[n]=2,o.__$$nextCompareWaKeyCount++)}else{var f=L(t,n);if(!0===o.__$$inBM)return void(o.__$$staticWaKeys[f]=1);if("-"!==o.connect[t])return;var l=o.__$$curConnWaKeys,p=o.__$$compareConnWaKeys,y=o.__$$nextCompareConnWaKeys,_=o.__$$nextCompareConnWaKeyCount;g(f,a),p[t][n]=l[t][n]=1;var v=y[t];v[n]||(v[n]=2,_[t]++)}}}var Ye=Object.prototype.hasOwnProperty,Xe=j._computedValueOri,Je=j._computedValue,Ze=j._computedDep;function Qe(e,t,n,r,o){(e.retKey_stateKeys_[r]||[]).forEach(function(e){Ge(t,n,e,o)})}function et(r,o,a,c){void 0===a&&(a=!0),void 0===c&&(c=!1);var i=c?r.ctx.refComputedOri:Xe[o],u=c?r.ctx.refComputedValue:Je[o];return i?new Proxy(i,{get:function(e,t){if(Ye.call(i,t))if(c){var n=r.ctx.computedDep;Object.keys(n).forEach(function(e){Qe(n[e],r,e,t,a)})}else Qe(Ze[o],r,o,t,a);return u[t]},set:function(e,t,n){return e[t]=n,!0}}):{}}var tt,nt=function(e){return xe(e+" call commit or commitCu as it is lazy")},rt={},ot={};function at(e,t,n){return e==k?ne(rt,t):ne(ot,n)}function ct(e,t,n,r,o,a,c){if(void 0===c&&(c=!0),0!==a.length){var i,u;if(t===Ke){var s=e.computedDep,d=n===ge?s:e.watchDep;u=ne(s,r),i=ne(d,r)}else{var f=j._computedDep,l=n===ge?f:C._watchDep;u=ne(f,r),i=ne(l,r)}var p=ne(i,"stateKey_retKeys_"),y=ne(i,"retKey_stateKeys_"),_=function(e){var n=re(y,o);e.forEach(function(e){var t=re(p,e);Array.isArray(t)&&!t.includes(o)&&t.push(o),n.includes(e)||n.push(e)})};c?_(a):a.forEach(function(e){var t=ne(u,"retKey_stateKeys_");_(t[e]||[])})}}function it(e,t,n){return t===Ke?e.computedRetKeyFns:(j._computedDep[n]||{}).retKey_fn_||{}}function ut(d,$,E,w,f,e,b,l,x,U,O,N,D){void 0===d&&(d={});for(var I=d.ctx,A=I?I.ccUniqueKey:"",p=0,M=e,T=!0,y=!1,t=function(){var v=1===++p&&U,e=f(M,v),t=e.pickedFns,m=e.setted,h=e.changed;if(!t.length)return"break";var n=Ae(),C=n.commit,r=n.getFnCommittedState,o=Ae(),K=o.commit,g=o.getFnCommittedState,S=o.clear;if(t.forEach(function(e){var n=e.retKey,t=e.fn,r=e.isLazy,o=N+" "+O+" retKey["+n+"] can't",a={retKey:n,callInfo:x,isFirstCall:U,commit:C,commitCu:K,setted:m,changed:h,cuVal:D,stateModule:$,refModule:E,oldState:w,committedState:M,refCtx:I},c=v&&"-"===e.depKeys,i=[],u=[];if(c&&(a.cuVal=function(n,r,o,e,t,a){var c,i;return i=k===r?(c=Xe[e],Je[e]):(c=t.refComputedOri,t.refComputedValue),new Proxy(c,{get:function(e,t){return Ye.call(c,t)?a.push(t):xe(r+" "+o+" retKey["+n+"] get cuVal invalid retKey["+t+"]"),i[t]},set:function(){return!0}})}(n,N,O,$,I,i)),O===ge)if(r&&(a.commit=function(){return nt(o)},a.commitCu=a.commit),c){var s=Be(b,u),d=t(s,s,a);D[n]=G(!1,d),ct(I,N,ge,$,n,u),ct(I,N,ge,$,n,i,!1),function(e,t,n,r,o,a){var c=at(e,o,a),i=it(n,o,a),u=re(c,e);t.forEach(function(e){i[e].isStatic?u.push(e):re(c,e).forEach(function(e){return oe(u,e)})})}(n,i,I,0,N,$)}else if(r)D[n]=G(r,null,!0,t,b,w,a);else{var f=t(b,w,a);D[n]=G(!1,f)}else{var l=b,p=w;c&&(p=l=Be(b,u)),!1===t(l,p,a)&&(T=!1),c&&(ct(I,N,Se,$,n,u),ct(I,N,Se,$,n,i,!1))}c&&N===Ke&&u.forEach(function(e){return I.__$$staticWaKeys[L($,e)]=1});var y=g();if(y){var _=it(I,N,$);de(y).forEach(function(e){var t=_[e];t?t.isStatic?function(e,t,n,r){return re(at(t,n,r),e)}(e,N,$,A).includes(e)?xe("commitCu:"+o+" change ["+e+"], ["+n+"] referred ["+e+"]"):D[e]=G(!1,y[e]):xe("commitCu:"+o+" change ["+e+"], it must have zero dep keys"):xe("commitCu:"+o+" commit ["+e+"], it is not defined")}),S()}}),M=r()){var a=He(M,"ref"===N?I.privStateKeys:R[$],!0),c=a.partialState,i=a.ignoredStateKeys;if(i.length){var u="they are not "+(N===Ke?"private":"module")+", fn is "+N+" "+O;xe("these state keys["+i.join(",")+"] are invalid, "+u)}if(c&&((M=c)&&(Object.assign(b,M),Object.assign(l,M),y=!0),O===Se)){var s=function(e,t){return t===Ke?e.computedDep:j._computedDep}(I,N);ut(d,$,E,w,function(e,t){return ze(t,N,ge,s,$,w,e,A)},c,b,l,x,!1,ge,N,D)}}2<p&&(xe("fnCtx.commit may goes endless loop, please check your code"),M=null)};M;){if("break"===t())break}return{shouldCurrentRefUpdate:T,hasDelta:y}}for(var st=j._computedValue,dt=de,ft=Ue,lt={},pt=function(){return wt.permanentDispatcher},yt=function(n,e,t){var r=void 0===t?{}:t,o=r.ref,a=void 0===o?null:o,c=r.callInfo,i=void 0===c?{}:c,u=r.noSave,s=void 0!==u&&u,d=vt(n),f=st[n],l=j.getRootComputedDep(),p=C.getRootWatchDep(),y=a||pt(),_=y.module,v=Object.assign({},d,e),m=Object.assign({},e),h=m;return ut(y,n,_,d,function(e,t){return ze(t,k,"computed",l,n,d,e)},h,v,m,i,!1,"computed",k,f),ut(y,n,_,d,function(e,t){return ze(t,k,"watch",p,n,d,e)},h,v,m,i,!1,"watch",k,f),s||_t(n,m),m},_t=function(t,e,n){void 0===n&&(n=!1);var r=e;n&&(r=He(e,R[t],!0).partialState);var o=vt(t),a=mt(t);return ht(t),ft(o,r,{prevStateContainer:a,incStateVer:function(e){return Ct(t,e)}})},vt=function(e){return gt[e]},mt=function(e){return St[e]},ht=function(t){try{Et[t]++}catch(e){Et[t]=1}},Ct=function(e,t){$t[e][t]++},Kt=function(){var e;return(e={})[H]={},e[B]={},e[ye]={},e[q]={},e},gt=Kt(),St=Kt(),$t={},Et={},wt={getDispatcher:pt,isHotReloadMode:function(){return!!wt.isHot||window&&(window.webpackHotUpdate||Me())},runtimeVar:y,isHot:!1,reComputed:!0,isStartup:!1,moduleSingleClass:{},moduleName_stateFn_:{},moduleName_ccClassKeys_:{},moduleName_stateKeys_:R,moduleName_isConfigured_:{},ccClassKey_ccClassContext_:{},globalStateKeys:[],store:{appendState:function(e,t){var n=re(R,e);dt(t).forEach(function(e){n.includes(e)||n.push(e)}),wt.store.setState(e,t)},_state:gt,_prevState:St,_stateVer:$t,getState:function(e){return e?vt(e):gt},getPrevState:function(e){return e?mt(e):St},getStateVer:function(e){return e?$t[e]:$t},getModuleVer:function(e){return e?Et[e]:Et},setState:function(e,t,n){return yt(e,t,n)},setGlobalState:function(e){return yt(ye,e)},saveSharedState:_t,getGlobalState:function(){return gt[ye]}},reducer:{_reducer:(tt={},tt[ye]={},tt[H]={},tt),_caller:{},_fnName_fullFnNames_:{},_module_fnNames_:{}},computed:j,watch:C,refStore:{_state:{},setState:function(e,t){var n=wt.refStore._state,r=Object.assign({},n[e],t);n[e]=r}},init:{_init:{}},ccUKey_ref_:lt,event_handlers_:{},ccUKey_handlerKeys_:{},handlerKey_handler_:{},waKey_uKeyMap_:_,waKey_staticUKeyMap_:v,refs:lt,info:{packageLoadTime:Date.now(),firstStartupTime:"",latestStartupTime:"",version:"2.5.1",author:"fantasticsoul",emails:["624313307@qq.com","zhongzhengkai@gmail.com"],tag:"yuna"},featureStr_classKey_:{},userClassKey_featureStr_:{},errorHandler:null,middlewares:[],plugins:[],pluginNameMap:{},permanentDispatcher:null},bt=localStorage.length,xt=wt.refStore._state,Ut=0;Ut<bt;Ut++){var Ot=localStorage.key(Ut);if(Ot.startsWith("CCSS_"))try{xt[Ot.substr(5)]=JSON.parse(localStorage.getItem(Ot))}catch(e){console.error(e)}}var Nt=[],Dt=function(e){return e.toLowerCase()===H},It=function(e){return/^[\$\#\&a-zA-Z0-9_-]+$/.test(e)},At=X,Mt=z;function Tt(e){if(!It(e))throw Error("module["+e+"] writing is invalid!");if(Dt(e))throw Error("'$$cc' is a built-in module name for concent")}function Rt(e,t,n){void 0===t&&(t=!0),void 0===n&&(n="");var r=n||"module["+e+"]",o=wt.store._state;if(Tt(e),e!==ye)if(t){if(P(o[e]))throw Mt($e.CC_MODULE_NAME_DUPLICATE,At(r))}else if(!o[e])throw Mt($e.CC_MODULE_NOT_FOUND,At(r))}function Wt(t,e){var n=Array.isArray(e);if(!n&&"*"!==e)throw Error("storedKeys type err, "+b);n&&e.forEach(function(e){if(t.includes(e))throw Error("the item["+e+"] of storedKeys is not a module state key!")})}var kt={},jt=function(e,t,n){if(e.code!==$e.CC_MODULE_NAME_DUPLICATE||!wt.isHotReloadMode())throw e;var r=function(e){e||(e="");for(var t=e.split("\n"),n=t.length,o="",a=0;a<n;a++)if(t[a].includes(".checkModuleNameAndState")){!function(){var e=t[a+3].split(":"),n=e.length-1,r=[];e.forEach(function(e,t){t!==n&&r.push(e)}),o=r.join(":")}();break}return o}(e.stack),o=n+"|--link--|"+t,a=kt[o];if(a){if(r!==a)throw e}else kt[o]=r},Lt={};function Ft(e){Lt[e]={}}function Pt(t,e,n){void 0===n&&(n=!0),Ft(t);var r=t===B?{}:e;try{!function(e,t,n){if(Rt(e,n),!be(t))throw Error("module["+e+"]'s state "+we)}(t,r,n)}catch(e){jt(e,t,"state")}var o=wt.store,a=o.getState(),c=o.getStateVer(),i=o.getModuleVer(),u=o.getPrevState();ie(a,t,r),ie(u,t,r),c[t]=de(r).reduce(function(e,t){return e[t]=1,e},{}),i[t]=1;var s=wt.computed;ne(s._computedDep,t,{retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0}),ne(s._computedValue,t),ne(s._computedValueOri,t);var d=Object.keys(r);if(wt.moduleName_stateKeys_[t]=d,t===ye){var f=wt.globalStateKeys;d.forEach(function(e){f.includes(e)||f.push(e)})}}function Vt(e,t){void 0===t&&(t=!1);var n=wt.ccUKey_ref_,r=wt.moduleName_ccClassKeys_,o=wt.ccClassKey_ccClassContext_,a=[];if(e){if(!wt.store._state[e])throw Error("module["+e+"] is not declared in store");var c=r[e];if(c&&0!==c.length){var i=c[0],u=o[i];if(!u)throw Error("no ccClassContext found for ccClassKey "+i+"!");a=u.ccKeys}if(e===q&&(a=a.filter(function(e){return!e.startsWith(U)})),0===a.length&&t){throw Error("[[pickOneRef]]: no ref found for module["+e+"]!,if this message doesn't matter, you can ignore it")}}var s=n[a[0]];return s||(s=wt.permanentDispatcher),s}var zt=Y,qt=xe,Ht=function(){return Promise.resolve()};function Bt(e,t,n,r,o){void 0===n&&(n="");var a=void 0===o?{}:o,c=a.ccClassKey,i=a.ccKey,u=a.throwError,s=a.refModule,d=void 0===s?"":s;if(void 0===e&&void 0===t)throw Error("params type error");var f,l="",p="";try{if(c&&i){var y=zt(c,i),_=wt.refs[y];if(!_)return qt("no ref found for ccUniqueKey:"+y+"!"),Ht();f=_.ctx.dispatch}else{if("string"==typeof e)if(e.includes("/")){var v=e.split("/");l=v[0],p=v[1]}else p=e;var m;if(!(m=l&&"*"!==l?Vt(l):d?Vt(d):Vt()))return qt("no ref found"),Ht();f=m.ctx.dispatch}if("*"!==l)return f(e,t,n,r);var h=wt.reducer._fnName_fullFnNames_[p];if(!h)return;var C=[];return h.forEach(function(e){C.push(f(e,t,n,r))}),Promise.all(C)}catch(e){if(u)throw e;return qt(e.message),Ht()}}function Gt(e,t,n,r,o){return Bt(e,t,n,r,o)}function Yt(a,e){void 0===e&&(e={});var t="module["+a+"] reducer";if(!be(e))throw Error(t+" "+we);Rt(a,!1,t+" is invalid");var n=wt.reducer,r=n._reducer,o=n._caller,c=n._fnName_fullFnNames_,i=n._module_fnNames_,u=Object.assign({},e);r[a]=u;var s=ne(o,a),d=re(i,a);u.setState||(u.setState=function(e){return e}),de(u).forEach(function(e){d.includes(e)||d.push(e);var r=a+"/"+e,t=re(c,e);t.includes(r)||t.push(r),s[e]=function(e,t,n){return Gt(r,e,t,n)};var o=u[e];if("function"!=typeof o)throw Error("reducer key["+e+"] 's value is not a function");var n=o;o.__fnName&&(u[e]=n=function(e,t,n){return o(e,t,n)}),n.__fnName=e,n.__stateModule=a,n.__ctName=o.__ctName||o.constructor.name})}var Xt=0,Jt=["a","A","b","B","c","C","d","D","e","E","f","F","g","G","h","H","i","I","j","J","k","K","l","L","m","M","n","N","o","O","p","P","q","Q","r","R","s","S","t","T","u","U","v","V","w","W","x","X","y","Y","z","Z"];function Zt(e){return Xt++,(e||function(e){void 0===e&&(e=6);for(var t="",n=0;n<e;n++)t+=Jt[ue()];return t}())+"_"+Xt}var Qt=wt.moduleName_stateKeys_,en=wt.runtimeVar,tn=1;function nn(e,t,n,r,o){var a=t.refCtx,c=t.type;if(e!==Ke||a.__$$inBM){if(n){var i,u,s,d=typeof n;if("string"==d)be(r)?((u={})[n]=r,i=u):typeof r===F&&((s={})[n]=Le(r,o),i=s);else if(be(n))i=n;else if(d===F&&!be(i=n(a)))throw Error("type of "+c+" callback result must be an object");i?function(U,O,N){var e=en.computedCompare,t=en.watchCompare,D=en.watchImmediate,I=O.type===ge?e:t,A=O.module;de(N).forEach(function(c){var e=N[c],t=typeof e,n=e;if(t===F&&(n={fn:e}),be(n)){var r=n,o=r.fn,a=r.immediate,i=void 0===a?D:a,u=r.compare,s=void 0===u?I:u,d=r.lazy,f=r.retKeyDep,l=void 0===f||f,p=n.depKeys||"-",y=n.sort||tn++,_=Zt("mark");if("*"===p||"-"===p){var v="-"===p&&l,m=cn(O,A,c,v),h=m.pureKey,C=m.module;rn(U,O,_,h),an(U,O,C,h,o,p,i,s,d,y)}else if(0===p.length){var K=cn(O,A,c),g=K.pureKey,S=K.module;rn(U,O,_,g),an(U,O,S,g,o,p,i,s,d,y)}else{var $=cn(O,A,c),E=$.pureKey,w=$.moduleOfKey,b=w;rn(U,O,_,E);var x={};p.forEach(function(e){var t=cn(O,A,e),n=t.isStateKey,r=t.pureKey,o=t.module;if(b&&o!==b)throw Error("including slash both in retKey["+c+"] and depKey["+e+"] founded, but their module is different");var a=re(x,o);if(!n)throw Error("depKey["+e+"] invalid, module["+o+"] doesn't include its stateKey["+r+"]");on(O,o,r),a.push(r)}),de(x).forEach(function(e){an(U,O,e,E,o,x[e],i,s,d,y)})}}else xe("retKey["+c+"] item type error")})}(e,t,i):xe(e+" "+c+" param type error")}}else xe(e+" "+c+" must been called in setup block")}function rn(e,t,n,r){if(e===Ke){var o=t.refCtx,a=o.retKey_fnUid_,c=t.type,i=c+"_"+r;if(a[i])throw Error("ccUKey["+o.ccUniqueKey+"], retKey["+r+"] duplicate in ref "+c);a[i]=n}}function on(e,t,n){var r=e.refCtx;r&&(r.__$$staticWaKeys[L(t,n)]=1)}function an(e,t,n,r,o,a,c,i,u,s){var d=ne(t.dep,n,{retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0}),f=d.retKey_fn_,l=d.stateKey_retKeys_,p=d.retKey_lazy_,y=d.retKey_stateKeys_,_=Array.isArray(a)&&0===a.length,v=s;_?v<0||(v=-1):s<0&&(v=0);var m={fn:o,immediate:c,compare:i,depKeys:a,sort:v,isStatic:_};f[r]?e!==Ke&&(f[r]=m,p[r]=u):(f[r]=m,p[r]=u,d.fnCount++),e===Ke&&(t.retKeyFns[r]=f[r]);var h=t.refCtx;if(h&&("computed"===t.type?h.hasComputedFn=!0:h.hasWatchFn=!0),"-"!==a){var C="*"===a?["*"]:a;"*"===a&&(y[r]=Qt[n]),C.forEach(function(e){ae(l,e,r)})}}function cn(e,t,n,r){void 0===r&&(r=!1);var o,a=t,c=n,i="";if(n.includes("/")){var u=n.split("/"),s=u[0];s&&(a=i=s),c=u[1]}var d=Qt[a];if(a===e.module)o=e.stateKeys;else{if(!(o=d))throw z($e.CC_MODULE_NOT_FOUND,X("module["+a+"]"));if(!e.connect[a])throw z($e.CC_MODULE_NOT_CONNECTED,X("module["+a+"], retKey["+c+"]"))}var f=o.includes(c);return r&&f&&function(e,t,n,r){var o=ne(e.dep,t,{retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0}),a=o.retKey_stateKeys_;ae(o.stateKey_retKeys_,n,n),ae(a,n,n),r&&on(e,t,n)}(e,a,c,d.includes(c)),{isStateKey:f,pureKey:c,module:a,moduleOfKey:i}}function un(e,o){var t={};return de(e).forEach(function(r){o[r]=G(),Object.defineProperty(t,r,{get:function(){var e=o[r]||{},t=e.isLazy;if(!t)return e.result;if(t&&e.needCompute){var n=(0,e.fn)(e.newState,e.oldState,e.fnCtx);e.result=n,e.needCompute=!1}return e.result},set:function(e){var t=o[r];e[$]?e.isLazy?(t.isLazy=!0,t.needCompute=!0,t.newState=e.newState,t.oldState=e.oldState,t.fn=e.fn,t.fnCtx=e.fnCtx):(t.isLazy=!1,t.result=e.result):xe("computed value can not been changed manually")}})}),t}var sn=be;function dn(n,e){if(e){var t="module["+n+"] computed";if(!sn(e))throw Error(t+" "+we);Rt(n,!1,t+" is invalid");var r=wt.computed,o=wt.store.getState(),a=r.getRootComputedValue(),c=r.getRootComputedDep();r.getRootComputedRaw()[n]=e;var i=o[n];nn(k,{type:ge,module:n,stateKeys:de(i),dep:c},e);var u=wt.getDispatcher(),s=Object.assign({},i);a[n]=un(e,r._computedValueOri[n]);var d=a[n];ut(u,n,u&&u.ctx.module,i,function(e,t){return ze(t,k,"computed",c,n,i,e)},i,i,s,Te(n),!0,"computed",k,d)}}var fn=be,ln=ne,pn=de;function yn(n,e,t){if(void 0===t&&(t=!1),e){var r="module["+n+"] watch";if(!fn(e))throw Error(r+" "+we);Rt(n,!1,r+" is invalid");var o=wt.watch.getRootWatchDep(),a=wt.watch.getRootWatchRaw(),c=wt.computed.getRootComputedValue();if(t){var i=a[n];i?Object.assign(i,e):a[n]=e}else a[n]=e;var u=(0,wt.store.getState)(n);nn(k,{module:n,stateKeys:pn(u),dep:o},e);var s=wt.getDispatcher(),d=Object.assign({},u),f=ln(c,n);ut(s,n,s&&s.ctx.module,u,function(e,t){return ze(t,k,"watch",o,n,u,e)},u,u,d,Te(n),!0,"watch",k,f)}}var _n=[O,N,12,D,14,15],vn={};function mn(t,n){vn[t].forEach(function(e){return e({sig:t,payload:n})})}function hn(e,t){!function(n,e,t){function r(e,t){t?n[e].push(t):console.warn("invalid sig["+e+"]")}Array.isArray(e)?e.forEach(function(e){r(e,t)}):r(e,t)}(vn,e,t)}_n.forEach(function(e){return vn[e]=[]});var Cn=function(e){if(!wt.errorHandler)throw e;wt.errorHandler(e)},Kn=0,gn={},Sn={},$n={},En={};function wn(){return++Kn}function bn(e,t,n,r){if(n){var o=r[e];o||(o=r[e]={});var a=o[t];a?Object.assign(a,n):o[t]=n}}function xn(e,t,n){bn(e,t,n,gn)}function Un(e,t,n){return xn(e,t,n),function(e){var t=function(e){return gn[e]}(e),n=[];return de(t).forEach(function(e){n.push({module:e,state:t[e]})}),n}(e)}function On(e){delete gn[e]}var Nn={},Dn=function(e,t,n){void 0===n&&(n=1e3);var r=Nn[t];r&&clearTimeout(r),Nn[t]=setTimeout(function(){delete Nn[t],e()},n)};function In(e,n,r,t,o,a){var c=e.ctx;if(!c.hasWatchFn)return{shouldCurrentRefUpdate:!0};var i=Object.assign({},t),u=c.watchDep,s=c.module,d=c.ccUniqueKey,f=c.refComputed;n!==s&&(f=c.connectedComputed[n]);var l=Object.assign({},r,t);return ut(e,n,s,r,function(e,t){return ze(t,Ke,Se,u,n,r,e,d)},t,l,i,o,a,Se,Ke,f)}function An(e,n,r,t,o,a,c){void 0===a&&(a=!1),void 0===c&&(c=!1);var i=e.ctx,u=Object.assign({},t);if(!i.hasComputedFn)return u;var s=i.computedDep,d=i.module,f=i.ccUniqueKey,l=i.refComputed;n!==d&&(l=i.connectedComputed[n]);var p=Object.assign({},r,t);return ut(e,n,d,r,function(e,t){return ze(t,Ke,"computed",s,n,r,e,f)},t,p,u,o,a,"computed",Ke,l),c&&Object.assign(t,u),u}var Mn=de,Tn=wt.ccUKey_ref_,Rn=wt.waKey_uKeyMap_,Wn=wt.waKey_staticUKeyMap_;function kn(o,e,c,i){var t=Mn(e),n=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=[]),e+"/"+t.sort().join(",")+"/"+n+"/"+("*"===r?"*":r.sort().join(","))}(o,t,c,i),r=function(e,t){return Lt[e][t]}(o,n);if(r)return{sharedStateKeys:t,result:r};var a={},u=[],s=[];t.forEach(function(e){var t=o+"/"+e;Object.assign(a,Rn[t],Wn[t])});function d(e,t){e?u.push(t):s.push(t)}function f(e,t){var n=e.ctx,r=n.ccClassKey,o=n.ccUniqueKey;if(c){var a=n.renderKey===c;"*"===i?a&&d(t,o):i.includes(r)?a&&d(t,o):d(t,o)}else d(t,o)}var l=Mn(a),p=!1;l.forEach(function(e){var t=Tn[e];if(t){var n=t.ctx,r=!!n.connect[o];n.module===o&&f(t,!0),r&&f(t,!1)}else p=!0});var y={belong:u,connect:s};return p||function(e,t,n){Lt[e][t]=n}(o,n,y),{sharedStateKeys:t,result:y}}var jn=be,Ln=xe,Fn=V,Pn=function(e,t){return e+"/"+Object.keys(t).sort().join("|")},Vn=de,zn=1,qn=2,Hn=Ce,Bn=me,Gn=15,Yn=1,Xn=2,Jn=3,Zn=wt.store,Qn=Zn.setState,er=Zn.getPrevState,tr=Zn.saveSharedState,nr=wt.middlewares,rr=wt.ccClassKey_ccClassContext_,or=wt.refStore,ar=wt.moduleName_stateKeys_;function cr(e,t,a){var n=void 0===t?{}:t,c=n.module,r=n.skipMiddleware,i=void 0!==r&&r,u=n.payload,s=n.stateChangedCb,o=n.reactCallback,d=n.type,f=n.calledBy,l=void 0===f?Bn:f,p=n.fnName,y=void 0===p?"":p,_=n.renderKey,v=void 0===_?"":_,m=n.delay,h=void 0===m?-1:m;if(void 0!==e)if(jn(e)){var C=a.ctx,K=C.module,g=C.ccUniqueKey,S=C.ccKey,$=function(e,t){return e===t?zn:qn}(c,K),E={payload:u,renderKey:v,ccKey:S,module:c,fnName:y},w=function(e,t,n){var r=He(t,ar[e],!0).partialState;if(r)return Qn(e,r,n);return r}(c,e,{ref:a,callInfo:E,noSave:!0});Object.assign(e,w),ir(a,E,v,l,e,$,o,!0,function(t,n,r){var o={calledBy:l,type:d,payload:u,renderKey:v,delay:h,ccKey:S,ccUniqueKey:g,committedState:n,refModule:K,module:c,fnName:y,sharedState:w||{},modState:function(e,t){o.committedState[e]=t,o.sharedState[e]=t}};!function(e,n,r){if(!0!==e){var o=nr.length;if(0<o){var a=0;!function e(){if(a===o)r();else{var t=nr[a];a++,"function"==typeof t?t(n,e):(Ln("found one middleware is not a function"),e())}}()}else r()}else r()}(i,o,function(){var e=tr(c,o.sharedState,!0);r&&r(),t===Yn&&!e||mn(Gn,{calledBy:l,type:d,committedState:n,sharedState:e,module:c,ccUniqueKey:g,renderKey:v}),s&&s(),e&&function(e,t,n,r,o,a,c){var i=function(){!function(c,e,i,t,u,n){if(!i)return;var s=wt.ccUKey_ref_,r=e.ctx,o=r.ccUniqueKey,a=t===zn,d=kn(u,i,n,rr[r.ccClassKey].renderKeyClasses),f=d.sharedStateKeys,l=d.result,p=l.connect;l.belong.forEach(function(e){var t=s[e];if(t){var n=t.ctx.ccUniqueKey;a&&n===o||ir(t,c,null,"broadcastState",i,zn)}});var y=er(u);p.forEach(function(e){var t=s[e];if(t&&!0!==t.__$$isUnmounted){var n=t.ctx,r=An(t,u,y,i,c),o=In(t,u,y,r,c),a=o.shouldCurrentRefUpdate;a&&(n.__$$settedList.push({module:u,keys:f}),n.__$$ccForceUpdate())}})}(e,t,n,r,o,a)};if(0<c){var u=Pn(t.ctx.ccUniqueKey,n);Dn(i,u,c)}else i()}(E,a,e,$,c,v,h)})})}else Ln("your committed state "+we)}function ir(e,t,n,r,o,a,c,i,u){void 0===i&&(i=!1);var s=e.state,d=e.ctx;if(!0===e.__$$isUnmounted||a!==zn||r!==Hn&&Fn(o))return u&&u(Yn,o);var f=d.module,l=d.storedKeys,p=d.ccUniqueKey,y=Jn;if(n&&(y=Xn,d.renderKey!==n))return u&&u(Yn,o);if(0<l.length){var _=He(o,l),v=_.partialState;if(!_.isStateEmpty){if(!0===d.persistStoredKeys){var m=He(s,l),h=Object.assign({},m.partialState,v);localStorage.setItem("CCSS_"+p,JSON.stringify(h))}or.setState(p,v)}}function C(){var e=i?Ue(d.state,K):K;e&&(d.__$$settedList.push({module:f,keys:Vn(e)}),d.__$$ccSetState(e,c,g))}var K=An(e,f,s,o,t),g=In(e,f,s,K,t,!1).shouldCurrentRefUpdate;u?u(y,K,C):C()}function ur(e,t){try{Vt(t.module).ctx.changeState(e,t)}catch(e){te(e)}}var sr=xe,dr=be,fr=de,lr=wt.store,pr=lr.getState,yr=lr.setState,_r=wt.reducer._reducer,vr=wt.computed._computedValue,mr=z,hr=X;function Cr(e,t){void 0===t&&(t=!0);try{return Rt(e,!1,"module["+e+"] is not configured in store"),!0}catch(e){return function(e,t){if(void 0===t&&(t=!0),t)throw e;Sr(e)}(e,t),!1}}function Kr(o,a){return function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e?a(e):o.apply(void 0,n)}}function gr(e,t,n,r){var o;return!0===e?(function(e){$n[e]=!0}(o=wn()),r[o]=1):r[o=t||wn()]||(r[o]=1),{_chainId:o,_oriChainId:n||o}}function Sr(e,t){e&&(t?t(e):(sr(e),wt.errorHandler&&wt.errorHandler(e)))}function $r(e,t,n){return function(r,o,a,c){return new Promise(function(e,t){var n=Object.assign(a,{__innerCb:Kr(e,t)});r(o,n,c)}).catch(Cn)}(Ur,e,t,n)}function Er(e,t,n){return $r(e,{callerRef:t.callerRef,context:!0,module:t.module,calledBy:t.calledBy,fnName:e.name,delay:t.delay,renderKey:t.renderKey,chainId:t.chainId,oriChainId:t.oriChainId,chainId_depth_:t.chainId_depth_,isSilent:t.isSilent},n)}function wr(a,c){return function(e,t,n){var r=a.ctx;if(c){var o=Object.assign({},r.state,e);c.state=o}n?(r.renderCount+=1,r.reactSetState(e,t)):(Object.assign(a.state,e),r.state=a.state)}}function br(n){return function(e){var t=n.ctx;t.renderCount+=1,t.reactForceUpdate(e)}}function xr(h,e){var t=void 0===e?{}:e,C=t.chainId,K=t.oriChainId,g=t.isLazy,n=t.delay,S=void 0===n?-1:n,r=t.isSilent,$=void 0!==r&&r,o=t.chainId_depth_,E=void 0===o?{}:o;return function(e,t,n,r){var o=g,a=$,c="",i=null!=r?r:S;if(dr(n)){var u=n.lazy,s=n.silent,d=n.renderKey,f=n.delay;void 0!==u&&(o=u),void 0!==s&&(a=s),void 0!==d&&(c=d),void 0!==f&&(i=f)}else c=n;var l,p,y=gr(o,C,K,E),_=typeof e,v={callerRef:h,calledBy:w,module:h.ctx.module,isSilent:a,chainId:y._chainId,oriChainId:y._oriChainId,chainId_depth_:E,delay:i,renderKey:c},m=Error("param type error, correct usage: invoke(userFn:function, ...args:any[]) or invoke(option:[module:string, fn:function], ...args:any[])");if("function"==_)return e.__fnName&&(e.name=e.__fnName),Er(e,v,t);if("object"!=_)throw m;if(p=Array.isArray(e)?(l=e[1],e[0]):(l=e.fn,e.module),"function"!=typeof l)throw m;return p&&(v.module=p),Er(l,v,t)}}function Ur(l,e,p){var y=e.callerRef,_=y.ctx.module,t=e.module,v=void 0===t?_:t,n=e.context,m=void 0!==n&&n,h=e.__innerCb,C=e.type,K=e.calledBy,g=e.fnName,r=e.delay,S=void 0===r?-1:r,$=e.renderKey,E=e.chainId,w=e.oriChainId,b=e.chainId_depth_,x=e.isSilent;!function(e,t,n,r){var o=n;Cr(e,!1)?(e!==t&&n&&(sr(function(e,t){return"param module["+e+"] must equal current ref's module["+t+"] when pass param reactCallback, or it will never been triggered! "}(e,t)),o=null),r(null,o)):r(Error("inputModule:"+e+" invalid"),null)}(v,_,e.cb,function(e,r){if(e)return Sr(e,h);var o,t=pr(v),n={};if(o=E===w&&1===b[E],m){b[E]=b[E]+1;var a=Or(y,!1,x,v,$,S,E,w,b),c=Or(y,!1,!0,v,$,S,E,w,b),i=Or(y,!0,x,v,$,S,E,w,b),u=xr(y,{delay:S,chainId:E,oriChainId:w,chainId_depth_:b}),s=xr(y,{isLazy:!0,delay:S,oriChainId:w,chainId_depth_:b}),d=xr(y,{isLazy:!1,delay:S,isSilent:!0,oriChainId:w,chainId_depth_:b}),f=function(e){return En[e]}(E)||{};n={module:v,callerModule:_,committedStateMap:f,committedState:f[v]||{},invoke:u,lazyInvoke:s,silentInvoke:d,invokeLazy:s,invokeSilent:d,dispatch:a,lazyDispatch:i,silentDispatch:c,dispatchLazy:i,dispatchSilent:c,rootState:pr(),globalState:pr(ye),moduleState:t,moduleComputed:vr[v]||{},setState:function(e){return a("setState",e,{silent:x,renderKey:$,delay:S})},refCtx:y.ctx}}!1===x&&mn(O,{isSourceCall:o,calledBy:K,module:v,chainId:E,fn:l}),new Promise(function(e){return e(l(p,t,n))}).then(function(e){b[E]=b[E]-1;var t=1===b[E];!function(e,t,n){bn(e,t,n,En)}(E,v,e);var n=[];!1===x&&(mn(N,{isSourceCall:o,calledBy:K,module:v,chainId:E,fn:l}),!function(e){return!0===$n[e]}(E)?n=[{module:v,state:e}]:t?function(e){return!0===Sn[e]}(E)||(n=Un(E,v,e),On(E)):xn(E,v,e)),n.forEach(function(e){e.state&&cr(e.state,{renderKey:$,module:e.module,reactCallback:r,type:C,calledBy:K,fnName:g,delay:S,payload:p},y)}),o&&(On(E),function(e){delete En[e]}(E)),h&&h(null,e)}).catch(function(e){mn(D,{isSourceCall:o,calledBy:K,module:v,chainId:E,fn:l}),Sr(e,h)})})}function Or(b,x,U,O,N,D,I,A,M){return void 0===N&&(N=""),void 0===D&&(D=-1),void 0===M&&(M={}),function(e,n,t,r){void 0===e&&(e={});var o=x,a=U,c="",i=r||D;if(dr(t)){c=N;var u=t.lazy,s=t.silent,d=t.renderKey,f=t.delay;void 0!==u&&(o=u),void 0!==s&&(a=s),void 0!==d&&(c=d),void 0!==f&&(i=f)}else c=t||N;function l(){return xr(b,{chainId:v,oriChainId:m,isLazy:o,chainId_depth_:M})(e,n,c,i)}var p,y,_=gr(o,I,A,M),v=_._chainId,m=_._oriChainId,h=typeof e,C=O;if(h&&"object"==h){if(Array.isArray(h))return l();var K=e.module;K&&(C=K),p=e.type,y=e.cb}else{if("string"!=h&&"function"!=h)return Promise.reject(mr($e.CC_DISPATCH_PARAM_INVALID));var g=e;if("function"==h){var S=e.__fnName;if(!S)return l();g=S,1==M[m]&&(C=e.__stateModule)}var $=g.split("").filter(function(e){return"/"===e}).length;if(0===$)p=g;else{if(1!==$)return Promise.reject(mr($e.CC_DISPATCH_STRING_INVALID,hr(g)));var E=g.split("/"),w=E[0];w&&(C=w),p=E[1]}}return"*"===C?Bt("*/"+p,n,{silent:a,lazy:o,renderKey:c},i,{refModule:b.ctx.module}):new Promise(function(e,t){!function(e){var t=void 0===e?{}:e,n=t.callerRef,r=t.module,o=t.renderKey,a=t.isSilent,c=t.type,i=t.payload,u=t.cb,s=t.__innerCb,d=t.delay,f=void 0===d?-1:d,l=t.chainId,p=t.oriChainId,y=t.chainId_depth_,_=_r[r];if(!_)return s(Error("no reducerMap found for module:["+r+"]"));var v=_[c];if(!v)return s(Error("no reducer fn found for ["+r+"/"+c+"], is these fn you want:"+Object.keys(_)));Ur(v,{callerRef:n,module:r,type:c,cb:u,context:!0,__innerCb:s,calledBy:W,delay:f,renderKey:o,isSilent:a,chainId:l,oriChainId:p,chainId_depth_:y},i)}({callerRef:b,module:C,type:p,payload:n,cb:y,__innerCb:Kr(e,t),delay:i,renderKey:c,isSilent:a,chainId:v,oriChainId:m,chainId_depth_:M})}).catch(Cn)}}function Nr(c,e){return function(t){function n(){e&&e(function(e){for(var t="string"!=typeof e||e.includes("/")?e:c+"/"+e,n=arguments.length,r=Array(1<n?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];Bt.apply(void 0,[t].concat(r))},pr(c))}try{!function(e,t,n){ur(t,{module:e,stateChangedCb:n})}(c,t,n)}catch(e){var r=pr(c);if(!r)return sr("invalid module "+c);var o=He(t,fr(r),!1,!0),a=o.ignoredStateKeys;o.isStateEmpty||yr(c,o.partialState),0<a.length&&sr("invalid keys:"+a.join(",")+", their value is undefined or they are not declared in module"+c),ee("no ccInstance found for module["+c+"] currently, cc will just store it, lately ccInstance will pick this state to render"),n()}}}var Dr=function(o){return function(e,t){var n=o.ctx,r=Object.assign({},o.state,e);n.type===_e?(o.state=n.state=r,n.__boundSetState(r),t&&t(r)):(n.state=r,o.__$$isMounted?o.state=r:Object.assign(o.state,e),n.__boundSetState(e,function(){t&&t(r)}))}},Ir=function(r){return function(e){var t=r.ctx;if(t.type===_e){var n=Object.assign({},r.state);t.__boundSetState(n),e&&e(n)}else t.__boundForceUpdate(e)}},Ar=be,Mr=Re;function Tr(t,n){if(wt.isStartup){if(!Ar(n))throw Error("param config "+we);if(t===ye)throw Error("configuring global module is not allowed");var e=n.state,r=n.reducer,o=n.computed,a=n.watch,c=n.init,i=n.isClassSingle,u=Mr(e);if("function"==typeof e&&(wt.moduleName_stateFn_[t]=e),r&&!Ar(r))throw Error("config.reducer "+we);if(Pt(t,u,!0),Yt(t,r),o&&dn(t,o),a&&yn(t,a),wt.moduleSingleClass[t]=!0===i,c){if("function"!=typeof c)throw Error("init value must be a function!");Promise.resolve().then(c).then(function(e){Nr(t,n.initPost)(e)})}wt.moduleName_isConfigured_[t]=!0,mn(14,t)}else Nt.push({module:t,config:n})}function Rr(r,o){var a={};return de(r).forEach(function(e){function t(){return n.apply(void 0,arguments)}var n=r[e];t.__fnName=e,t.__stateModule=o,a[e]=t}),a}var Wr=wt.event_handlers_,kr=wt.handlerKey_handler_,jr=wt.ccUKey_handlerKeys_,Lr=wt.ccUKey_ref_,Fr=function(e,t,n){return e+"$"+t+"$"+n},Pr=re,Vr=xe;function zr(e,t,n,r,o){void 0===o&&(o=null);var a=Wr[e];if(a){var c=a;return r?c=a.filter(function(e){return e.ccUniqueKey===r}):n?c=a.filter(function(e){return e.ccClassKey===n}):t&&(c=a.filter(function(e){return e.module===t})),void 0!==o&&(c=c.filter(function(e){return e.identity===o})),c}return[]}function qr(e){var o={},r=[];e.forEach(function(e){var t=e.ccUniqueKey,n=e.event;delete kr[e.handlerKey],o[t]=1,r.includes(n)||r.push(n)}),r.forEach(function(e){var r=Wr[e];r&&(r.forEach(function(e,t){var n=e.ccUniqueKey;1===o[n]&&(r[t]=null,delete jr[n])}),Wr[e]=r.filter(function(e){return null!==e}))})}function Hr(e,t,n,r,o,a){var c=Pr(Wr,r);if("function"!=typeof a)return Vr("event "+r+"'s handler is not a function!");var i=Fr(n,r,o),u=Pr(jr,n),s=c.findIndex(function(e){return e.handlerKey===i}),d={event:r,module:e,ccClassKey:t,ccUniqueKey:n,identity:o,handlerKey:i,fn:a};-1<s?c[s]=d:(c.push(d),u.push(i)),kr[i]=d}function Br(e){for(var t=arguments.length,a=Array(1<t?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];var r,o,c,i,u=null,s=null;"string"==typeof e?r=e:(r=e.name,u=e.identity,o=e.module,c=e.ccClassKey,i=e.ccUniqueKey,s=e.canPerform),zr(r,o,c,i,u).forEach(function(e){var t=e.handlerKey,n=Lr[e.ccUniqueKey];if(n&&t){if(n.__$$isUnmounted)return;var r=kr[t];if(r){if(s&&!s(n))return;var o=r.fn;n.__$$isMounted?o.apply(void 0,a):n.ctx.__$$onEvents.push({fn:o,args:a})}}})}function Gr(e,t){qr(zr(e,t.module,t.ccClassKey,t.ccUniqueKey,t.identity))}function Yr(e){var t=jr[e];if(t){var n=[];t.forEach(function(e){return n.push(kr[e])}),qr(n)}}function Xr(e){if(e&&"object"==typeof e){var t;if(Array.isArray(e))t={name:e[0],identity:e[1]};else t=Object.assign({},e);return t}return{name:e}}var Jr=Object.freeze({bindEventHandlerToCcContext:Hr,findEventHandlersToPerform:Br,findEventHandlersToOff:Gr,offEventHandlersByCcUniqueKey:Yr,getEventItem:Xr});function Zr(n,e,r,o){return new Proxy(e,{get:function(e,t){return Ge(n,r,t,o),e[t]},set:function(e,t,n){return e[t]=n,!0}})}var Qr=xe,eo=Y;function to(e){return e?e.props||e:{}}var no=wt.store.getState;var ro=function(e,t,n){var r=n.module,o=n.state,a=!1,c="",i="",u="",s=null,d=-1,f=!1,l=e[ve],p=e.type,y=!1;if(void 0!==l){var _,v,m;if(d=e.delay,i=e.rkey,a="int"===p,f="bool"===p,(c=l).includes("/")){var h=c.split("/");_=h[1],v=c,m=h[0]}else v=r+"/"+(_=c),m=r;var C=no(m);u="bool"===p?!We(m!==r?C:o,_):function(e){var t=fe(e);return t?t.currentTarget.value:e}(t);var K=e.val;if(void 0===K);else if("function"==typeof K){var g=K(u,_,{module:m,moduleState:C,fullKeyPath:v,state:o,refCtx:n});if(null!=g)if("as"===p)u=g;else{var S=typeof g;"boolean"==S?y=!g:"object"==S?(y=!0,s=g):xe("syncKey["+l+"] cb result type error.")}else"as"===p&&(y=!0)}else u=K}else{var $=fe(t);if(!$)return null;var E=$.currentTarget;u=E.value;var w=E.dataset;if(a="int"===p||void 0!==w.ccint,!(c=w.ccsync))return null;i=w.ccrkey;var b=w.ccdelay;if(b)try{d=parseInt(b)}catch(e){}}return{currentTarget:{value:u,extraState:s,noAutoExtract:y,dataset:{ccsync:c,ccint:a,ccdelay:d,ccrkey:i}},isToggleBool:f}};var oo=function(e,t,n,r,o){var a=t;!0!==n||Number.isNaN(a=parseInt(t))&&(xe(t+" can not convert to int but you set ccint as true!ÔºÅ"),a=t);var c=null,i=[];if(e.includes("/")){var u=e.split("/"),s=u[1];c=u[0],i=s.includes(".")?s.split("."):[s]}else i=e.includes(".")?e.split("."):[e];if(1===i.length){var d,f,l=i[0];return!0!==o?{module:c,state:(d={},d[l]=a,d)}:{module:c,state:(f={},f[l]=!r[l],f)}}var p,y=i[0],_=i.slice(1),v=r[y];return function e(t,n,r,o,a,c){void 0===c&&(c=!1);var i=n[o];if(r===o)if(!0===c){var u=t[i];"boolean"!=typeof u?xe("key["+i+"]'s value type is not boolean"):t[i]=!u}else t[i]=a;else e(t[i],n,r,++o,a,c)}(v,_,_.length-1,0,a,o),{module:c,state:(p={},p[y]=v,p)}},ao=wt.store.getState;function co(e,t,n){var r=t.ctx,o=r.module,a=ro(e,n,r);if(a){var c=a.currentTarget,i=c.dataset,u=c.value,s=c.extraState,d=c.noAutoExtract;n&&n.stopPropagation&&n.stopPropagation();var f=i.ccsync,l=i.ccint,p=i.ccdelay,y=i.ccrkey;if(f.startsWith("/")&&(i.ccsync=""+o+f),f.includes("/")){var _=f.split("/")[0];Rt(_,!1);var v=r.ccKey,m=r.ccUniqueKey;if(d)return void(s&&cr(s,{calledBy:K,ccKey:v,ccUniqueKey:m,module:_,renderKey:y,delay:p},t));var h=_!==o?ao(_):t.state;cr(oo(f,u,l,h,a.isToggleBool).state,{calledBy:K,ccKey:v,ccUniqueKey:m,module:_,renderKey:y,delay:p},t)}else{if(d)return void(s&&t.setState(s,null,y,p));var C=oo(f,u,l,t.state,a.isToggleBool);t.setState(C.state,null,y,p)}}}var io=wt.reducer,uo=io._module_fnNames_,so=io._caller,fo=wt.refStore,lo=wt.ccClassKey_ccClassContext_,po=wt.moduleName_stateKeys_,yo=wt.store.getState,_o=wt.moduleName_ccClassKeys_,vo=de,mo=z,ho=X,Co=re,Ko=ne,go=xe,So=V,$o=0;var Eo=function(){},wo=function(e){return"type of defineEffect "+e+" param must be"},bo=function(e){return"-"===e.watchedKeys?vo(e.__$$renderStatus===E?e.__$$compareWaKeys:e.__$$curWaKeys):e.watchedKeys},xo=function(t,e){function n(e){return vo(t.__$$renderStatus===E?t.__$$compareConnWaKeys[e]:t.__$$curConnWaKeys[e])}function r(e){if(c)return n(e);var t=o[e];return"*"===t?po[e]:"-"===t?n(e):t}var o=t.connect,a=t.connectedModules,c=Array.isArray(o);if(e)return r(e);var i={};return a.forEach(function(e){i[e]=r(e)}),i};function Uo(t,n,e){("*"===e?po[n]:e).forEach(function(e){return function(e,t,n){m(_,L(e,t),n)}(n,e,t)})}function Oo(c,e,t){void 0===t&&(t=5);var n=e.isSingle,o=e.ccClassKey,r=e.ccKey,a=void 0===r?"":r,i=e.module,u=e.type,s=e.insType,d=e.state,f=e.storedKeys,l=void 0===f?[]:f,p=e.persistStoredKeys,y=void 0!==p&&p,_=e.watchedKeys,v=e.connect,m=void 0===v?{}:v,h=e.tag,C=void 0===h?"":h,K=e.ccOption,g=void 0===K?{}:K,S=i,$=c.ctx,E=So($),w=po[S],b=c.setState,x=c.forceUpdate;!E&&$.ccUniqueKey?(b=$.__boundSetState,x=$.__boundForceUpdate):u!==_e&&(b=c.setState.bind(c),x=c.forceUpdate.bind(c));var U={};U.persistStoredKeys=void 0===g.persistStoredKeys?y:g.persistStoredKeys,U.tag=g.tag||C;var O=function(e,t,n,r){var o;if(e)n&&Qr("now the ccClass is singleton, you needn't supply ccKey to instance props, cc will ignore the ccKey["+n+"]"),o=t;else if(n)o=eo(t,n);else{var a=Zt(r);o=eo(t,a)}return o}(n,o,a,U.tag);if(U.renderKey=g.renderKey||O,U.storedKeys=function(e,t,n,r){var o=n||r;return o?"*"===o?Object.keys(e).filter(function(e){return!t.includes(e)}):(Wt(t,o),o):[]}(d,w,g.storedKeys,l),a&&!o)throw Error("missing ccClassKey while init a cc ins with ccKey["+a+"]");if(0<U.storedKeys.length&&!a)throw mo($e.CC_STORED_KEYS_NEED_CCKEY,ho("ccClassKey["+o+"]"));var N=yo(i),D=fo._state[O]||{},I=Object.assign({},d,D,N),A=vo(c.state=I),M=lo[o].connectedState,T=vo(m),R={},W={};T.forEach(function(e){W[e]=et(c,e,!1)});var k=et(c,i),j=W[ye],L=Zr(c,yo(ye),ye,!1),F=Oe(vo(d),w),P=Zr(c,N,i,!0);i===ye&&xe("belong to $$global is not good.");var V=Co(_o,i);V.includes(o)||V.push(o);function z(e,t){cr(e,t,c)}function q(e,t,n,r,o,a){z(t,{calledBy:n,module:e,renderKey:o,delay:a,reactCallback:r})}function H(e,t,n,r,o){q(e,t,he,n,r,o)}function B(e,t,n,r,o){"string"==typeof e?H(e,t,n,r,o):q(S,e,me,t,n,r)}function G(e,t,n){q(S,c.state,Ce,e,t,n)}var Y=[],X=[],J={effectItems:Y,eid_effectReturnCb_:{},effectPropsItems:X,eid_effectPropsReturnCb_:{}},Z={},Q=to(c.props),ee={type:u,insType:s,isSingle:n,module:i,ccClassKey:o,ccKey:a,ccUniqueKey:O,renderCount:1,initTime:Date.now(),watchedKeys:_,privStateKeys:F,connect:m,connectedModules:T,__$$onEvents:[],__$$hasModuleState:0<w.length,__$$renderStatus:Ee,__$$curWaKeys:{},__$$compareWaKeys:{},__$$compareWaKeyCount:0,__$$nextCompareWaKeys:{},__$$nextCompareWaKeyCount:0,__$$curConnWaKeys:{},__$$compareConnWaKeys:{},__$$compareConnWaKeyCount:{},__$$nextCompareConnWaKeys:{},__$$nextCompareConnWaKeyCount:{},__$$staticWaKeys:{},__$$staticWaKeyList:[],persistStoredKeys:U.persistStoredKeys,storedKeys:U.storedKeys,renderKey:U.renderKey,tag:U.tag,prevProps:Q,props:Q,mapped:{},prevState:I,state:I,moduleState:P,mstate:N,globalState:L,connectedState:R,extra:{},staticExtra:{},refComputed:{},refComputedValue:{},refComputedOri:{},moduleComputed:k,globalComputed:j,connectedComputed:W,moduleReducer:{},connectedReducer:{},reducer:{},stateKeys:A,computedDep:{},computedRetKeyFns:{},watchDep:{},watchRetKeyFns:{},execute:null,effectMeta:J,retKey_fnUid_:{},reactSetState:Eo,__boundSetState:b,reactForceUpdate:Eo,__boundForceUpdate:x,setState:B,setModuleState:H,forceUpdate:G,changeState:z,refs:Z,useRef:function(t){return function(e){return Z[t]={current:e}}},__$$ccSetState:wr(c),__$$ccForceUpdate:br(c),__$$settedList:[],__$$prevMoStateVer:{},__$$prevModuleVer:{},__$$cuOrWaCalled:!1};c.setState=B,c.forceUpdate=G,ee.initState=function(e){return c.__$$isMounted?go("initState can only been called before first render period!"):be(d)?ee.__$$cuOrWaCalled?go("initState must been called before computed or watch"):(c.state=Object.assign({},d,e,D,P),ee.stateKeys=vo(c.state),void(ee.prevState=ee.state=c.state)):go("state "+we)};var te=Or(c,!1,!1,S);if(ee.dispatch=te,1<t&&(ee.lazyDispatch=Or(c,!0,!1,S),ee.silentDispatch=Or(c,!1,!0,S),ee.dispatchLazy=ee.lazyDispatch,ee.dispatchSilent=ee.silentDispatch,ee.invoke=xr(c),ee.lazyInvoke=xr(c,{isLazy:!0}),ee.silentInvoke=xr(c,{isLazy:!1,isSilent:!0}),ee.invokeLazy=ee.lazyInvoke,ee.invokeSilent=ee.silentInvoke,ee.setGlobalState=function(e,t,n,r){q(ye,e,me,t,n,r)}),2<t){var ne=function(e,t,n,r,o){var a;if("string"==typeof e)return co.bind(null,((a={})[ve]=e,a.type=o,a.val=t,a.delay=r,a.rkey=n,a),c);co({type:"val"},c,e)};ee.sync=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),ne(e,t,n,r,"val")},ee.syncBool=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),ne(e,t,n,r,"bool")},ee.syncInt=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),ne(e,t,n,r,"int")},ee.syncAs=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),ne(e,t,n,r,"as")},ee.set=function(e,t,n,r){var o;void 0===n&&(n=""),void 0===r&&(r=-1),co(((o={})[ve]=e,o.type="val",o.val=t,o.delay=r,o.rkey=n,o),c)},ee.setBool=function(e,t,n){var r;void 0===t&&(t=""),void 0===n&&(n=-1),co(((r={})[ve]=e,r.type="bool",r.delay=n,r.rkey=t,r),c)}}if(3<t&&(ee.emit=function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Br.apply(Jr,[Xr(e)].concat(n))},ee.off=function(e,t){var n=void 0===t?{}:t,r=n.module,o=n.ccClassKey,a=n.ccUniqueKey,c=void 0===a?O:a,i=Xr(e);Gr(i.name,{module:r,ccClassKey:o,ccUniqueKey:c,identity:i.identity})},ee.on=function(e,t){var n=Xr(e),r=n.identity;Hr(S,o,O,n.name,void 0===r?null:r,t)}),4<t){ee.execute=function(e){return ee.execute=e},ee.watch=function(o){return function(e,t,n){var r={type:Se,refCtx:o,stateKeys:o.stateKeys,retKeyFns:o.watchRetKeyFns,module:o.module,connect:o.connect,dep:o.watchDep};o.__$$cuOrWaCalled=!0,nn(Ke,r,e,t,n)}}(ee),ee.computed=function(o){return function(e,t,n){var r={type:ge,refCtx:o,stateKeys:o.stateKeys,retKeyFns:o.computedRetKeyFns,module:o.module,connect:o.connect,dep:o.computedDep};o.__$$cuOrWaCalled=!0,nn(Ke,r,e,t,n)}}(ee);var re=function(u,s){return function(e,t,n,r){if(void 0===n&&(n=!0),void 0===r&&(r=!0),"function"!=typeof e)throw Error(wo("first")+" function");var o=t,a=s?n:r;if(null!=t&&!Array.isArray(t))throw Error(wo("second")+" one of them(array, null, undefined)");var c=null;!s&&o&&(c=[],o.forEach(function(e){var t;if(e.includes("/")){var n=(t=e).split("/");if(!ee.connect[n[0]])throw mo($e.CC_MODULE_NOT_CONNECTED,ho("depKey["+e+"]"))}else t=S+"/"+e;c.push(t),ee.__$$staticWaKeys[t]=1}));var i={fn:e,isProp:s,depKeys:o,modDepKeys:c,eId:Symbol("__autoGen_"+ ++$o+"__"),compare:n,immediate:a};u.push(i)}};ee.effect=re(Y,!1),ee.effectProps=re(X,!0)}var oe=ee.moduleReducer,ae=ee.connectedReducer,ce=ee.__$$curConnWaKeys,ie=ee.__$$compareConnWaKeys,ue=ee.__$$compareConnWaKeyCount,se=ee.__$$nextCompareConnWaKeys,de=ee.__$$nextCompareConnWaKeyCount,fe=T.slice();fe.includes(i)?go("["+O+"]'s module["+i+"] is in belongTo and connect both, it will cause redundant render."):fe.push(i);var le=!1;if(fe.forEach(function(o){var e;e=o===i?oe:Ko(ae,o);var t=m[o];if(t){var n=M[o];"-"===t?(le=!0,ce[o]={},ie[o]={},ue[o]=0,se[o]={},de[o]=0,n=o===ye?ee.globalState:Zr(c,n,o)):Uo(O,o,t),R[o]=n}(uo[o]||[]).forEach(function(r){e[r]=function(e,t,n){return te(o+"/"+r,e,t,n)}})}),ee.reducer=so,ee.mr=ee.moduleReducer,ee.cr=ee.connectedReducer,ee.r=ee.reducer,"-"===_?le=!0:Uo(O,i,_),ee.__$$autoWatch=le,ee.getWatchedKeys=function(){return bo(c.ctx||ee)},ee.getConnectWatchedKeys=function(e){return xo(c.ctx||ee,e)},E)c.ctx=ee;else{var pe=c.ctx;Object.assign(c.ctx,ee,{__$$curWaKeys:pe.__$$curWaKeys,__$$compareWaKeys:pe.__$$compareWaKeys,__$$compareWaKeyCount:pe.__$$compareWaKeyCount,__$$nextCompareWaKeys:pe.__$$nextCompareWaKeys,__$$nextCompareWaKeyCount:pe.__$$nextCompareWaKeyCount,__$$curConnWaKeys:pe.__$$curConnWaKeys,__$$compareConnWaKeys:pe.__$$compareConnWaKeys,__$$compareConnWaKeyCount:pe.__$$compareConnWaKeyCount,__$$nextCompareConnWaKeys:pe.__$$nextCompareConnWaKeys,__$$nextCompareConnWaKeyCount:pe.__$$nextCompareConnWaKeyCount})}}var No=de,Do=be,Io=wt.store._state,Ao=Object.prototype.hasOwnProperty;var Mo=V,To=z,Ro=wt.featureStr_classKey_,Wo=wt.userClassKey_featureStr_,ko=wt.ccClassKey_ccClassContext_,jo=0;var Lo=wt.moduleName_stateKeys_,Fo=wt.moduleName_ccClassKeys_,Po=wt.moduleSingleClass,Vo=wt.ccClassKey_ccClassContext_,zo=wt.computed._computedValue,qo=function(e,t){var n=!1,r=!1;if(!Array.isArray(e))return{duplicate:n,notArray:!0,keyElementNotString:r};if(!Array.isArray(t))return{duplicate:n,notArray:!0,keyElementNotString:r};var o=e.length,a=t.length;e:for(var c=0;c<o;c++){var i=e[c];if("string"!=typeof i){r=!0;break e}for(var u=0;u<a;u++){var s=t[u];if("string"!=typeof s){r=!0;break e}if(s===i){n=!0;break e}}}return{duplicate:n,notArray:!1,keyElementNotString:r}},Ho=X;function Bo(e,t,n,r,o,a,c,i,u){void 0===e&&(e=q),void 0===a&&(a=[]),!0===i&&function(){if(!0!==wt.isStartup)throw Error("you must startup cc by call startup method before register ReactClass to cc!")}();var s="cc"===u;Rt(e,!1,"module["+e+"] is not configured in store"),Wt(Lo[e],a);var d=c,f=Array.isArray(c);!f&&"string"!=typeof c||(d={},(f?c:c.split(",")).forEach(function(e){d[e]="-"}));e===ye||d[ye]||(d[ye]="-");var l,p=function(e,t,n){if(t===T)return[];if(!n)return[];if("*"===n)return Lo[e];var r=qo(n,[]);if(r.notArray||r.keyElementNotString)throw Error("watchedKeys "+b+" "+Ho("ccClassKey:"+t));return n}(e,t,o),y=function(o,e,t,a){if(!Do(o))throw Error("CcFragment or CcClass's prop connect type error, it "+we);function c(e){return i+" module["+e+"]'s value must be * or array of string"}var i="CcFragment or CcClass's prop connect is invalid,",n=No(o);n.sort();var u=[],s={};if(n.forEach(function(t){var n=Io[t],r=a+"_"+t+"/";if(void 0===n)throw Error(i+" module["+t+"] not found in cc store ");var e=o[t];if("string"==typeof e){if("*"!==e&&"-"!==e)throw Error(c(t));u.push(r+"*"),No(n).forEach(function(e){s[t+"/"+e]=e})}else{if(!Array.isArray(e))throw Error(c(t));e.forEach(function(e){if(!Ao.call(n,e))throw Error(i+" module["+t+"]'s key["+e+"] not declared in cc store ");r+=e+",",s[t+"/"+e]=e}),u.push(r)}}),u.push("|"),"*"===e)u.push(a+"_$"+t+"/*");else{e.sort();var r=t+"/"+e.join(",");u.push(r)}return{featureStr:u.join("@"),connectedModuleKeyMapping:s,connectedModuleNames:n}}(d,p),_=y.connectedModuleKeyMapping,v=y.connectedModuleNames,m=function(e,t,n,r,o,a,c){if(void 0===c&&(c=""),!c){if(t===q&&Mo(n)&&0===r.length)return o+"0";var i=o+":"+a,u=Ro[i];return u||(Ro[i]=u=""+o+ ++jo)}if(c.startsWith(h))throw Error("user can not specify a classKey["+c+"] starts with $$Cc");if(!e&&c.toLowerCase()==T.toLowerCase())throw Error(T+" is cc built-in ccClassKey name.");if(ko[c]){if(Wo[c]!==a)throw To($e.CC_CLASS_KEY_DUPLICATE,"ccClassKey:["+c+"] duplicate")}else Wo[c]=a;return c}(s,e,d,p,r,y.featureStr,t);if(n){if(!Array.isArray(n)&&"*"!==n)throw Error("renderKeyClasses type err, it is must be an array or string *");l=n}else l=[m];return function(e,t,n,r,o,a,c){var i=Vo[e];i||(i=function(e,t,n,r,o){return{module:e,ccClassKey:t,renderKeyClasses:n,originalWatchedKeys:o,watchedKeys:r,ccKeys:[],connectedState:{},connectedModuleKeyMapping:null,connectedModule:{}}}(n,e,t,o,r),Vo[e]=i);var u={},s={};if(a){var d=wt.store._state,f=i.connectedState;c.forEach(function(e){f[e]=d[e],s[e]=zo[e],u[e]=1}),i.connectedModuleKeyMapping=a,i.connectedModule=u,i.connectedComputed=s}}(m,l,e,o,p,_,v),function(e,t){var n=re(Fo,e);if(!0===Po[e]&&1<=n.length)throw Error("module["+e+"] is declared as single, only on ccClassKey can been registered to it, and now a ccClassKey["+n[0]+"] has been registered!");n.includes(t)||n.push(t)}(e,m),{_module:e,_connect:d,_watchedKeys:p,_ccClassKey:m}}var Go=function(){};function Yo(){var e=T;Bo(q,e,"",A,[],[],[],!1,"cc");var t={setState:Go,forceUpdate:Go};Oo(t,{module:q,connect:[],watchedKeys:[],ccClassKey:e,state:{}}),wt.permanentDispatcher=t}var Xo=be,Jo=de;function Zo(e,t){if(!Xo(e))throw Error(t+" "+we)}function Qo(e){if(0<e.length){var o=wt.plugins;o.length=0,_n.forEach(function(e){return vn[e].length=0});var a={};e.forEach(function(e){if(o.push(e),!e.install)throw Error("a plugin must export install handler!");var t=e.install(hn),n=Error("plugin.install must return result:{name:string, options?:object}");if(!t)throw n;var r=t.name;if(!r)throw n;if(a[r])throw Error("pluginName["+r+"] duplicate");a[r]=1}),wt.pluginNameMap=a}}var ea=!1;function ta(e,r){void 0===e&&(e=!1),rt={},ot={},se(wt.event_handlers_),se(wt.ccUKey_handlerKeys_);var o=wt.ccClassKey_ccClassContext_,t=wt.ccUKey_ref_;if(Object.keys(o).forEach(function(e){var t=o[e],n=[];0<r.length&&t.ccKeys.forEach(function(e){r.includes(e)&&n.push(e)}),se(t.ccKeys,n)}),se(wt.handlerKey_handler_),se(t,r),e){var n=wt.computed,a=wt.watch,c=n._computedValue,i=a._watchDep;de(wt.store._state).forEach(function(e){e!==H&&(c[e]&&(wt.computed._computedDep[e]={retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0},dn(e,n._computedRaw[e])),i[e]&&(i[e]={retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0},yn(e,a._watchRaw[e])))})}}function na(){var r=wt.ccUKey_ref_,o=[],a=[];return de(r).forEach(function(e){var t=r[e];if(t&&!0===t.__$$isMounted&&0==t.__$$isUnmounted){var n=t.ctx.insType;n===U?(o.push(e),a.push(e)):n===f&&a.push(e)}}),{ccFragKeys:o,ccNonCusKeys:a}}function ra(){se(wt.globalStateKeys);var e=de(wt.moduleName_isConfigured_).concat([q,H,ye,o]);se(wt.reducer._reducer,e),se(wt.store._state,e,{},!0),se(wt.computed._computedDep,e),se(wt.computed._computedValue,e),se(wt.watch._watchDep,e),se(wt.middlewares),se(wt.waKey_uKeyMap_),Fe={module:{computed:{},watch:{}},ref:{computed:{},watch:{},effect:{}}};var t=na(),n=t.ccFragKeys;return ta(!1,t.ccNonCusKeys),n}function oa(e){void 0===e&&(e=!1),wt.info.latestStartupTime=Date.now();var t=[];if(wt.isStartup){if(wt.isHotReloadMode()){if(e)return console.warn("attention: make sure [[clearContextIfHot]] been called before app rendered!"),ea=!0,t=ra();if(ea)return ea=!1,t;var n=na();return ta(wt.reComputed,n.ccNonCusKeys),n.ccFragKeys}return console.warn("clear failed because of not running under hot reload mode!"),t}return ea=!0,t}var aa=wt.moduleName_stateKeys_,ca=wt.store,ia=ca.getPrevState,ua=ca.getState,sa=ca.getStateVer,da=function(e,t){return xe("effect: key["+e+"] is invalid, its "+t+" has not been declared in' store!")};function fa(e,t){function n(a,c,i){return function(e){var t=e.fn,n=e.eId;if(!i||!1!==e.immediate){var r=a[n];r&&r(u);var o=t(u,c);a[n]=o}}}var u=e.ctx,r=u.effectMeta,o=r.effectItems,a=r.eid_effectReturnCb_,c=r.effectPropsItems,i=r.eid_effectPropsReturnCb_,m=u.__$$prevMoStateVer,h=u.__$$settedList,C=u.module;if(t)o.forEach(n(a,!0,!0)),c.forEach(n(i,!0,!0));else{var K=u.prevState,g=e.state,S=[];o.forEach(function(e){var t=e.modDepKeys,n=e.compare,r=e.fn,o=e.eId;if(t){var a=t.length;if(0===a)return;for(var c=function(e){return e.reduce(function(t,e){var n=e.module;return e.keys.forEach(function(e){return t[n+"/"+e]=1}),t},{})}(h),i=!1,u=0;u<a;u++){var s=t[u];if(n){var d=void 0,f=void 0,l=s.split("/"),p=l[0],y=l[1];if(p!==C){var _=ia(p),v=sa(p);if(m[y]===v[y])continue;if(m[y]=v[y],!_){da(s,"module["+p+"]");continue}if(!aa[p].includes(y)){da(s,"unmoduledKey["+y+"]");continue}d=ua(p),f=_}else d=g,f=K;if(f[y]!==d[y]){i=!0;break}}else if(c[s]){i=!0;break}}i&&S.push({fn:r,eId:o})}else S.push({fn:r,eId:o})}),S.forEach(n(a,!1,!1));var s=u.prevProps,d=u.props,f=[];c.forEach(function(e){var t=e.depKeys,n=e.fn,r=e.eId;if(t){var o=t.length;if(0===o)return;for(var a=!1,c=0;c<o;c++){var i=t[c];if(s[i]!==d[i]){a=!0;break}}a&&f.push({fn:n,eId:r})}else f.push({fn:n,eId:r})}),f.forEach(n(i,!1,!1)),h.length=0}}var la=xe,pa=z,ya=X,_a=Z,va=J,ma=wt.runtimeVar,ha=wt.ccClassKey_ccClassContext_,Ca=wt.ccUKey_ref_,Ka={};function ga(e,t,n,r){function o(){Ca[e]=t,n.push(e)}!function(e){void 0===Ka[e]?Ka[e]=1:Ka[e]+=1}(e),r?setTimeout(o,r):o()}function Sa(e,t,n,r,o){var a=ha[n],c=a.ccKeys;ma.isDebug&&console.log(_a("register ccKey "+o+" to CC_CONTEXT"),va());var i=wt.isHotReloadMode();if(c.includes(o)){var u=function(){throw pa($e.CC_CLASS_INSTANCE_KEY_DUPLICATE,ya("ccClass:"+n+",ccKey:"+o))};if(i){var s=function(e){return void 0===Ka[e]?0:Ka[e]}(o);if(t&&0<s)throw pa($e.CC_CLASS_INSTANCE_MORE_THAN_ONE,ya("ccClass:"+n));1<s&&u(),la("\n        found ccKey["+r+"] duplicated in hot reload mode, please make sure your ccKey is unique manually,\n        "+ya("ccClassKey:"+n+" ccKey:"+r+" ccUniqueKey:"+o)+"\n      "),ga(o,e,c,600)}else u()}else ga(o,e,c);return a}function $a(t,e,n,r){var o=!1,a=de(t);a.forEach(function(e){2===t[e]&&(o=!0,S(n,e,r))}),e<a.length&&(o=!0),o&&Ft(n)}function Ea(e){var t=e.ctx;if(t.__$$renderStatus=Ee,t.__$$autoWatch){var n=t.connectedModules,r=t.connect,o=t.ccUniqueKey,a=t.__$$compareConnWaKeys,c=t.__$$compareConnWaKeyCount;$a(t.__$$compareWaKeys,t.__$$compareWaKeyCount,t.module,o),n.forEach(function(e){"-"===r[e]&&$a(a[e],c[e],e,o)})}}function wa(e){Ea(e),e.__$$isMounted=!0,e.__$$isUnmounted=!1;var t=e.ctx,n=t.ccUniqueKey,r=t.__$$onEvents,o=t.__$$staticWaKeys;Sa(e,t.isSingle,t.ccClassKey,t.ccKey,n);var a=de(o);(e.ctx.__$$staticWaKeyList=a).forEach(function(e){return function(e,t){m(v,e,t)}(e,n)}),0<r.length&&(r.forEach(function(e){return e.fn.apply(void 0,e.args)}),r.length=0),fa(e,!0)}var ba=wt.ccUKey_ref_,xa=wt.ccUKey_handlerKeys_,Ua=wt.runtimeVar,Oa=wt.ccClassKey_ccClassContext_,Na=wt.handlerKey_handler_;function Da(e,t){Ua.isDebug&&console.log(Z(t+" unset ref"),J("purple")),delete ba[t];var n=Oa[e].ccKeys,r=n.indexOf(t);r<0||n.splice(r,1),function(e){void 0===Ka[e]?Ka[e]=0:Ka[e]-=1}(t);var o=xa[t];o&&o.forEach(function(e){delete Na[e]})}var Ia=de;function Aa(n,r){function e(e){var t=n[e];"function"==typeof t&&t(r)}Object.getOwnPropertySymbols(n).forEach(e),Ia(n).forEach(e)}function Ma(e){e.__$$isUnmounted=!0;var t=e.ctx,n=t.ccUniqueKey,r=t.ccClassKey,o=t.module,a=t.__$$staticWaKeyList;if(e.__$$isMounted){var c=t.effectMeta,i=c.eid_effectPropsReturnCb_;Aa(c.eid_effectReturnCb_,t),Aa(i,t),Yr(n)}t.getWatchedKeys().forEach(function(e){return S(o,e,n)});var u=t.getConnectWatchedKeys();de(u).map(function(t){u[t].forEach(function(e){return S(t,e,n)})}),a.forEach(function(e){return function(e,t){try{delete v[e][t]}catch(e){}}(e,n)}),Da(r,n)}var Ta=wt.store.getState;var Ra=de,Wa=wt.runtimeVar;function ka(n,e,t){var r=n.ctx;if(n.__$$isUnmounted=!1,r.__$$inBM=!(n.__$$isMounted=!1),e){if("function"!=typeof e)throw Error("type of setup must be function");var o=e(r)||{};if(!be(o))throw Error("type of setup return result must be an plain json object");(!0===t||!0===Wa.bindCtxToMethod&&!1!==t)&&Ra(o).forEach(function(e){var t=o[e];"function"==typeof t&&(o[e]=t.bind(n,r))}),r.settings=o}r.refComputedValue=un(r.computedRetKeyFns,r.refComputedOri),r.refComputed=et(n,null,!0,!0),function(o){function e(r){r(o,c,i,i,u,!0,!0),a.forEach(function(e){var t=Ta(e),n=Te(e);r(o,e,t,t,n,!0,!0)})}var t=o.ctx,n=t.hasComputedFn,r=t.hasWatchFn,a=t.connectedModules,c=t.module,i=t.state,u=Te(c);n&&e(An),r&&e(In)}(n),r.__$$inBM=!1}var ja=Ne,La=Re;function Fa(e){var t=e.props,n=ja(t.register),r=n.module,o=n.renderKeyClasses,a=n.tag,c=n.lite,i=n.compareProps,u=void 0===i||i,s=n.setup,d=n.bindCtxToMethod,f=n.watchedKeys,l=void 0===f?"-":f,p=n.connect,y=void 0===p?{}:p,_=n.isSingle,v=n.storedKeys,m=void 0===v?[]:v,h=La(n.state),C=t.ccClassKey,K=t.ccKey,g=t.ccOption,S=void 0===g?{}:g,$=l,E=C,w=y,b=M;if(!0!==t.__$$regDumb){b=U;var x=Bo(r,C,o,A,ke(l),m,y,!0);$=l,E=x._ccClassKey,w=x._connect}Oo(e,{isSingle:_,ccKey:K,connect:w,state:h,module:r,type:A,insType:b,storedKeys:m,watchedKeys:$,tag:a,ccClassKey:E,ccOption:S},c),e.ctx.reactSetState=Dr(e),e.ctx.reactForceUpdate=Ir(e),e.__$$compareProps=u,ka(e,s,d)}var Pa=ee,Va=le,za="";function qa(e,t){var n=void 0===e?{}:e,r=n.store,o=void 0===r?{}:r,a=n.reducer,c=void 0===a?{}:a,i=n.init,u=void 0===i?null:i,s=n.initPost,d=void 0===s?{}:s,f=n.computed,l=void 0===f?{}:f,p=n.watch,y=void 0===p?{}:p,_=n.moduleSingleClass,v=void 0===_?{}:_,m=void 0===t?{}:t,h=m.plugins,C=void 0===h?[]:h,K=m.middlewares,g=void 0===K?[]:K,S=m.isStrict,$=void 0!==S&&S,E=m.isDebug,w=void 0!==E&&E,b=m.errorHandler,x=void 0===b?null:b,U=m.isHot,O=m.bindCtxToMethod,N=void 0!==O&&O,D=m.objectValueCompare,I=void 0!==D&&D,A=m.computedCompare,M=void 0===A||A,T=m.watchCompare,R=void 0===T||T,W=m.watchImmediate,k=void 0!==W&&W,j=m.reComputed,L=void 0===j||j;try{throw Error()}catch(e){var F=function(e){function t(e,t){for(var n=0;n<o;n++)if(r[n].includes(e)){a=r[n+t];break}}var n=wt.info,r=e.stack.split("\n"),o=r.length,a="";function c(){return oa(wt.isHot=!0)}t("startup",2),a||t("runConcent",0);var i=Date.now(),u=[],s=!0;if(za)if(za!==a){var d="invalid run api call!(it can only be called once, changing 'call run' line location in HMR will cause this error also, \n    try refresh browser to reload your app to avoid this tip)";if(i-n.latestStartupTime<1e3)throw Error(d);Me()?(u=c(),za=a):(te(d),s=!1)}else u=c();else za=a,n.firstStartupTime=i,n.latestStartupTime=i;return{canStartup:s,ccFragKeys:u}}(e),P=F.ccFragKeys;if(!F.canStartup)return;try{console.log("%c window.name:"+window.name,"color:green;border:1px solid green"),Pa("cc version "+wt.info.version),void 0!==U&&(wt.isHot=U),wt.reComputed=L,wt.errorHandler=x;var V=wt.runtimeVar;V.isStrict=$,V.isDebug=w,V.objectValueCompare=I,V.computedCompare=M,V.watchCompare=R,V.watchImmediate=k,V.bindCtxToMethod=N,Yo(),function(e){if(!Xo(e))throw Error("StartupOption.moduleSingleClass "+we);ce(wt.moduleSingleClass,e)}(v),function(e){Zo(e,"state"),delete e[B],delete e[H],void 0===e[ye]&&(e[ye]={}),void 0===e[q]&&(e[q]={});for(var t=Jo(e),n=t.length,r=0;r<n;r++){var o=t[r];Pt(o,e[o])}}(o),function(t){Zo(t,"reducer"),void 0===t[q]&&(t[q]={}),void 0===t[ye]&&(t[ye]={}),Jo(t).forEach(function(e){return Yt(e,t[e])})}(c),function(t){Zo(t,"computed"),Jo(t).forEach(function(e){return dn(e,t[e])})}(l),function(t){Zo(t,"watch"),Object.keys(t).forEach(function(e){return yn(e,t[e])})}(y),function(n,r){if(n){if(!Xo(n))throw Error("init "+we);Jo(n).forEach(function(t){Rt(t,!1);var e=n[t];e&&Promise.resolve().then(e).then(function(e){Nr(t,r[t])(e)})}),wt.init._init=n}}(u,d),function(e){if(0<e.length){var t=wt.middlewares;t.length=0,e.forEach(function(e){return t.push(e)})}}(g);var z=function(e){Va("CC_CONTEXT",wt,e),Va("ccc",wt,e),Va("cccc",wt.computed._computedValue,e),Va("sss",wt.store._state,e)};window.mcc?setTimeout(function(){z(window.mcc[Ie()])},1200):z(),wt.isStartup=!0,Qo(C),P.forEach(function(e){var t=wt.ccUKey_ref_[e];Ma(t),Fa(t),wa(t)})}catch(e){if(!x)throw e;x(e)}}}function Ha(e){throw Error("[[run]]: param error, "+e+" "+we)}var Ba=be,Ga=de,Ya=V,Xa=Re;function Ja(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Za(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function Qa(e){Ea(e),fa(e),e.ctx.prevState=e.state}var ec=wt.store;function tc(e){var t=e.ctx;if(t.__$$renderStatus=E,t.__$$autoWatch){if(t.__$$hasModuleState){var n=t.__$$prevModuleVer,r=t.module,o=ec.getModuleVer(r)[r];n[r]!==o&&(n[r]=o,Object.assign(e.state,t.mstate)),e.state=Zr(e,e.state,r,!0),t.state=e.state,t.__$$curWaKeys={},t.__$$compareWaKeys=t.__$$nextCompareWaKeys,t.__$$compareWaKeyCount=t.__$$nextCompareWaKeyCount,t.__$$nextCompareWaKeys={},t.__$$nextCompareWaKeyCount=0}var a=t.connect;t.connectedModules.forEach(function(e){"-"===a[e]&&(t.__$$curConnWaKeys[e]={},t.__$$compareConnWaKeys[e]=t.__$$nextCompareConnWaKeys[e],t.__$$compareConnWaKeyCount[e]=t.__$$nextCompareConnWaKeyCount[e],t.__$$nextCompareConnWaKeys[e]={},t.__$$nextCompareConnWaKeyCount[e]=0)})}}var nc=function(e){return"CC("+e+")"},rc=ke,oc=pe,ac=Re,cc=wt.runtimeVar,ic=J,uc=Z,sc=function(e){return Error("can not defined setup both in register options and class body --verbose:"+e)};function dc(e,t){var n=Ne(e);return delete n.__checkStartUp,delete n.__calledBy,function(e,t){var n=void 0===e?{}:e,r=n.module,o=void 0===r?q:r,a=n.state,u=void 0===a?{}:a,c=n.watchedKeys,s=void 0===c?"-":c,i=n.storedKeys,d=void 0===i?[]:i,f=n.setup,l=void 0===f?null:f,p=n.persistStoredKeys,y=n.connect,_=void 0===y?{}:y,v=n.tag,m=n.lite,h=n.isPropsProxy,C=void 0!==h&&h,K=n.isSingle,g=void 0!==K&&K,S=n.renderKeyClasses,$=n.__checkStartUp,E=void 0===$||$,w=n.compareProps,b=void 0===w||w,x=n.__calledBy;void 0===t&&(t="");try{var U=Bo(o,t,S,A,rc(s),d,_,E,x),O=U._module,N=U._ccClassKey,D=U._connect;return function(n){if(n.prototype&&n.prototype.$$attach)throw Error("register a cc class is prohibited!");var e=!1===C?n:I.Component,i=e.$$setup,t=function(c){function e(e,t){var n;n=c.call(this,e,t)||this;try{var r=ac(u),o=Object.assign(n.state||{},r);n.$$attach=n.$$attach.bind(Ja(n));var a=Object.assign({},e,{isSingle:g,module:O,tag:v,state:o,type:A,insType:M,watchedKeys:s,ccClassKey:N,connect:D,storedKeys:d,persistStoredKeys:p});if(Oo(Ja(n),a,m),n.ctx.reactSetState=Dr(Ja(n)),n.ctx.reactForceUpdate=Ir(Ja(n)),l&&(n.$$setup||i))throw sc("ccUniqueKey "+n.ctx.ccUniqueKey);C||(n.$$setup&&(n.$$setup=n.$$setup.bind(Ja(n))),ka(Ja(n),l||n.$$setup||i,!1))}catch(e){Cn(e)}return n}Za(e,c);var t=e.prototype;return t.shouldComponentUpdate=function(e,t){var n=this.ctx.childRef;if(n&&n.shouldComponentUpdate)return n.shouldComponentUpdate(e,t);if(c.prototype.shouldComponentUpdate)return c.prototype.shouldComponentUpdate.call(this,e,t);var r=!!b&&oc(this.props,e);return this.state!==t||r},t.$$attach=function(e){var t=this.ctx;if(((t.childRef=e).ctx=t).reactSetState=e.setState.bind(e),t.reactForceUpdate=e.forceUpdate.bind(e),e.setState=t.setState,e.forceUpdate=t.forceUpdate,t.__$$ccSetState=wr(e,this),t.__$$ccForceUpdate=br(e),e.state||(e.state={}),Object.assign(e.state,this.state),tc(e),e.$$setup&&(e.$$setup=e.$$setup.bind(e)),l&&(e.$$setup||i))throw sc("ccUniqueKey "+t.ccUniqueKey);ka(e,l||e.$$setup||i,!1)},t.componentDidMount=function(){c.prototype.componentDidMount&&c.prototype.componentDidMount.call(this),wa(this)},t.componentDidUpdate=function(e,t,n){c.prototype.componentDidUpdate&&c.prototype.componentDidUpdate.call(this,e,t,n),Qa(this)},t.componentWillUnmount=function(){c.prototype.componentWillUnmount&&c.prototype.componentWillUnmount.call(this),Ma(this)},t.render=function(){return this.ctx.prevProps=this.ctx.props,this.ctx.props=this.props,cc.isDebug&&console.log(uc("@@@ render "+nc(N)),ic()),!1===C?(tc(this),c.prototype.render.call(this)):I.createElement(n,{ctx:this.ctx,$$attach:this.$$attach})},e}(e);return t.displayName=N===T?"CcDispatcher":nc(N),t}}catch(e){Cn(e)}}(n,t)}var fc=pe,lc=I.createElement("span",{style:{display:"none"}}),pc=function(r){function e(e,t){var n;return Fa(Ja(n=r.call(this,e,t)||this)),n}Za(e,r);var t=e.prototype;return t.componentDidMount=function(){wa(this)},t.shouldComponentUpdate=function(e,t){var n=!!this.__$$compareProps&&fc(to(e),to(this.props));return this.state!==t||n},t.componentDidUpdate=function(){Qa(this)},t.componentWillUnmount=function(){r.prototype.componentWillUnmount&&r.prototype.componentWillUnmount.call(this),Ma(this)},t.render=function(){var e=this.props;this.ctx.prevProps=this.ctx.props,this.ctx.props=to(e);var t=e.render,n=t||e.children;if("function"==typeof n){tc(this);var r=e.register,o=void 0===r?{}:r,a=this.ctx;return!0!==e.__$$regDumb&&o.mapProps?(a.mapped=o.mapProps(a)||{},n(a.mapped)||lc):n(a)||lc}if(I.isValidElement(n))throw Error("CcFragment's children can not b a react dom ");return n},e}(I.Component);function yc(e,t){var n=Ne(e),r=n.renderKeyClasses,o=n.module,a=n.watchedKeys,c=void 0===a?"-":a,i=n.storedKeys,u=n.render,s=n.connect,d=void 0===s?{}:s,f=ke(c),l=Bo(o,t,r,U,f,i,d,!0),p=l._ccClassKey,y=l._connect;function _(t){return function(e){return n.props=e,function(t,e){var n=e.mapProps,r=e.props,o=void 0===r?{}:r,a={__$$regDumb:!0,props:o,ccOption:o.ccOption,ccClassKey:e.ccClassKey,render:function(e){return n?(e.mapped=n(e),I.createElement(t,e.mapped)):I.createElement(t,e)},ccKey:o.ccKey,register:e};return I.createElement(pc,a)}(t,n)}}return n.module=l._module,n.watchedKeys=c,n.ccClassKey=p,n.connect=y,u?_(u):function(e){return _(e)}}var _c=wt.ccUKey_ref_,vc=1;function mc(e,t,n){this.setState=t,this.forceUpdate=t,this.state=e,this.isFirstRendered=!0,this.props=n}function hc(e,t,n,r,o,a,c,i,u,s,d){var f=r||Re(o),l=a.bindCtxToMethod,p=a.watchedKeys,y=void 0===p?"-":p,_=a.storedKeys,v=void 0===_?[]:_,m=a.connect,h=void 0===m?{}:m,C=a.setup,K=a.lite;vc+=1;var g=Bo(a.module,d,a.renderKeyClasses,_e,ke(y),v,h,!0),S=g._module,$=g._ccClassKey,E=g._connect,w=e||new mc(c,i,u),b=Object.assign({},a,{module:S,watchedKeys:y,state:f,type:_e,insType:t,ccClassKey:$,connect:E,ccOption:u.ccOption});w.props=u,Oo(w,b,K),w.ctx.reactSetState=Dr(w),w.ctx.reactForceUpdate=Ir(w);var x=w.ctx;return x.props=u,x.extra=s,ka(w,C,l),n.prevCcUKey=n.ccUKey,n.ccUKey=w.ctx.ccUniqueKey,x.useRef=function(e){var t=I.useRef(null);return x.refs[e]=t},w}function Cc(e){return e?Array.isArray(e)?e.join(","):"object"==typeof e?JSON.stringify(e):e:""}var Kc="react version is LTE 16.8",gc=function(e,t){return e.module!==t.module||Cc(e.connect)!==Cc(t.connect)};function Sc(e,t,n){void 0===e&&(e={});var r=I.useRef({prevCcUKey:null,ccUKey:null,regOpt:e}).current,o=Ne(e),a=o.state,c=void 0===a?{}:a,i=o.props,u=void 0===i?{}:i,s=o.mapProps,d=o.layoutEffect,f=void 0!==d&&d,l=o.extra,p=void 0===l?{}:l,y=I.useState;if(!y)throw Error(Kc);function _(e){return hc(e,n,r,C,c,o,g,S,u,p,t)}var v,m=vc,h=y(m)[0]===m,C=h?Re(c):0,K=y(C),g=K[0],S=K[1];if(h||gc(r.regOpt,e))r.regOpt=e,v=_();else if(v=_c[r.ccUKey]){var $=v.ctx;$.prevProps=$.props,v.props=$.props=u,$.extra=p}else v=_();var E=v.ctx,w=f?I.useLayoutEffect:I.useEffect;if(w(function(){return function(){var e=_c[r.prevCcUKey||r.ccUKey];e&&(r.prevCcUKey=null,Ma(e))}},[v]),w(function(){!function(e,t){e.__boundSetState=t,e.__boundForceUpdate=t}(E,S),v.isFirstRendered?(v.isFirstRendered=!1,wa(v)):Qa(v)}),tc(v),s){var b=s(E);if(!be(b))throw Error("mapProps ret "+we);E.mapped=b}return E}function $c(e,t){return Sc(e,t,M)}function Ec(){throw Error("api doc: cc.setState(module:string, state:object, renderKey:string, delayMs?:number, skipMiddleware?:boolean, throwError?:boolean)")}function wc(e){return wt.store.getState(e)}var bc=wt.store.getGlobalState,xc=wt.computed._computedValue;var Uc=wt.ccUKey_ref_,Oc=wt.ccClassKey_ccClassContext_;function Nc(){var n=[],r=wt.ccUKey_ref_;return de(r).forEach(function(e){var t=r[e];t&&!t.__$$isUnmounted&&n.push(t)}),n}function Dc(){return"Ob view"}function Ic(e,t,n){var r=void 0===n?{}:n,o=r.state,a=r.reducer,c=r.computed,i=r.watch,u=r.init;if(!wt.isStartup)throw Error("cc is not startup yet");Tt(e),Rt(t,!1);var s=wt.moduleName_stateFn_[t];if(!s)throw Error("target module["+t+"] state must be a function when use cloneModule");var d=s();Object.assign(d,Re(o));var f=Rr(wt.reducer._reducer[t]||{},e);a&&Object.assign(f,Rr(a,e));var l=wt.computed._computedRaw[t]||{};c&&Object.assign(l,c);var p=wt.watch._watchRaw[t]||{};i&&Object.assign(p,i);var y=wt.init._init[t];u&&(y=u);var _={state:d,reducer:f,computed:l,watch:p};y&&(_.init=y),Tr(e,_)}function Ac(t,e){function r(e,t){var n=t.state,r=t.reducer,o=void 0===r?{}:r,a=t.watch,c=t.computed,i=t.init,u=t.initPost,s=t.isClassSingle;if(d.store[e])throw Error("run api error: module"+e+" duplicate");d.store[e]=Xa(n),"function"==typeof n&&(wt.moduleName_stateFn_[e]=n),d.reducer[e]=o,a&&(d.watch[e]=a),c&&(d.computed[e]=c),i&&(d.init[e]=i),u&&(d.initPost[e]=u),d.moduleSingleClass[e]=!0===s}void 0===t&&(t={}),void 0===e&&(e={}),Ba(t)||Ha("store"),Ba(e)||Ha("options");var d={store:{},reducer:{},watch:{},computed:{},init:{},initPost:{},moduleSingleClass:{}};Ga(t).forEach(function(e){return r(e,t[e])}),Nt.forEach(function(e){var t=e.module,n=e.config;ee("configure pending module["+t+"]"),r(t,n)}),Nt.length=0,Ya(d.init)&&(d.init=null),qa(d,e)}function Mc(e,t){return dc({connect:e},t)}function Tc(e,t){return yc({connect:e},t)}function Rc(e,o){var a=Ne(e);function t(n){var e=a.memo,t=void 0===e||e;function r(){return function(e){a.props=e;var t=$c(a,o);return I.createElement(n,a.mapProps?t.mapped:t)}}return delete a.memo,t&&I.memo?I.memo(r()):r()}"function"==typeof a.state&&(a.state=a.state());var n=a.render;return n?t(n):function(e){return t(e)}}function Wc(e,t,n,r,o){void 0===o&&(o=!1);try{Vt().ctx.setGlobalState(e,t,n,r)}catch(e){if(o)throw e;xe(e.message)}}function kc(e,t,n,r,o,a){void 0===r&&(r=-1),void 0===a&&(a=!1),void 0===e&&void 0===t&&Ec(),"string"!=typeof e&&Ec(),function(e,t,n,r,o){void 0===r&&(r=-1),ur(t,{ccKey:"[[top api:setState]]",module:e,renderKey:n,delay:r,skipMiddleware:o})}(e,t,n,r,o)}function jc(e,t,n,r){Vt().ctx.set(e,t,n,r)}function Lc(e,t){if(!e.includes("/"))throw Error("keyPath must start with module");var n=e.split("/"),r=wc(n[0]);return oo(e,t,!1,r,!1).state}function Fc(e){return Jc[e].connectedState||{}}function Pc(e){return e?xc[e]:xc}function Vc(e){if(void 0===e)throw Error("api doc: cc.emit(event:string|{name:string, identity?:string, ctx?:boolean}, ...args)");try{for(var t,n=Vt(),r=arguments.length,o=Array(1<r?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];(t=n.ctx).emit.apply(t,[e].concat(o))}catch(e){xe(e)}}function zc(e,t){try{Vt().ctx.off(e,t)}catch(e){if(t.throwError)throw e;xe(e.message)}}function qc(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(function(e){var n=[],t=Oc[e];return t&&t.ccKeys.forEach(function(e){var t=Uc[e];t&&n.push(t)}),n})(e).forEach(function(e){var t;e.__$$isUnmounted||e.ctx.execute&&(t=e.ctx).execute.apply(t,n)})}function Hc(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];Nc().forEach(function(e){var t;e.ctx.execute&&(t=e.ctx).execute.apply(t,n)})}function Bc(e,t){return Le(e,t)}function Gc(e,t){var n=Le(e,t);return n.lazy=!0,n}function Yc(e){return{fn:function(){return e},depKeys:[]}}function Xc(e,t){return Le(e,t)}var Jc=wt.ccClassKey_ccClassContext_,Zc=wt.store.appendState,Qc=wt.reducer._caller,ei=I.memo(function(e){var t=e.module,n=e.connect,r=e.classKey,o=e.render,a=e.children;if(t&&n)throw Error("module, connect can not been supplied both");if(!t&&!n)throw Error("module or connect should been supplied");var c=o||a||Dc,i=t?{module:t}:{connect:n};i.lite=1;var u,s,d=function(e,t){return Sc(e,t,f)}(i,r);return s=t?(u=d.moduleState,d.moduleComputed):(u=d.connectedState,d.connectedComputed),c([u,s,{mr:d.mr,cr:d.cr,r:d.r}])}),ti=dc,ni=yc,ri=Tr,oi=wc,ai=bc,ci=Gt,ii=wt,ui=Yo,si=Nc,di=Qc,fi=oa,li=pc,pi=ei,yi=c,_i=Zc,vi=$c,mi={cloneModule:Ic,emit:Vc,off:zc,connect:Mc,connectDumb:Tc,register:ti,registerDumb:ni,registerHookComp:Rc,configure:ri,dispatch:ci,run:Ac,setGlobalState:Wc,setState:kc,set:jc,setValue:Lc,getGlobalState:ai,getState:oi,getComputed:Pc,getConnectedState:Fc,ccContext:ii,createDispatcher:ui,execute:qc,executeAll:Hc,getRefs:si,reducer:di,clearContextIfHot:fi,CcFragment:li,Ob:pi,cst:yi,appendState:_i,useConcent:vi,bindCcToMcc:hi,defComputed:Bc,defLazyComputed:Gc,defComputedVal:Yc,defWatch:Xc};function hi(e){if(!Ki)throw Error("current env is not multi concent ins mode");if(Ki[e])throw Error("ccNamespace["+e+"] already existed in window.mcc");!function(e){De=e}(e),le(e,mi,Ki)}function Ci(){var e=De?window.mcc[De]:window.cc;if(e&&e.ccContext&&e.ccContext.info){var t=e.ccContext.info.version,n=ii.info.version;if(t!==n)throw Error("a existed version concent "+t+" is different with current about to import concent "+n+", \n        it may caused by some of your concent-eco-module with older version concent, please reinstall them (concent-*** module)")}}var Ki=window.mcc;Ki?setTimeout(function(){if(!Ie())throw Error("detect window.mcc, but user forget call bindCcToMcc in bundle entry");Ci()},1e3):(Ci(),le("cc",mi)),e.cloneModule=Ic,e.run=Ac,e.connect=Mc,e.connectDumb=Tc,e.register=ti,e.registerDumb=ni,e.registerHookComp=Rc,e.configure=ri,e.setGlobalState=Wc,e.setState=kc,e.set=jc,e.setValue=Lc,e.getState=oi,e.getGlobalState=ai,e.getConnectedState=Fc,e.getComputed=Pc,e.emit=Vc,e.off=zc,e.dispatch=ci,e.ccContext=ii,e.createDispatcher=ui,e.execute=qc,e.executeAll=Hc,e.getRefs=si,e.reducer=di,e.clearContextIfHot=fi,e.CcFragment=li,e.Ob=pi,e.cst=yi,e.appendState=_i,e.useConcent=vi,e.defComputed=Bc,e.defLazyComputed=Gc,e.defComputedVal=Yc,e.defWatch=Xc,e.bindCcToMcc=hi,e.default=mi,Object.defineProperty(e,"__esModule",{value:!0})});
